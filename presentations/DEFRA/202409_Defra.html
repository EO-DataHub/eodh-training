<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Demonstration for DEFRA – EODH Training Materials</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">EODH Training Materials</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/orgs/EO-DataHub/repositories">
            Source Code
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/EO-DataHub/eodh-training/discussions">
            Community discussion
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../presentations/DEFRA/202409_Defra.html">Presentations</a></li><li class="breadcrumb-item"><a href="../../presentations/DEFRA/202409_Defra.html">DEFRA 2024-09</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../website/about.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">API Client (pyeodh)</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../api-client/2_ResourceCatalog.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Searching the Resource Catalogue</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Workflows</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../workflows/1_workflows.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Workflow Introduction</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Presentations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../presentations/DEFRA/202409_Defra.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">DEFRA 2024-09</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#set-up" id="toc-set-up" class="nav-link active" data-scroll-target="#set-up">Set up</a></li>
  <li><a href="#what-is-eodh" id="toc-what-is-eodh" class="nav-link" data-scroll-target="#what-is-eodh">What is EODH?</a>
  <ul class="collapse">
  <li><a href="#its-data-discovery" id="toc-its-data-discovery" class="nav-link" data-scroll-target="#its-data-discovery">1) it’s data discovery</a></li>
  </ul></li>
  <li><a href="#try-to-use-eodh" id="toc-try-to-use-eodh" class="nav-link" data-scroll-target="#try-to-use-eodh">TRY TO USE EODH</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../presentations/DEFRA/202409_Defra.html">Presentations</a></li><li class="breadcrumb-item"><a href="../../presentations/DEFRA/202409_Defra.html">DEFRA 2024-09</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Demonstration for DEFRA</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Add EODH, CEDA and Oxidian logos! (<strong>TODO</strong>)</p>
<p><strong>Description &amp; purpose</strong>: This Notebook is designed to showcase the initial functionality of the Earth Observation Data Hub. It provides a snapshot of the Hub, the pyeodh API client and the various datasets as of September 2024. The user has a test site (Thetford) and would like to understand more about the satellite data available for that area. The user is also interested in obtaining a cloud free dataset and creating a data cube. The Notebook is designed in such a way that it can be run on the EODH AppHub (Notebook Service) or from a local environment.</p>
<p><strong>Author(s)</strong>: Alastair Graham, Dusan Figala, Phil Kershaw</p>
<p><strong>Date created</strong>: 2024-09-05</p>
<p><strong>Date last modified</strong>: 2024-09-18</p>
<p><strong>Licence</strong>: This notebook is licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International</a>. The code is released using the <a href="https://www.tldrlegal.com/license/bsd-2-clause-license-freebsd">BSD-2-Clause</a> license.</p>
<p><span style="font-size:0.75em;"> Copyright (c) , All rights reserved.</span></p>
<p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p>
<p>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution. THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS “AS IS” AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. </p>
<section id="set-up" class="level1">
<h1>Set up</h1>
<p>The following cell only needs to be run on the AppHub. If you have a local Python environment running install the required packages as you would normally.</p>
<div id="a304de62" class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If needed you can install a package in the current AppHub Jupyter environment using pip</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># For instance, we will need the following libraries</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>{sys.executable} <span class="op">-</span>m pip install <span class="op">--</span>upgrade pyeodh pandas matplotlib numpy pillow</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="what-is-eodh" class="level1">
<h1>What is EODH?</h1>
<section id="its-data-discovery" class="level2">
<h2 class="anchored" data-anchor-id="its-data-discovery">1) it’s data discovery</h2>
<p>pyeodh exposes the Hub’s API endpoints to Python users</p>
<div id="0a9a1f0b" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Imports</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pyeodh</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="e7b87e49" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Connect to the Hub</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>client <span class="op">=</span> pyeodh.Client().get_catalog_service()</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print a list of the collections held in the Resource Catalogue (their id and description)</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> collect <span class="kw">in</span> client.get_collections():</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>collect<span class="sc">.</span><span class="bu">id</span><span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>collect<span class="sc">.</span>description<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>cmip6: CMIP6
cordex: CORDEX
ukcp: UKCP
airbus_sar_data: The German TerraSAR-X / TanDEM-X satellite formation and the Spanish PAZ satellite (managed by Hisdesat Servicios Estratégicos S.A.) are being operated in the same orbit tube and feature identical ground swaths and imaging modes - allowing Airbus and Hisdesat to establish a unique commercial Radar Constellation. The satellites carry a high frequency X-band Synthetic Aperture Radar (SAR) sensor in order to acquire datasets ranging from very high-resolution imagery to wide area coverage.
airbus_data_example: Airbus data
airbus_data_example: Airbus data
sentinel2_ard: sentinel 2 ARD
sentinel1: Sentinel 1
naip: The [National Agriculture Imagery Program](https://www.fsa.usda.gov/programs-and-services/aerial-photography/imagery-programs/naip-imagery/) (NAIP) provides U.S.-wide, high-resolution aerial imagery, with four spectral bands (R, G, B, IR).  NAIP is administered by the [Aerial Field Photography Office](https://www.fsa.usda.gov/programs-and-services/aerial-photography/) (AFPO) within the [US Department of Agriculture](https://www.usda.gov/) (USDA).  Data are captured at least once every three years for each state.  This dataset represents NAIP data from 2010-present, in [cloud-optimized GeoTIFF](https://www.cogeo.org/) format.

cop-dem-glo-90: The Copernicus DEM is a Digital Surface Model (DSM) which represents the surface of the Earth including buildings, infrastructure and vegetation. GLO-90 provides worldwide coverage at 90 meters.</code></pre>
</div>
</div>
<div id="c8eae423" class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find some commercial data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="04669d57" class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find some open data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>it’s mass compute what are workflows There’s also a QGIS plugin</li>
</ol>
<div id="4af41382" class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># connect to the Workflow Runner</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="1d98fdfd" class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Choose and parameterise a workflow</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="a2087c93" class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the workflow</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="ef19c0b2" class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find the outputs</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li>it’s data analysis Notebook service can be used with pyeodh and other libraries installed using pip to analyse data and outputs</li>
</ol>
<div id="e70d7448" class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data cube?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Following https://odc-stac.readthedocs.io/en/latest/notebooks/stac-load-e84-aws.html</p>
</section>
</section>
<section id="try-to-use-eodh" class="level1">
<h1>TRY TO USE EODH</h1>
<div id="4f6938e0-7978-4ead-abe2-470f9dc2ed18" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> dask.distributed</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> folium</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">#import folium.plugins # Not sure what this does</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shapely.geometry</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> IPython.display <span class="im">import</span> display</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pystac_client <span class="im">import</span> Client</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> odc.stac <span class="im">import</span> configure_rio, stac_load <span class="co"># the data cube bit</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> convert_bounds(bbox, invert_y<span class="op">=</span><span class="va">False</span>):</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="co">    Helper method for changing bounding box representation to leaflet notation</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="co">    ``(lon1, lat1, lon2, lat2) -&gt; ((lat1, lon1), (lat2, lon2))``</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    x1, y1, x2, y2 <span class="op">=</span> bbox</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> invert_y:</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>        y1, y2 <span class="op">=</span> y2, y1</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ((y1, x1), (y2, x2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="6c32de54-6db4-4417-ad3b-b4e21aea34b7" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># FIND STAC ITEMS</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#km2deg = 1.0 / 111</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">#x, y = (113.887, -25.843)  # Center point of a query</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">#r = 100 * km2deg</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co">#bbox = (x - r, y - r, x + r, y + r)</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"https://api.stac.ceda.ac.uk/"</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="co">#catalog = Client.open("https://earth-search.aws.element84.com/v1/")</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>client <span class="op">=</span> Client.<span class="bu">open</span>(url)</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> coll <span class="kw">in</span> client.get_collections():</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>coll<span class="sc">.</span><span class="bu">id</span><span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>coll<span class="sc">.</span>description<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>cmip6: CMIP6
cordex: CORDEX
sentinel1: Sentinel 1
sentinel2_ard: sentinel 2 ARD
sst-cdrv3-collection: collection of EOCIS SST CDR V3
ukcp: UKCP</code></pre>
</div>
</div>
<div id="2f466597-5f83-448b-8377-fe4d847b17a5" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>sentinel2_ard <span class="op">=</span> client.get_collection(<span class="st">'sentinel2_ard'</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>sentinel2_ard.get_items()</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co"># check the spatial and temporal extent of the collection</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"spatial extent:"</span>, sentinel2_ard.extent.spatial.bboxes)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"data range:"</span>, [<span class="bu">str</span>(d) <span class="cf">for</span> d <span class="kw">in</span> sentinel2_ard.extent.temporal.intervals[<span class="dv">0</span>]])</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co">#items = list(query.items())</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="co">#print(f"Found: {len(items):d} datasets")</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert STAC items into a GeoJSON FeatureCollection</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="co">#stac_json = query.item_collection_as_dict()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>spatial extent: [[-9.00034454651177, 49.48562028352171, 3.1494256015866995, 61.33444247301668]]
data range: ['2023-01-01 11:14:51+00:00', '2023-11-01 11:43:49+00:00']</code></pre>
</div>
</div>
<div id="ac056347-5fb2-4e95-98ed-57ec504928e4" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># SEARCH</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>item_search <span class="op">=</span> client.search(</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    collections<span class="op">=</span>[<span class="st">'sentinel2_ard'</span>],</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    query<span class="op">=</span>[</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'start_datetime&gt;=2023-01-01'</span>,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'end_datetime&lt;=2023-02-28'</span>, </span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    max_items<span class="op">=</span><span class="dv">100</span>,</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="6181ff28-d4e8-403e-bd8c-35003661c945" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>items <span class="op">=</span> <span class="bu">list</span>(item_search.items())</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(items)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>100</code></pre>
</div>
</div>
<div id="6126f122-5c38-43f6-98f7-af8f19c39051" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shapely <span class="im">import</span> Point</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>point <span class="op">=</span> Point(<span class="op">-</span><span class="fl">1.3144835766058023</span>, <span class="fl">51.57555380377267</span>) <span class="co"># Atlas building at RAL</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>item_search <span class="op">=</span> client.search(</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    collections<span class="op">=</span>[<span class="st">'sentinel2_ard'</span>],</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    intersects<span class="op">=</span>point,</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    query<span class="op">=</span>[</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">'start_datetime&gt;=2023-01-01'</span>,</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">'end_datetime&lt;=2023-02-28'</span>, </span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>      ],</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    max_items<span class="op">=</span><span class="dv">10</span>,</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>items <span class="op">=</span> <span class="bu">list</span>(item_search.items())</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>items</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>[&lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.02.25.S2B_20230225_lat52lon075_T30UXC_ORB137_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.02.23.S2A_20230223_lat52lon075_T30UXC_ORB037_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.02.20.S2A_20230220_lat52lon075_T30UXC_ORB137_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.02.15.S2B_20230215_lat52lon075_T30UXC_ORB137_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.02.13.S2A_20230213_lat52lon075_T30UXC_ORB037_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.02.08.S2B_20230208_lat52lon075_T30UXC_ORB037_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.01.31.S2A_20230131_lat52lon075_T30UXC_ORB137_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.01.24.S2A_20230124_lat52lon075_T30UXC_ORB037_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.01.21.S2A_20230121_lat52lon075_T30UXC_ORB137_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.01.19.S2B_20230119_lat52lon075_T30UXC_ORB037_utm30n_osgb&gt;]</code></pre>
</div>
</div>
<div id="758e6914-8f2f-4098-b4ae-d7039675c6ec" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>items[<span class="dv">0</span>].to_dict()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<pre><code>{'type': 'Feature',
 'stac_version': '1.0.0',
 'id': 'neodc.sentinel_ard.data.sentinel_2.2023.02.25.S2B_20230225_lat52lon075_T30UXC_ORB137_utm30n_osgb',
 'properties': {'file_count': 7,
  'start_datetime': '2023-02-25T11:09:39Z',
  'end_datetime': '2023-02-25T11:09:39Z',
  'NSSDC Identifier': '2015-000A',
  'created': '2024-02-07T11:36:30.012295Z',
  'Instrument Family Name': 'Multi-Spectral Instrument',
  'Platform Number': '2B',
  'Datatake Type': 'INS-NOBS',
  'esa_file_name': 'S2B_MSIL1C_20230225T110939_N0509_R137_T30UXC_20230225T115203',
  'Ground Tracking Direction': 'descending',
  'datetime': '2023-02-25T11:09:39Z',
  'instance_id': 'neodc.sentinel_ard.data.sentinel_2.2023.02.25.S2B_20230225_lat52lon075_T30UXC_ORB137_utm30n_osgb',
  'size': 1949488461,
  'Product Type': 'S2MSI1C',
  'Instrument Family Name Abbreviation': 'MSI',
  'Start Orbit Number': '031194',
  'eo:cloud_cover': '74.4384424736481',
  'Start Relative Orbit Number': '137',
  'updated': '2024-02-07T11:36:30.012295Z',
  'Instrument Mode': None,
  'EPSG': '27700'},
 'geometry': {'coordinates': [[[-1.5321045, 52.34135509726958],
    [0.077757925309447, 52.31036691499413],
    [0.011254122594852, 51.32452335478603],
    [-1.5638733, 51.354439390266904],
    [-1.5321045, 52.34135509726958]]],
  'type': 'Polygon'},
 'links': [{'rel': 'self',
   'href': 'https://api.stac.ceda.ac.uk/collections/sentinel2_ard/items/neodc.sentinel_ard.data.sentinel_2.2023.02.25.S2B_20230225_lat52lon075_T30UXC_ORB137_utm30n_osgb',
   'type': 'application/geo+json'},
  {'rel': 'parent',
   'href': 'https://api.stac.ceda.ac.uk/collections/sentinel2_ard',
   'type': 'application/json'},
  {'rel': 'collection',
   'href': 'https://api.stac.ceda.ac.uk/collections/sentinel2_ard',
   'type': 'application/json'},
  {'rel': 'root',
   'href': 'https://api.stac.ceda.ac.uk/',
   'type': 'application/json',
   'title': 'stac-fastapi-elasticsearch'}],
 'assets': {'cloud': {'href': 'https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2023/02/25/S2B_20230225_lat52lon075_T30UXC_ORB137_utm30n_osgb_clouds.tif',
   'size': 1900764,
   'location': 'on_disk',
   'roles': ['data']},
  'metadata': {'href': 'https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2023/02/25/S2B_20230225_lat52lon075_T30UXC_ORB137_utm30n_osgb_vmsk_sharp_rad_srefdem_stdsref_meta.xml',
   'size': 18360,
   'location': 'on_disk',
   'roles': ['metadata']},
  'thumbnail': {'href': 'https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2023/02/25/S2B_20230225_lat52lon075_T30UXC_ORB137_utm30n_osgb_vmsk_sharp_rad_srefdem_stdsref_thumbnail.jpg',
   'size': 85207,
   'location': 'on_disk',
   'roles': ['thumbnail']},
  'topographic_shadow': {'href': 'https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2023/02/25/S2B_20230225_lat52lon075_T30UXC_ORB137_utm30n_osgb_toposhad.tif',
   'size': 250612,
   'location': 'on_disk',
   'roles': ['data']},
  'cog': {'href': 'https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2023/02/25/S2B_20230225_lat52lon075_T30UXC_ORB137_utm30n_osgb_vmsk_sharp_rad_srefdem_stdsref.tif',
   'size': 1945239489,
   'eo:bands': [{'full_width_half_max': 0.07,
     'central_wavelength': 492.1,
     'name': 'B02',
     'description': 'Blue',
     'common_name': 'blue'},
    {'full_width_half_max': 0.04,
     'central_wavelength': 559,
     'name': 'B03',
     'description': 'Green',
     'common_name': 'green'},
    {'full_width_half_max': 0.03,
     'central_wavelength': 665,
     'name': 'B04',
     'description': 'Red',
     'common_name': 'red'},
    {'full_width_half_max': 0.02,
     'central_wavelength': 703.8,
     'name': 'B05',
     'description': 'Visible and Near Infrared',
     'common_name': 'rededge'},
    {'full_width_half_max': 0.02,
     'central_wavelength': 739.1,
     'name': 'B06',
     'description': 'Visible and Near Infrared',
     'common_name': 'rededge'},
    {'full_width_half_max': 0.02,
     'central_wavelength': 779.7,
     'name': 'B07',
     'description': 'Visible and Near Infrared',
     'common_name': 'rededge'},
    {'full_width_half_max': 0.11,
     'central_wavelength': 833,
     'name': 'B08',
     'description': 'Visible and Near Infrared',
     'common_name': 'nir'},
    {'full_width_half_max': 0.02,
     'central_wavelength': 864,
     'name': 'B08a',
     'description': 'Visible and Near Infrared',
     'common_name': 'nir08'},
    {'full_width_half_max': 0.09,
     'central_wavelength': 1610.4,
     'name': 'B11',
     'description': 'Short Wave Infrared',
     'common_name': 'swir16'},
    {'full_width_half_max': 0.19,
     'central_wavelength': 2185.7,
     'name': 'B12',
     'description': 'Short Wave Infrared',
     'common_name': 'swir22'}],
   'location': 'on_disk',
   'roles': ['data']},
  'valid_pixels': {'href': 'https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2023/02/25/S2B_20230225_lat52lon075_T30UXC_ORB137_utm30n_osgb_valid.tif',
   'size': 288670,
   'location': 'on_disk',
   'roles': ['data']},
  'saturated_pixels': {'href': 'https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2023/02/25/S2B_20230225_lat52lon075_T30UXC_ORB137_utm30n_osgb_sat.tif',
   'size': 1705359,
   'location': 'on_disk',
   'roles': ['data']}},
 'bbox': [-1.5638733, 51.32452335478603, 0.077757925309447, 52.34135509726958],
 'stac_extensions': ['https://stac-extensions.github.io/eo/v1.1.0/schema.json'],
 'collection': 'sentinel2_ard'}</code></pre>
</div>
</div>
<div id="5f1725d7-e500-47a5-9bae-9a30344d2770" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>item_search <span class="op">=</span> client.search(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    collections<span class="op">=</span>[<span class="st">'sentinel2_ard'</span>],</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    intersects<span class="op">=</span>point,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    query<span class="op">=</span>[</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'start_datetime&gt;=2023-01-01'</span>,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'end_datetime&lt;=2023-02-28'</span>, </span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">'eo:cloud_cover&lt;=50.0'</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>      ],</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    max_items<span class="op">=</span><span class="dv">10</span>,</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>items <span class="op">=</span> <span class="bu">list</span>(item_search.items())</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>items</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<pre><code>[&lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.02.20.S2A_20230220_lat52lon075_T30UXC_ORB137_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.02.15.S2B_20230215_lat52lon075_T30UXC_ORB137_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.02.13.S2A_20230213_lat52lon075_T30UXC_ORB037_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.02.08.S2B_20230208_lat52lon075_T30UXC_ORB037_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.01.31.S2A_20230131_lat52lon075_T30UXC_ORB137_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.01.24.S2A_20230124_lat52lon075_T30UXC_ORB037_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.01.21.S2A_20230121_lat52lon075_T30UXC_ORB137_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.01.19.S2B_20230119_lat52lon075_T30UXC_ORB037_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.01.11.S2A_20230111_lat52lon075_T30UXC_ORB137_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.01.09.S2B_20230109_lat52lon075_T30UXC_ORB037_utm30n_osgb&gt;]</code></pre>
</div>
</div>
<div id="44902e7b-b2bf-44c4-bd37-469c17396949" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>items[<span class="dv">0</span>].to_dict()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>{'type': 'Feature',
 'stac_version': '1.0.0',
 'id': 'neodc.sentinel_ard.data.sentinel_2.2023.02.20.S2A_20230220_lat52lon075_T30UXC_ORB137_utm30n_osgb',
 'properties': {'file_count': 7,
  'start_datetime': '2023-02-20T11:11:01Z',
  'end_datetime': '2023-02-20T11:11:01Z',
  'NSSDC Identifier': '2015-000A',
  'created': '2024-02-07T11:34:51.269363Z',
  'Instrument Family Name': 'Multi-Spectral Instrument',
  'Platform Number': '2A',
  'Datatake Type': 'INS-NOBS',
  'esa_file_name': 'S2A_MSIL1C_20230220T111101_N0509_R137_T30UXC_20230220T131022',
  'Ground Tracking Direction': 'descending',
  'datetime': '2023-02-20T11:11:01Z',
  'instance_id': 'neodc.sentinel_ard.data.sentinel_2.2023.02.20.S2A_20230220_lat52lon075_T30UXC_ORB137_utm30n_osgb',
  'size': 2086211720,
  'Product Type': 'S2MSI1C',
  'Instrument Family Name Abbreviation': 'MSI',
  'Start Orbit Number': '040031',
  'eo:cloud_cover': '26.2055898951895',
  'Start Relative Orbit Number': '137',
  'updated': '2024-02-07T11:34:51.269363Z',
  'Instrument Mode': None,
  'EPSG': '27700'},
 'geometry': {'coordinates': [[[-1.5321045, 52.34135509726958],
    [0.077757925309447, 52.31036691499413],
    [0.011254122594852, 51.32452335478603],
    [-1.5638733, 51.354439390266904],
    [-1.5321045, 52.34135509726958]]],
  'type': 'Polygon'},
 'links': [{'rel': 'self',
   'href': 'https://api.stac.ceda.ac.uk/collections/sentinel2_ard/items/neodc.sentinel_ard.data.sentinel_2.2023.02.20.S2A_20230220_lat52lon075_T30UXC_ORB137_utm30n_osgb',
   'type': 'application/geo+json'},
  {'rel': 'parent',
   'href': 'https://api.stac.ceda.ac.uk/collections/sentinel2_ard',
   'type': 'application/json'},
  {'rel': 'collection',
   'href': 'https://api.stac.ceda.ac.uk/collections/sentinel2_ard',
   'type': 'application/json'},
  {'rel': 'root',
   'href': 'https://api.stac.ceda.ac.uk/',
   'type': 'application/json',
   'title': 'stac-fastapi-elasticsearch'}],
 'assets': {'cloud': {'href': 'https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2023/02/20/S2A_20230220_lat52lon075_T30UXC_ORB137_utm30n_osgb_clouds.tif',
   'size': 3144692,
   'location': 'on_disk',
   'roles': ['data']},
  'metadata': {'href': 'https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2023/02/20/S2A_20230220_lat52lon075_T30UXC_ORB137_utm30n_osgb_vmsk_sharp_rad_srefdem_stdsref_meta.xml',
   'size': 18363,
   'location': 'on_disk',
   'roles': ['metadata']},
  'thumbnail': {'href': 'https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2023/02/20/S2A_20230220_lat52lon075_T30UXC_ORB137_utm30n_osgb_vmsk_sharp_rad_srefdem_stdsref_thumbnail.jpg',
   'size': 118722,
   'location': 'on_disk',
   'roles': ['thumbnail']},
  'topographic_shadow': {'href': 'https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2023/02/20/S2A_20230220_lat52lon075_T30UXC_ORB137_utm30n_osgb_toposhad.tif',
   'size': 262653,
   'location': 'on_disk',
   'roles': ['data']},
  'cog': {'href': 'https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2023/02/20/S2A_20230220_lat52lon075_T30UXC_ORB137_utm30n_osgb_vmsk_sharp_rad_srefdem_stdsref.tif',
   'size': 2080673323,
   'eo:bands': [{'full_width_half_max': 0.07,
     'central_wavelength': 496.6,
     'name': 'B02',
     'description': 'Blue',
     'common_name': 'blue'},
    {'full_width_half_max': 0.04,
     'central_wavelength': 560,
     'name': 'B03',
     'description': 'Green',
     'common_name': 'green'},
    {'full_width_half_max': 0.03,
     'central_wavelength': 664.5,
     'name': 'B04',
     'description': 'Red',
     'common_name': 'red'},
    {'full_width_half_max': 0.02,
     'central_wavelength': 703.9,
     'name': 'B05',
     'description': 'Visible and Near Infrared',
     'common_name': 'rededge'},
    {'full_width_half_max': 0.02,
     'central_wavelength': 740.2,
     'name': 'B06',
     'description': 'Visible and Near Infrared',
     'common_name': 'rededge'},
    {'full_width_half_max': 0.02,
     'central_wavelength': 782.5,
     'name': 'B07',
     'description': 'Visible and Near Infrared',
     'common_name': 'rededge'},
    {'full_width_half_max': 0.11,
     'central_wavelength': 835.1,
     'name': 'B08',
     'description': 'Visible and Near Infrared',
     'common_name': 'nir'},
    {'full_width_half_max': 0.02,
     'central_wavelength': 864.8,
     'name': 'B08a',
     'description': 'Visible and Near Infrared',
     'common_name': 'nir08'},
    {'full_width_half_max': 0.09,
     'central_wavelength': 1613.7,
     'name': 'B11',
     'description': 'Short Wave Infrared',
     'common_name': 'swir16'},
    {'full_width_half_max': 0.18,
     'central_wavelength': 2202.4,
     'name': 'B12',
     'description': 'Short Wave Infrared',
     'common_name': 'swir22'}],
   'location': 'on_disk',
   'roles': ['data']},
  'valid_pixels': {'href': 'https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2023/02/20/S2A_20230220_lat52lon075_T30UXC_ORB137_utm30n_osgb_valid.tif',
   'size': 288608,
   'location': 'on_disk',
   'roles': ['data']},
  'saturated_pixels': {'href': 'https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2023/02/20/S2A_20230220_lat52lon075_T30UXC_ORB137_utm30n_osgb_sat.tif',
   'size': 1705359,
   'location': 'on_disk',
   'roles': ['data']}},
 'bbox': [-1.5638733, 51.32452335478603, 0.077757925309447, 52.34135509726958],
 'stac_extensions': ['https://stac-extensions.github.io/eo/v1.1.0/schema.json'],
 'collection': 'sentinel2_ard'}</code></pre>
</div>
</div>
<div id="0288e451-47c0-4b19-b770-e80dcac7b120" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> key, value <span class="kw">in</span> items[<span class="dv">1</span>].assets.items():</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(key, value.href)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>cloud https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2023/02/15/S2B_20230215_lat52lon075_T30UXC_ORB137_utm30n_osgb_clouds.tif
metadata https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2023/02/15/S2B_20230215_lat52lon075_T30UXC_ORB137_utm30n_osgb_vmsk_sharp_rad_srefdem_stdsref_meta.xml
thumbnail https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2023/02/15/S2B_20230215_lat52lon075_T30UXC_ORB137_utm30n_osgb_vmsk_sharp_rad_srefdem_stdsref_thumbnail.jpg
topographic_shadow https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2023/02/15/S2B_20230215_lat52lon075_T30UXC_ORB137_utm30n_osgb_toposhad.tif
cog https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2023/02/15/S2B_20230215_lat52lon075_T30UXC_ORB137_utm30n_osgb_vmsk_sharp_rad_srefdem_stdsref.tif
valid_pixels https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2023/02/15/S2B_20230215_lat52lon075_T30UXC_ORB137_utm30n_osgb_valid.tif
saturated_pixels https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2023/02/15/S2B_20230215_lat52lon075_T30UXC_ORB137_utm30n_osgb_sat.tif</code></pre>
</div>
</div>
<div id="b187c25a-6f91-4fba-a7db-2501019c41b2" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>items</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>[&lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.02.20.S2A_20230220_lat52lon075_T30UXC_ORB137_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.02.15.S2B_20230215_lat52lon075_T30UXC_ORB137_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.02.13.S2A_20230213_lat52lon075_T30UXC_ORB037_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.02.08.S2B_20230208_lat52lon075_T30UXC_ORB037_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.01.31.S2A_20230131_lat52lon075_T30UXC_ORB137_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.01.24.S2A_20230124_lat52lon075_T30UXC_ORB037_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.01.21.S2A_20230121_lat52lon075_T30UXC_ORB137_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.01.19.S2B_20230119_lat52lon075_T30UXC_ORB037_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.01.11.S2A_20230111_lat52lon075_T30UXC_ORB137_utm30n_osgb&gt;,
 &lt;Item id=neodc.sentinel_ard.data.sentinel_2.2023.01.09.S2B_20230109_lat52lon075_T30UXC_ORB037_utm30n_osgb&gt;]</code></pre>
</div>
</div>
<div id="407a59ad-1f16-4e16-9051-0abeb3cd1b27" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># SET UP DASK CLIENT</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>client <span class="op">=</span> dask.distributed.Client()</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>configure_rio(cloud_defaults<span class="op">=</span><span class="va">True</span>, aws<span class="op">=</span>{<span class="st">"aws_unsigned"</span>: <span class="va">True</span>}, client<span class="op">=</span>client) <span class="co"># sets up gdal for cloud use</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>display(client)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/home/al/miniforge3/envs/odc/lib/python3.12/site-packages/distributed/node.py:182: UserWarning: Port 8787 is already in use.
Perhaps you already have a cluster running?
Hosting the HTTP server on port 36089 instead
  warnings.warn(</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
    <div style="width: 24px; height: 24px; background-color: #e1e1e1; border: 3px solid #9D9D9D; border-radius: 5px; position: absolute;"> </div>
    <div style="margin-left: 48px;">
        <h3 style="margin-bottom: 0px;" class="anchored" data-anchor-id="try-to-use-eodh">Client</h3>
        <p style="color: #9D9D9D; margin-bottom: 0px;">Client-18464180-69fc-11ef-adda-f40669402fbd</p>
        
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Connection method:</strong> Cluster object</td>
<td style="text-align: left;"><strong>Cluster type:</strong> distributed.LocalCluster</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Dashboard:</strong> <a href="http://127.0.0.1:36089/status" target="_blank">http://127.0.0.1:36089/status</a></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>


        

        
            <details>
            <summary style="margin-bottom: 20px;"><h3 style="display: inline;" class="anchored">Cluster Info</h3></summary>
            <div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="width: 24px; height: 24px; background-color: #e1e1e1; border: 3px solid #9D9D9D; border-radius: 5px; position: absolute;">
    </div>
    <div style="margin-left: 48px;">
        <h3 style="margin-bottom: 0px; margin-top: 0px;" class="anchored">LocalCluster</h3>
        <p style="color: #9D9D9D; margin-bottom: 0px;">ebba7415</p>
        
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Dashboard:</strong> <a href="http://127.0.0.1:36089/status" target="_blank">http://127.0.0.1:36089/status</a></td>
<td style="text-align: left;"><strong>Workers:</strong> 4</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Total threads:</strong> 4</td>
<td style="text-align: left;"><strong>Total memory:</strong> 15.48 GiB</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Status:</strong> running</td>
<td style="text-align: left;"><strong>Using processes:</strong> True</td>
</tr>
</tbody>
</table>


        <details>
            <summary style="margin-bottom: 20px;">
                <h3 style="display: inline;" class="anchored">Scheduler Info</h3>
            </summary>

            <div style="">
    <div>
        <div style="width: 24px; height: 24px; background-color: #FFF7E5; border: 3px solid #FF6132; border-radius: 5px; position: absolute;"> </div>
        <div style="margin-left: 48px;">
            <h3 style="margin-bottom: 0px;" class="anchored">Scheduler</h3>
            <p style="color: #9D9D9D; margin-bottom: 0px;">Scheduler-cc47dd57-ce18-4acc-8b44-2cfe14ee1b6d</p>
            
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Comm:</strong> tcp://127.0.0.1:43071</td>
<td style="text-align: left;"><strong>Workers:</strong> 4</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Dashboard:</strong> <a href="http://127.0.0.1:36089/status" target="_blank">http://127.0.0.1:36089/status</a></td>
<td style="text-align: left;"><strong>Total threads:</strong> 4</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Started:</strong> Just now</td>
<td style="text-align: left;"><strong>Total memory:</strong> 15.48 GiB</td>
</tr>
</tbody>
</table>

        </div>
    </div>

    <details style="margin-left: 48px;">
        <summary style="margin-bottom: 20px;">
            <h3 style="display: inline;" class="anchored">Workers</h3>
        </summary>

        
        <div style="margin-bottom: 20px;">
            <div style="width: 24px; height: 24px; background-color: #DBF5FF; border: 3px solid #4CC9FF; border-radius: 5px; position: absolute;"> </div>
            <div style="margin-left: 48px;">
            <details>
                <summary>
                    <h4 style="margin-bottom: 0px; display: inline;" class="anchored">Worker: 0</h4>
                </summary>
                
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Comm:</strong> tcp://127.0.0.1:37851</td>
<td style="text-align: left;"><strong>Total threads:</strong> 1</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Dashboard:</strong> <a href="http://127.0.0.1:45891/status" target="_blank">http://127.0.0.1:45891/status</a></td>
<td style="text-align: left;"><strong>Memory:</strong> 3.87 GiB</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Nanny:</strong> tcp://127.0.0.1:44451</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td colspan="2" style="text-align: left;"><strong>Local directory:</strong> /tmp/dask-scratch-space/worker-07pluzp_</td>
</tr>
</tbody>
</table>

            </details>
            </div>
        </div>
        
        <div style="margin-bottom: 20px;">
            <div style="width: 24px; height: 24px; background-color: #DBF5FF; border: 3px solid #4CC9FF; border-radius: 5px; position: absolute;"> </div>
            <div style="margin-left: 48px;">
            <details>
                <summary>
                    <h4 style="margin-bottom: 0px; display: inline;" class="anchored">Worker: 1</h4>
                </summary>
                
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Comm:</strong> tcp://127.0.0.1:44127</td>
<td style="text-align: left;"><strong>Total threads:</strong> 1</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Dashboard:</strong> <a href="http://127.0.0.1:38617/status" target="_blank">http://127.0.0.1:38617/status</a></td>
<td style="text-align: left;"><strong>Memory:</strong> 3.87 GiB</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Nanny:</strong> tcp://127.0.0.1:46581</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td colspan="2" style="text-align: left;"><strong>Local directory:</strong> /tmp/dask-scratch-space/worker-j1euk6hp</td>
</tr>
</tbody>
</table>

            </details>
            </div>
        </div>
        
        <div style="margin-bottom: 20px;">
            <div style="width: 24px; height: 24px; background-color: #DBF5FF; border: 3px solid #4CC9FF; border-radius: 5px; position: absolute;"> </div>
            <div style="margin-left: 48px;">
            <details>
                <summary>
                    <h4 style="margin-bottom: 0px; display: inline;" class="anchored">Worker: 2</h4>
                </summary>
                
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Comm:</strong> tcp://127.0.0.1:35695</td>
<td style="text-align: left;"><strong>Total threads:</strong> 1</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Dashboard:</strong> <a href="http://127.0.0.1:43975/status" target="_blank">http://127.0.0.1:43975/status</a></td>
<td style="text-align: left;"><strong>Memory:</strong> 3.87 GiB</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Nanny:</strong> tcp://127.0.0.1:46341</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td colspan="2" style="text-align: left;"><strong>Local directory:</strong> /tmp/dask-scratch-space/worker-guemqotg</td>
</tr>
</tbody>
</table>

            </details>
            </div>
        </div>
        
        <div style="margin-bottom: 20px;">
            <div style="width: 24px; height: 24px; background-color: #DBF5FF; border: 3px solid #4CC9FF; border-radius: 5px; position: absolute;"> </div>
            <div style="margin-left: 48px;">
            <details>
                <summary>
                    <h4 style="margin-bottom: 0px; display: inline;" class="anchored">Worker: 3</h4>
                </summary>
                
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Comm:</strong> tcp://127.0.0.1:45491</td>
<td style="text-align: left;"><strong>Total threads:</strong> 1</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Dashboard:</strong> <a href="http://127.0.0.1:40249/status" target="_blank">http://127.0.0.1:40249/status</a></td>
<td style="text-align: left;"><strong>Memory:</strong> 3.87 GiB</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Nanny:</strong> tcp://127.0.0.1:45605</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td colspan="2" style="text-align: left;"><strong>Local directory:</strong> /tmp/dask-scratch-space/worker-_dnsv6m3</td>
</tr>
</tbody>
</table>

            </details>
            </div>
        </div>
        

    </details>
</div>

        </details>
    </div>
</div>
            </details>
        

    </div>
</div>
</div>
</div>
<div id="ea05ae8b-41f1-432a-a765-8e862ccbf92d" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Found: </span><span class="sc">{</span><span class="bu">len</span>(items)<span class="sc">:d}</span><span class="ss"> datasets"</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert STAC items into a GeoJSON FeatureCollection</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>stac_json <span class="op">=</span> item_search.item_collection_as_dict()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Found: 10 datasets</code></pre>
</div>
</div>
<div id="27f6e12a-93aa-4a70-8cd6-92232cd835a9" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># REVIEW SEARCH RESULTS</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>gdf <span class="op">=</span> gpd.GeoDataFrame.from_features(stac_json, <span class="st">"epsg:4326"</span>)</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute granule id from components</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="co">#gdf["granule"] = (</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="co">#    gdf["esa_file_name"].apply(lambda x: f"{x:02d}")</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="co">#    + gdf["mgrs:latitude_band"]</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="co">#    + gdf["mgrs:grid_square"]</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="co">#)</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> gdf.plot(</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"esa_file_name"</span>,</span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>    edgecolor<span class="op">=</span><span class="st">"black"</span>,</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>    categorical<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>    aspect<span class="op">=</span><span class="st">"equal"</span>,</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>    alpha<span class="op">=</span><span class="fl">0.5</span>,</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>    figsize<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">12</span>),</span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>    legend_kwds<span class="op">=</span>{<span class="st">"loc"</span>: <span class="st">"upper left"</span>, <span class="st">"frameon"</span>: <span class="va">False</span>, <span class="st">"ncol"</span>: <span class="dv">1</span>},</span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>_ <span class="op">=</span> fig.set_title(<span class="st">"STAC Query Results"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="202409_Defra_files/figure-html/cell-25-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="205e0c9a-3e03-48f4-b03a-b7873411827e" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># PLOT THE SAME, but using FOLIUM</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co"># https://github.com/python-visualization/folium/issues/1501</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co">#from branca.element import Figure</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> folium</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> folium.Figure(width<span class="op">=</span><span class="dv">600</span>, height<span class="op">=</span><span class="dv">400</span>)</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> folium.Map(location<span class="op">=</span>[<span class="dv">52</span>, <span class="dv">2</span>], zoom_start<span class="op">=</span><span class="dv">5</span>).add_to(f)</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a><span class="co">#fig = Figure(width="400px", height="500px")</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a><span class="co">#map1 = folium.Map()</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a><span class="co">#fig.add_child(map1)</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a><span class="co">#folium.GeoJson(</span></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a><span class="co">#    shapely.geometry.box(*bbox),</span></span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a><span class="co">#    style_function=lambda x: dict(fill=False, weight=1, opacity=0.7, color="olive"),</span></span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a><span class="co">#    name="Query",</span></span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a><span class="co">#).add_to(m)</span></span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>gdf.explore(</span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">"esa_file_name"</span>,</span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a>    categorical<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a>    tooltip<span class="op">=</span>[</span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a>        <span class="st">"esa_file_name"</span>,</span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true" tabindex="-1"></a><span class="co">#        "datetime",</span></span>
<span id="cb37-31"><a href="#cb37-31" aria-hidden="true" tabindex="-1"></a><span class="co">#        "eo:cloud_cover",</span></span>
<span id="cb37-32"><a href="#cb37-32" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb37-33"><a href="#cb37-33" aria-hidden="true" tabindex="-1"></a>    popup<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb37-34"><a href="#cb37-34" aria-hidden="true" tabindex="-1"></a><span class="co">#    style_kwds=dict(fillOpacity=0.1, width=2),</span></span>
<span id="cb37-35"><a href="#cb37-35" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">"STAC"</span>,</span>
<span id="cb37-36"><a href="#cb37-36" aria-hidden="true" tabindex="-1"></a>    m<span class="op">=</span>m,</span>
<span id="cb37-37"><a href="#cb37-37" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb37-38"><a href="#cb37-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-39"><a href="#cb37-39" aria-hidden="true" tabindex="-1"></a><span class="co">#map1.fit_bounds(bounds=convert_bounds(gdf.unary_union.bounds))</span></span>
<span id="cb37-40"><a href="#cb37-40" aria-hidden="true" tabindex="-1"></a><span class="co">#display(fig)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<iframe srcdoc="<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;></script>
    <script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;></script>
    <script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;></script>
    <script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;></script>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/>
    
            <meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; />
            <style>
                #map_d846e8f34592b3966598f2be8c6c3d31 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>
        
    
                    <style>
                        .foliumtooltip {
                            
                        }
                       .foliumtooltip table{
                            margin: auto;
                        }
                        .foliumtooltip tr{
                            text-align: left;
                        }
                        .foliumtooltip th{
                            padding: 2px; padding-right: 8px;
                        }
                    </style>
            
    
    <script src=&quot;https://code.jquery.com/ui/1.12.1/jquery-ui.js&quot;></script>
    <script>$( function() {
        $( &quot;.maplegend&quot; ).draggable({
            start: function (event, ui) {
                $(this).css({
                    right: &quot;auto&quot;,
                    top: &quot;auto&quot;,
                    bottom: &quot;auto&quot;
                });
            }
        });
    });
    </script>
    <style type='text/css'>
      .maplegend {
        position: absolute;
        z-index:9999;
        background-color: rgba(255, 255, 255, .8);
        border-radius: 5px;
        box-shadow: 0 0 15px rgba(0,0,0,0.2);
        padding: 10px;
        font: 12px/14px Arial, Helvetica, sans-serif;
        right: 10px;
        bottom: 20px;
      }
      .maplegend .legend-title {
        text-align: left;
        margin-bottom: 5px;
        font-weight: bold;
        }
      .maplegend .legend-scale ul {
        margin: 0;
        margin-bottom: 0px;
        padding: 0;
        float: left;
        list-style: none;
        }
      .maplegend .legend-scale ul li {
        list-style: none;
        margin-left: 0;
        line-height: 16px;
        margin-bottom: 2px;
        }
      .maplegend ul.legend-labels li span {
        display: block;
        float: left;
        height: 14px;
        width: 14px;
        margin-right: 5px;
        margin-left: 0;
        border: 0px solid #ccc;
        }
      .maplegend .legend-source {
        color: #777;
        clear: both;
        }
      .maplegend a {
        color: #777;
        }
    </style>
    
</head>
<body>
    
    
    <div id='maplegend esa_file_name' class='maplegend'>
        <div class='legend-title'>esa_file_name</div>
        <div class='legend-scale'>
            <ul class='legend-labels'>
                <li><span style='background:#1f77b4'></span>S2A_MSIL1C_20230111T111431_N0509_R137_T30UXC_20230111T131027</li>
                <li><span style='background:#ff7f0e'></span>S2A_MSIL1C_20230121T111351_N0509_R137_T30UXC_20230121T131033</li>
                <li><span style='background:#2ca02c'></span>S2A_MSIL1C_20230124T112341_N0509_R037_T30UXC_20230124T145925</li>
                <li><span style='background:#d62728'></span>S2A_MSIL1C_20230131T111311_N0509_R137_T30UXC_20230131T131631</li>
                <li><span style='background:#9467bd'></span>S2A_MSIL1C_20230213T112151_N0509_R037_T30UXC_20230213T132023</li>
                <li><span style='background:#c49c94'></span>S2A_MSIL1C_20230220T111101_N0509_R137_T30UXC_20230220T131022</li>
                <li><span style='background:#f7b6d2'></span>S2B_MSIL1C_20230109T112339_N0509_R037_T30UXC_20230109T120132</li>
                <li><span style='background:#c7c7c7'></span>S2B_MSIL1C_20230119T112309_N0509_R037_T30UXC_20230119T120151</li>
                <li><span style='background:#dbdb8d'></span>S2B_MSIL1C_20230208T112129_N0509_R037_T30UXC_20230208T120439</li>
                <li><span style='background:#9edae5'></span>S2B_MSIL1C_20230215T111049_N0509_R137_T30UXC_20230215T115158</li>
            </ul>
        </div>
    </div>
    
    
            <div class=&quot;folium-map&quot; id=&quot;map_d846e8f34592b3966598f2be8c6c3d31&quot; ></div>
        
</body>
<script>
    
    
            var map_d846e8f34592b3966598f2be8c6c3d31 = L.map(
                &quot;map_d846e8f34592b3966598f2be8c6c3d31&quot;,
                {
                    center: [52.0, 2.0],
                    crs: L.CRS.EPSG3857,
                    zoom: 5,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );

            

        
    
            var tile_layer_430dd1fca29021b2211c4131d6845c22 = L.tileLayer(
                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,
                {&quot;attribution&quot;: &quot;\u0026copy; \u003ca href=\&quot;https://www.openstreetmap.org/copyright\&quot;\u003eOpenStreetMap\u003c/a\u003e contributors&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 19, &quot;maxZoom&quot;: 19, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            );
        
    
            tile_layer_430dd1fca29021b2211c4131d6845c22.addTo(map_d846e8f34592b3966598f2be8c6c3d31);
        
    
        function geo_json_7df97884f88edd4062a68789f1ac4e10_styler(feature) {
            switch(feature.id) {
                case &quot;0&quot;: 
                    return {&quot;color&quot;: &quot;#c49c94&quot;, &quot;fillColor&quot;: &quot;#c49c94&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};
                case &quot;1&quot;: 
                    return {&quot;color&quot;: &quot;#9edae5&quot;, &quot;fillColor&quot;: &quot;#9edae5&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};
                case &quot;2&quot;: 
                    return {&quot;color&quot;: &quot;#9467bd&quot;, &quot;fillColor&quot;: &quot;#9467bd&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};
                case &quot;3&quot;: 
                    return {&quot;color&quot;: &quot;#dbdb8d&quot;, &quot;fillColor&quot;: &quot;#dbdb8d&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};
                case &quot;4&quot;: 
                    return {&quot;color&quot;: &quot;#d62728&quot;, &quot;fillColor&quot;: &quot;#d62728&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};
                case &quot;5&quot;: 
                    return {&quot;color&quot;: &quot;#2ca02c&quot;, &quot;fillColor&quot;: &quot;#2ca02c&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};
                case &quot;6&quot;: 
                    return {&quot;color&quot;: &quot;#ff7f0e&quot;, &quot;fillColor&quot;: &quot;#ff7f0e&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};
                case &quot;7&quot;: 
                    return {&quot;color&quot;: &quot;#c7c7c7&quot;, &quot;fillColor&quot;: &quot;#c7c7c7&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};
                case &quot;8&quot;: 
                    return {&quot;color&quot;: &quot;#1f77b4&quot;, &quot;fillColor&quot;: &quot;#1f77b4&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};
                default:
                    return {&quot;color&quot;: &quot;#f7b6d2&quot;, &quot;fillColor&quot;: &quot;#f7b6d2&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};
            }
        }
        function geo_json_7df97884f88edd4062a68789f1ac4e10_highlighter(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0.75};
            }
        }
        function geo_json_7df97884f88edd4062a68789f1ac4e10_pointToLayer(feature, latlng) {
            var opts = {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;opacity&quot;: 1.0, &quot;radius&quot;: 2, &quot;stroke&quot;: true, &quot;weight&quot;: 3};
            
            let style = geo_json_7df97884f88edd4062a68789f1ac4e10_styler(feature)
            Object.assign(opts, style)
            
            return new L.CircleMarker(latlng, opts)
        }

        function geo_json_7df97884f88edd4062a68789f1ac4e10_onEachFeature(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                            geo_json_7df97884f88edd4062a68789f1ac4e10.resetStyle(e.target);
                    }
                },
                mouseover: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        const highlightStyle = geo_json_7df97884f88edd4062a68789f1ac4e10_highlighter(e.target.feature)
                        e.target.setStyle(highlightStyle);
                    }
                },
            });
        };
        var geo_json_7df97884f88edd4062a68789f1ac4e10 = L.geoJson(null, {
                onEachFeature: geo_json_7df97884f88edd4062a68789f1ac4e10_onEachFeature,
            
                style: geo_json_7df97884f88edd4062a68789f1ac4e10_styler,
                pointToLayer: geo_json_7df97884f88edd4062a68789f1ac4e10_pointToLayer,
        });

        function geo_json_7df97884f88edd4062a68789f1ac4e10_add (data) {
            geo_json_7df97884f88edd4062a68789f1ac4e10
                .addData(data);
        }
            geo_json_7df97884f88edd4062a68789f1ac4e10_add({&quot;bbox&quot;: [-1.56387937487654, 51.32452335478603, 0.077757925309447, 52.34135509726958], &quot;features&quot;: [{&quot;bbox&quot;: [-1.5638733, 51.32452335478603, 0.077757925309447, 52.34135509726958], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-1.5321045, 52.34135509726958], [0.077757925309447, 52.31036691499413], [0.011254122594852, 51.32452335478603], [-1.5638733, 51.354439390266904], [-1.5321045, 52.34135509726958]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;properties&quot;: {&quot;Datatake Type&quot;: &quot;INS-NOBS&quot;, &quot;EPSG&quot;: &quot;27700&quot;, &quot;Ground Tracking Direction&quot;: &quot;descending&quot;, &quot;Instrument Family Name&quot;: &quot;Multi-Spectral Instrument&quot;, &quot;Instrument Family Name Abbreviation&quot;: &quot;MSI&quot;, &quot;Instrument Mode&quot;: null, &quot;NSSDC Identifier&quot;: &quot;2015-000A&quot;, &quot;Platform Number&quot;: &quot;2A&quot;, &quot;Product Type&quot;: &quot;S2MSI1C&quot;, &quot;Start Orbit Number&quot;: &quot;040031&quot;, &quot;Start Relative Orbit Number&quot;: &quot;137&quot;, &quot;__folium_color&quot;: &quot;#c49c94&quot;, &quot;created&quot;: &quot;2024-02-07T11:34:51.269363Z&quot;, &quot;datetime&quot;: &quot;2023-02-20T11:11:01Z&quot;, &quot;end_datetime&quot;: &quot;2023-02-20T11:11:01Z&quot;, &quot;eo:cloud_cover&quot;: &quot;26.2055898951895&quot;, &quot;esa_file_name&quot;: &quot;S2A_MSIL1C_20230220T111101_N0509_R137_T30UXC_20230220T131022&quot;, &quot;file_count&quot;: 7, &quot;instance_id&quot;: &quot;neodc.sentinel_ard.data.sentinel_2.2023.02.20.S2A_20230220_lat52lon075_T30UXC_ORB137_utm30n_osgb&quot;, &quot;size&quot;: 2086211720, &quot;start_datetime&quot;: &quot;2023-02-20T11:11:01Z&quot;, &quot;updated&quot;: &quot;2024-02-07T11:34:51.269363Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-1.56387937487654, 51.32452335478603, 0.077757925309447, 52.34135509726958], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-1.532115847042169, 52.34135509726958], [0.077757925309447, 52.31036691499413], [0.011254122594852, 51.32452335478603], [-1.56387937487654, 51.354439390266904], [-1.532115847042169, 52.34135509726958]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;1&quot;, &quot;properties&quot;: {&quot;Datatake Type&quot;: &quot;INS-NOBS&quot;, &quot;EPSG&quot;: &quot;27700&quot;, &quot;Ground Tracking Direction&quot;: &quot;descending&quot;, &quot;Instrument Family Name&quot;: &quot;Multi-Spectral Instrument&quot;, &quot;Instrument Family Name Abbreviation&quot;: &quot;MSI&quot;, &quot;Instrument Mode&quot;: null, &quot;NSSDC Identifier&quot;: &quot;2015-000A&quot;, &quot;Platform Number&quot;: &quot;2B&quot;, &quot;Product Type&quot;: &quot;S2MSI1C&quot;, &quot;Start Orbit Number&quot;: &quot;031051&quot;, &quot;Start Relative Orbit Number&quot;: &quot;137&quot;, &quot;__folium_color&quot;: &quot;#9edae5&quot;, &quot;created&quot;: &quot;2024-02-07T11:34:02.929266Z&quot;, &quot;datetime&quot;: &quot;2023-02-15T11:10:49Z&quot;, &quot;end_datetime&quot;: &quot;2023-02-15T11:10:49Z&quot;, &quot;eo:cloud_cover&quot;: &quot;16.4992385559437&quot;, &quot;esa_file_name&quot;: &quot;S2B_MSIL1C_20230215T111049_N0509_R137_T30UXC_20230215T115158&quot;, &quot;file_count&quot;: 7, &quot;instance_id&quot;: &quot;neodc.sentinel_ard.data.sentinel_2.2023.02.15.S2B_20230215_lat52lon075_T30UXC_ORB137_utm30n_osgb&quot;, &quot;size&quot;: 1929442711, &quot;start_datetime&quot;: &quot;2023-02-15T11:10:49Z&quot;, &quot;updated&quot;: &quot;2024-02-07T11:34:02.929266Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-1.5638733, 51.34789489182094, -0.7050781, 52.34135509726958], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-0.7050781, 52.325435389878784], [-0.7661438, 52.211611868303216], [-0.842865, 52.067792845818815], [-0.91934204, 51.923991765296606], [-0.9951782, 51.780113105919135], [-1.0703125, 51.63615138026487], [-1.1451111, 51.49218315492645], [-1.2191772, 51.348151164636974], [-1.2192993, 51.34789489182094], [-1.5638733, 51.354439390266904], [-1.5321045, 52.34135509726958], [-0.7050781, 52.325435389878784]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;2&quot;, &quot;properties&quot;: {&quot;Datatake Type&quot;: &quot;INS-NOBS&quot;, &quot;EPSG&quot;: &quot;27700&quot;, &quot;Ground Tracking Direction&quot;: &quot;descending&quot;, &quot;Instrument Family Name&quot;: &quot;Multi-Spectral Instrument&quot;, &quot;Instrument Family Name Abbreviation&quot;: &quot;MSI&quot;, &quot;Instrument Mode&quot;: null, &quot;NSSDC Identifier&quot;: &quot;2015-000A&quot;, &quot;Platform Number&quot;: &quot;2A&quot;, &quot;Product Type&quot;: &quot;S2MSI1C&quot;, &quot;Start Orbit Number&quot;: &quot;039931&quot;, &quot;Start Relative Orbit Number&quot;: &quot;037&quot;, &quot;__folium_color&quot;: &quot;#9467bd&quot;, &quot;created&quot;: &quot;2024-02-07T11:33:08.880283Z&quot;, &quot;datetime&quot;: &quot;2023-02-13T11:21:51Z&quot;, &quot;end_datetime&quot;: &quot;2023-02-13T11:21:51Z&quot;, &quot;eo:cloud_cover&quot;: &quot;17.8722773237211&quot;, &quot;esa_file_name&quot;: &quot;S2A_MSIL1C_20230213T112151_N0509_R037_T30UXC_20230213T132023&quot;, &quot;file_count&quot;: 7, &quot;instance_id&quot;: &quot;neodc.sentinel_ard.data.sentinel_2.2023.02.13.S2A_20230213_lat52lon075_T30UXC_ORB037_utm30n_osgb&quot;, &quot;size&quot;: 772070237, &quot;start_datetime&quot;: &quot;2023-02-13T11:21:51Z&quot;, &quot;updated&quot;: &quot;2024-02-07T11:33:08.880283Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-1.5638733, 51.347829789819436, -0.70578, 52.34135509726958], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-0.70578, 52.32544905546458], [-0.7384033, 52.26435597865629], [-0.75302124, 52.23704676100797], [-0.82928467, 52.09348332632704], [-0.8395996, 52.07399517279481], [-0.9048157, 51.95087890030656], [-0.98013306, 51.80702309261301], [-1.0085144, 51.75202531252376], [-1.0551453, 51.66201543861483], [-1.1289062, 51.51783167766905], [-1.2026978, 51.37368790609837], [-1.2158813, 51.347829789819436], [-1.5638733, 51.354439390266904], [-1.5321045, 52.34135509726958], [-0.70578, 52.32544905546458]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;3&quot;, &quot;properties&quot;: {&quot;Datatake Type&quot;: &quot;INS-NOBS&quot;, &quot;EPSG&quot;: &quot;27700&quot;, &quot;Ground Tracking Direction&quot;: &quot;descending&quot;, &quot;Instrument Family Name&quot;: &quot;Multi-Spectral Instrument&quot;, &quot;Instrument Family Name Abbreviation&quot;: &quot;MSI&quot;, &quot;Instrument Mode&quot;: null, &quot;NSSDC Identifier&quot;: &quot;2015-000A&quot;, &quot;Platform Number&quot;: &quot;2B&quot;, &quot;Product Type&quot;: &quot;S2MSI1C&quot;, &quot;Start Orbit Number&quot;: &quot;030951&quot;, &quot;Start Relative Orbit Number&quot;: &quot;037&quot;, &quot;__folium_color&quot;: &quot;#dbdb8d&quot;, &quot;created&quot;: &quot;2024-02-07T11:32:30.627352Z&quot;, &quot;datetime&quot;: &quot;2023-02-08T11:21:29Z&quot;, &quot;end_datetime&quot;: &quot;2023-02-08T11:21:29Z&quot;, &quot;eo:cloud_cover&quot;: &quot;23.1145739686345&quot;, &quot;esa_file_name&quot;: &quot;S2B_MSIL1C_20230208T112129_N0509_R037_T30UXC_20230208T120439&quot;, &quot;file_count&quot;: 7, &quot;instance_id&quot;: &quot;neodc.sentinel_ard.data.sentinel_2.2023.02.08.S2B_20230208_lat52lon075_T30UXC_ORB037_utm30n_osgb&quot;, &quot;size&quot;: 724262401, &quot;start_datetime&quot;: &quot;2023-02-08T11:21:29Z&quot;, &quot;updated&quot;: &quot;2024-02-07T11:32:30.627352Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-1.5638733, 51.32452335478603, 0.077757925309447, 52.34135509726958], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-1.5321045, 52.34135509726958], [0.077757925309447, 52.31036691499413], [0.011254122594852, 51.32452335478603], [-1.5638733, 51.354439390266904], [-1.5321045, 52.34135509726958]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;4&quot;, &quot;properties&quot;: {&quot;Datatake Type&quot;: &quot;INS-NOBS&quot;, &quot;EPSG&quot;: &quot;27700&quot;, &quot;Ground Tracking Direction&quot;: &quot;descending&quot;, &quot;Instrument Family Name&quot;: &quot;Multi-Spectral Instrument&quot;, &quot;Instrument Family Name Abbreviation&quot;: &quot;MSI&quot;, &quot;Instrument Mode&quot;: null, &quot;NSSDC Identifier&quot;: &quot;2015-000A&quot;, &quot;Platform Number&quot;: &quot;2A&quot;, &quot;Product Type&quot;: &quot;S2MSI1C&quot;, &quot;Start Orbit Number&quot;: &quot;039745&quot;, &quot;Start Relative Orbit Number&quot;: &quot;137&quot;, &quot;__folium_color&quot;: &quot;#d62728&quot;, &quot;created&quot;: &quot;2024-02-07T11:30:23.569062Z&quot;, &quot;datetime&quot;: &quot;2023-01-31T11:13:11Z&quot;, &quot;end_datetime&quot;: &quot;2023-01-31T11:13:11Z&quot;, &quot;eo:cloud_cover&quot;: &quot;34.8413807518887&quot;, &quot;esa_file_name&quot;: &quot;S2A_MSIL1C_20230131T111311_N0509_R137_T30UXC_20230131T131631&quot;, &quot;file_count&quot;: 7, &quot;instance_id&quot;: &quot;neodc.sentinel_ard.data.sentinel_2.2023.01.31.S2A_20230131_lat52lon075_T30UXC_ORB137_utm30n_osgb&quot;, &quot;size&quot;: 2055184376, &quot;start_datetime&quot;: &quot;2023-01-31T11:13:11Z&quot;, &quot;updated&quot;: &quot;2024-02-07T11:30:23.569062Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-1.5638733, 51.34777055219298, -0.69873047, 52.34135509726958], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-0.69873047, 52.325313634474085], [-0.7260132, 52.27449119356601], [-0.80288696, 52.13072296280992], [-0.8791199, 51.98694161004709], [-0.95462036, 51.84309681960093], [-1.0298157, 51.699199699825485], [-1.1048279, 51.55525655892792], [-1.1798401, 51.411285614750845], [-1.212738, 51.34777055219298], [-1.5638733, 51.354439390266904], [-1.5321045, 52.34135509726958], [-0.69873047, 52.325313634474085]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;5&quot;, &quot;properties&quot;: {&quot;Datatake Type&quot;: &quot;INS-NOBS&quot;, &quot;EPSG&quot;: &quot;27700&quot;, &quot;Ground Tracking Direction&quot;: &quot;descending&quot;, &quot;Instrument Family Name&quot;: &quot;Multi-Spectral Instrument&quot;, &quot;Instrument Family Name Abbreviation&quot;: &quot;MSI&quot;, &quot;Instrument Mode&quot;: null, &quot;NSSDC Identifier&quot;: &quot;2015-000A&quot;, &quot;Platform Number&quot;: &quot;2A&quot;, &quot;Product Type&quot;: &quot;S2MSI1C&quot;, &quot;Start Orbit Number&quot;: &quot;039645&quot;, &quot;Start Relative Orbit Number&quot;: &quot;037&quot;, &quot;__folium_color&quot;: &quot;#2ca02c&quot;, &quot;created&quot;: &quot;2024-02-07T11:27:48.389662Z&quot;, &quot;datetime&quot;: &quot;2023-01-24T11:23:41Z&quot;, &quot;end_datetime&quot;: &quot;2023-01-24T11:23:41Z&quot;, &quot;eo:cloud_cover&quot;: &quot;0.0&quot;, &quot;esa_file_name&quot;: &quot;S2A_MSIL1C_20230124T112341_N0509_R037_T30UXC_20230124T145925&quot;, &quot;file_count&quot;: 7, &quot;instance_id&quot;: &quot;neodc.sentinel_ard.data.sentinel_2.2023.01.24.S2A_20230124_lat52lon075_T30UXC_ORB037_utm30n_osgb&quot;, &quot;size&quot;: 732655327, &quot;start_datetime&quot;: &quot;2023-01-24T11:23:41Z&quot;, &quot;updated&quot;: &quot;2024-02-07T11:27:48.389662Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-1.5638733, 51.32452335478603, 0.077757925309447, 52.34135509726958], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-1.5321045, 52.34135509726958], [0.077757925309447, 52.31036691499413], [0.011254122594852, 51.32452335478603], [-1.5638733, 51.354439390266904], [-1.5321045, 52.34135509726958]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;6&quot;, &quot;properties&quot;: {&quot;Datatake Type&quot;: &quot;INS-NOBS&quot;, &quot;EPSG&quot;: &quot;27700&quot;, &quot;Ground Tracking Direction&quot;: &quot;descending&quot;, &quot;Instrument Family Name&quot;: &quot;Multi-Spectral Instrument&quot;, &quot;Instrument Family Name Abbreviation&quot;: &quot;MSI&quot;, &quot;Instrument Mode&quot;: null, &quot;NSSDC Identifier&quot;: &quot;2015-000A&quot;, &quot;Platform Number&quot;: &quot;2A&quot;, &quot;Product Type&quot;: &quot;S2MSI1C&quot;, &quot;Start Orbit Number&quot;: &quot;039602&quot;, &quot;Start Relative Orbit Number&quot;: &quot;137&quot;, &quot;__folium_color&quot;: &quot;#ff7f0e&quot;, &quot;created&quot;: &quot;2024-02-07T11:27:11.987399Z&quot;, &quot;datetime&quot;: &quot;2023-01-21T11:13:51Z&quot;, &quot;end_datetime&quot;: &quot;2023-01-21T11:13:51Z&quot;, &quot;eo:cloud_cover&quot;: &quot;1.29663471587686&quot;, &quot;esa_file_name&quot;: &quot;S2A_MSIL1C_20230121T111351_N0509_R137_T30UXC_20230121T131033&quot;, &quot;file_count&quot;: 7, &quot;instance_id&quot;: &quot;neodc.sentinel_ard.data.sentinel_2.2023.01.21.S2A_20230121_lat52lon075_T30UXC_ORB137_utm30n_osgb&quot;, &quot;size&quot;: 1967947450, &quot;start_datetime&quot;: &quot;2023-01-21T11:13:51Z&quot;, &quot;updated&quot;: &quot;2024-02-07T11:27:11.987399Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-1.5638733, 51.34757915661093, -0.69384766, 52.34135509726958], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-0.69384766, 52.325219445349816], [-0.74160767, 52.23628737793528], [-0.7602844, 52.20163780960253], [-0.8363037, 52.05796866228289], [-0.846405, 52.03870929777885], [-0.9112549, 51.91538984391799], [-0.93652344, 51.866692722608605], [-0.9866028, 51.77056971366056], [-1.0606384, 51.62666272252397], [-1.1339417, 51.48257839209612], [-1.2026672, 51.34757915661093], [-1.5638733, 51.354439390266904], [-1.5321045, 52.34135509726958], [-0.69384766, 52.325219445349816]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;7&quot;, &quot;properties&quot;: {&quot;Datatake Type&quot;: &quot;INS-NOBS&quot;, &quot;EPSG&quot;: &quot;27700&quot;, &quot;Ground Tracking Direction&quot;: &quot;descending&quot;, &quot;Instrument Family Name&quot;: &quot;Multi-Spectral Instrument&quot;, &quot;Instrument Family Name Abbreviation&quot;: &quot;MSI&quot;, &quot;Instrument Mode&quot;: null, &quot;NSSDC Identifier&quot;: &quot;2015-000A&quot;, &quot;Platform Number&quot;: &quot;2B&quot;, &quot;Product Type&quot;: &quot;S2MSI1C&quot;, &quot;Start Orbit Number&quot;: &quot;030665&quot;, &quot;Start Relative Orbit Number&quot;: &quot;037&quot;, &quot;__folium_color&quot;: &quot;#c7c7c7&quot;, &quot;created&quot;: &quot;2024-02-07T11:26:07.156950Z&quot;, &quot;datetime&quot;: &quot;2023-01-19T11:23:09Z&quot;, &quot;end_datetime&quot;: &quot;2023-01-19T11:23:09Z&quot;, &quot;eo:cloud_cover&quot;: &quot;15.337439053626397&quot;, &quot;esa_file_name&quot;: &quot;S2B_MSIL1C_20230119T112309_N0509_R037_T30UXC_20230119T120151&quot;, &quot;file_count&quot;: 7, &quot;instance_id&quot;: &quot;neodc.sentinel_ard.data.sentinel_2.2023.01.19.S2B_20230119_lat52lon075_T30UXC_ORB037_utm30n_osgb&quot;, &quot;size&quot;: 737036184, &quot;start_datetime&quot;: &quot;2023-01-19T11:23:09Z&quot;, &quot;updated&quot;: &quot;2024-02-07T11:26:07.156950Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-1.5638733, 51.32452335478603, 0.077757925309447, 52.34135509726958], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-1.5321045, 52.34135509726958], [0.077757925309447, 52.31036691499413], [0.011254122594852, 51.32452335478603], [-1.5638733, 51.354439390266904], [-1.5321045, 52.34135509726958]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;8&quot;, &quot;properties&quot;: {&quot;Datatake Type&quot;: &quot;INS-NOBS&quot;, &quot;EPSG&quot;: &quot;27700&quot;, &quot;Ground Tracking Direction&quot;: &quot;descending&quot;, &quot;Instrument Family Name&quot;: &quot;Multi-Spectral Instrument&quot;, &quot;Instrument Family Name Abbreviation&quot;: &quot;MSI&quot;, &quot;Instrument Mode&quot;: null, &quot;NSSDC Identifier&quot;: &quot;2015-000A&quot;, &quot;Platform Number&quot;: &quot;2A&quot;, &quot;Product Type&quot;: &quot;S2MSI1C&quot;, &quot;Start Orbit Number&quot;: &quot;039459&quot;, &quot;Start Relative Orbit Number&quot;: &quot;137&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;, &quot;created&quot;: &quot;2024-02-07T11:22:35.819982Z&quot;, &quot;datetime&quot;: &quot;2023-01-11T11:14:31Z&quot;, &quot;end_datetime&quot;: &quot;2023-01-11T11:14:31Z&quot;, &quot;eo:cloud_cover&quot;: &quot;21.674519991639002&quot;, &quot;esa_file_name&quot;: &quot;S2A_MSIL1C_20230111T111431_N0509_R137_T30UXC_20230111T131027&quot;, &quot;file_count&quot;: 7, &quot;instance_id&quot;: &quot;neodc.sentinel_ard.data.sentinel_2.2023.01.11.S2A_20230111_lat52lon075_T30UXC_ORB137_utm30n_osgb&quot;, &quot;size&quot;: 2026002125, &quot;start_datetime&quot;: &quot;2023-01-11T11:14:31Z&quot;, &quot;updated&quot;: &quot;2024-02-07T11:22:35.819982Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-1.5638733, 51.347533480076315, -0.6916504, 52.34135509726958], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-0.6916504, 52.325177321673394], [-0.7366333, 52.24169370030222], [-0.80545044, 52.11219538232726], [-0.81359863, 52.096994991094], [-0.8895569, 51.95339516947211], [-0.9645691, 51.80968871100723], [-1.0384521, 51.66576065306341], [-1.1116943, 51.521701799257855], [-1.184967, 51.37761728673016], [-1.2002563, 51.347533480076315], [-1.5638733, 51.354439390266904], [-1.5321045, 52.34135509726958], [-0.6916504, 52.325177321673394]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;9&quot;, &quot;properties&quot;: {&quot;Datatake Type&quot;: &quot;INS-NOBS&quot;, &quot;EPSG&quot;: &quot;27700&quot;, &quot;Ground Tracking Direction&quot;: &quot;descending&quot;, &quot;Instrument Family Name&quot;: &quot;Multi-Spectral Instrument&quot;, &quot;Instrument Family Name Abbreviation&quot;: &quot;MSI&quot;, &quot;Instrument Mode&quot;: null, &quot;NSSDC Identifier&quot;: &quot;2015-000A&quot;, &quot;Platform Number&quot;: &quot;2B&quot;, &quot;Product Type&quot;: &quot;S2MSI1C&quot;, &quot;Start Orbit Number&quot;: &quot;030522&quot;, &quot;Start Relative Orbit Number&quot;: &quot;037&quot;, &quot;__folium_color&quot;: &quot;#f7b6d2&quot;, &quot;created&quot;: &quot;2024-02-07T11:22:03.800082Z&quot;, &quot;datetime&quot;: &quot;2023-01-09T11:23:39Z&quot;, &quot;end_datetime&quot;: &quot;2023-01-09T11:23:39Z&quot;, &quot;eo:cloud_cover&quot;: &quot;28.8320193824404&quot;, &quot;esa_file_name&quot;: &quot;S2B_MSIL1C_20230109T112339_N0509_R037_T30UXC_20230109T120132&quot;, &quot;file_count&quot;: 7, &quot;instance_id&quot;: &quot;neodc.sentinel_ard.data.sentinel_2.2023.01.09.S2B_20230109_lat52lon075_T30UXC_ORB037_utm30n_osgb&quot;, &quot;size&quot;: 756550726, &quot;start_datetime&quot;: &quot;2023-01-09T11:23:39Z&quot;, &quot;updated&quot;: &quot;2024-02-07T11:22:03.800082Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
    geo_json_7df97884f88edd4062a68789f1ac4e10.bindTooltip(
    function(layer){
    let div = L.DomUtil.create('div');
    
    let handleObject = feature=>typeof(feature)=='object' ? JSON.stringify(feature) : feature;
    let fields = [&quot;esa_file_name&quot;];
    let aliases = [&quot;esa_file_name&quot;];
    let table = '<table>' +
        String(
        fields.map(
        (v,i)=>
        `<tr>
            <th>${aliases[i]}</th>
            
            <td>${handleObject(layer.feature.properties[v])}</td>
        </tr>`).join(''))
    +'</table>';
    div.innerHTML=table;
    
    return div
    }
    ,{&quot;className&quot;: &quot;foliumtooltip&quot;, &quot;sticky&quot;: true});
                     
    
            geo_json_7df97884f88edd4062a68789f1ac4e10.addTo(map_d846e8f34592b3966598f2be8c6c3d31);
        
</script>
</html>" width="600" height="400" style="border:none !important;" "allowfullscreen"="" "webkitallowfullscreen"="" "mozallowfullscreen"=""></iframe>
</div>
</div>
<div id="62d75baf-45ad-4a24-a7ed-329917e13041" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># CONSTRUCT DASK DATASET</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: there are 9 STAC Items on input, and only one timeslice on output. </span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Due to groupby="solar_day" (all items that occured on the same day added to one image plane).</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Since we will plot it on a map we need to use `EPSG:3857` projection</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>crs <span class="op">=</span> <span class="st">"epsg:3857"</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>zoom <span class="op">=</span> <span class="dv">2</span><span class="op">**</span><span class="dv">5</span>  <span class="co"># overview level 5</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a><span class="co">#xx = stac_load(</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a><span class="co">#    items,</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a><span class="co">#    bands=("B04", "B03", "B02"),</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a><span class="co">#    crs=crs,</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a><span class="co">#    resolution=10 * zoom)#,</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a><span class="co">#    chunks={},  # &lt;-- use Dask</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a><span class="co">#    groupby="solar_day",</span></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a><span class="co">#)</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a><span class="co">#display(xx)</span></span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a><span class="co">#xx = stac_load(</span></span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a><span class="co">#    items,</span></span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a><span class="co">#    chunks={"x": 2048, "y": 2048},</span></span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a><span class="co">#    patch_url=pc.sign,</span></span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a><span class="co">#    resolution=resolution,</span></span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a><span class="co">#    # force dtype and nodata</span></span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"></a><span class="co">#    dtype="uint16",</span></span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"></a><span class="co">#    nodata=0,</span></span>
<span id="cb38-28"><a href="#cb38-28" aria-hidden="true" tabindex="-1"></a><span class="co">#)</span></span>
<span id="cb38-29"><a href="#cb38-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-30"><a href="#cb38-30" aria-hidden="true" tabindex="-1"></a>xx <span class="op">=</span> stac_load(</span>
<span id="cb38-31"><a href="#cb38-31" aria-hidden="true" tabindex="-1"></a>    items,</span>
<span id="cb38-32"><a href="#cb38-32" aria-hidden="true" tabindex="-1"></a>    crs<span class="op">=</span>crs,</span>
<span id="cb38-33"><a href="#cb38-33" aria-hidden="true" tabindex="-1"></a>    resolution<span class="op">=</span><span class="dv">10</span> <span class="op">*</span> zoom,</span>
<span id="cb38-34"><a href="#cb38-34" aria-hidden="true" tabindex="-1"></a>    chunks<span class="op">=</span>{<span class="st">"x"</span>: <span class="dv">2048</span>, <span class="st">"y"</span>: <span class="dv">2048</span>},  <span class="co"># &lt;-- use Dask</span></span>
<span id="cb38-35"><a href="#cb38-35" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb38-36"><a href="#cb38-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-37"><a href="#cb38-37" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Bands: </span><span class="sc">{</span><span class="st">','</span><span class="sc">.</span>join(<span class="bu">list</span>(xx.data_vars))<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-38"><a href="#cb38-38" aria-hidden="true" tabindex="-1"></a>display(xx)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Bands: cloud,thumbnail,topographic_shadow,cog,valid_pixels,saturated_pixels</code></pre>
</div>
<div class="cell-output cell-output-display">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
html[data-theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 79MB
Dimensions:             (y: 574, x: 573, time: 10)
Coordinates:
  * y                   (y) float64 5kB 6.862e+06 6.862e+06 ... 6.679e+06
  * x                   (x) float64 5kB -1.742e+05 -1.739e+05 ... 8.8e+03
    spatial_ref         int32 4B 3857
  * time                (time) datetime64[ns] 80B 2023-01-09T11:23:39 ... 202...
Data variables:
    cloud               (time, y, x) float32 13MB dask.array&lt;chunksize=(1, 574, 573), meta=np.ndarray&gt;
    thumbnail           (time, y, x) float32 13MB dask.array&lt;chunksize=(1, 574, 573), meta=np.ndarray&gt;
    topographic_shadow  (time, y, x) float32 13MB dask.array&lt;chunksize=(1, 574, 573), meta=np.ndarray&gt;
    cog                 (time, y, x) float32 13MB dask.array&lt;chunksize=(1, 574, 573), meta=np.ndarray&gt;
    valid_pixels        (time, y, x) float32 13MB dask.array&lt;chunksize=(1, 574, 573), meta=np.ndarray&gt;
    saturated_pixels    (time, y, x) float32 13MB dask.array&lt;chunksize=(1, 574, 573), meta=np.ndarray&gt;</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-d57edeb9-1026-49da-b8d9-cd340674dd5d" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-d57edeb9-1026-49da-b8d9-cd340674dd5d" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">y</span>: 574</li><li><span class="xr-has-index">x</span>: 573</li><li><span class="xr-has-index">time</span>: 10</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-f8dfdf10-4b9a-4d0d-9da9-37de0abae94c" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-f8dfdf10-4b9a-4d0d-9da9-37de0abae94c" class="xr-section-summary">Coordinates: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">y</span></div><div class="xr-var-dims">(y)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">6.862e+06 6.862e+06 ... 6.679e+06</div><input id="attrs-0f8d8703-2439-4786-8dbb-7a1a1eeb949c" class="xr-var-attrs-in" type="checkbox"><label for="attrs-0f8d8703-2439-4786-8dbb-7a1a1eeb949c" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-72b61b5d-743e-4740-b8e4-e1fe6a58d03b" class="xr-var-data-in" type="checkbox"><label for="data-72b61b5d-743e-4740-b8e4-e1fe6a58d03b" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>metre</dd><dt><span>resolution :</span></dt><dd>-320.0</dd><dt><span>crs :</span></dt><dd>EPSG:3857</dd></dl></div><div class="xr-var-data"><pre>array([6862240., 6861920., 6861600., ..., 6679520., 6679200., 6678880.])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">x</span></div><div class="xr-var-dims">(x)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-1.742e+05 -1.739e+05 ... 8.8e+03</div><input id="attrs-1a7d2c2b-fddc-4924-95e8-530efac013c7" class="xr-var-attrs-in" type="checkbox"><label for="attrs-1a7d2c2b-fddc-4924-95e8-530efac013c7" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-a45da276-f03f-4679-ae90-67b67ecddfce" class="xr-var-data-in" type="checkbox"><label for="data-a45da276-f03f-4679-ae90-67b67ecddfce" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>metre</dd><dt><span>resolution :</span></dt><dd>320.0</dd><dt><span>crs :</span></dt><dd>EPSG:3857</dd></dl></div><div class="xr-var-data"><pre>array([-174240., -173920., -173600., ...,    8160.,    8480.,    8800.])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>spatial_ref</span></div><div class="xr-var-dims">()</div><div class="xr-var-dtype">int32</div><div class="xr-var-preview xr-preview">3857</div><input id="attrs-98c86a1e-ca21-4192-a35b-29c0780d0922" class="xr-var-attrs-in" type="checkbox"><label for="attrs-98c86a1e-ca21-4192-a35b-29c0780d0922" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-78a7a9b9-7b9f-4431-9ac1-75e18448638c" class="xr-var-data-in" type="checkbox"><label for="data-78a7a9b9-7b9f-4431-9ac1-75e18448638c" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>spatial_ref :</span></dt><dd>PROJCRS["WGS 84 / Pseudo-Mercator",BASEGEOGCRS["WGS 84",ENSEMBLE["World Geodetic System 1984 ensemble",MEMBER["World Geodetic System 1984 (Transit)"],MEMBER["World Geodetic System 1984 (G730)"],MEMBER["World Geodetic System 1984 (G873)"],MEMBER["World Geodetic System 1984 (G1150)"],MEMBER["World Geodetic System 1984 (G1674)"],MEMBER["World Geodetic System 1984 (G1762)"],MEMBER["World Geodetic System 1984 (G2139)"],MEMBER["World Geodetic System 1984 (G2296)"],ELLIPSOID["WGS 84",6378137,298.257223563,LENGTHUNIT["metre",1]],ENSEMBLEACCURACY[2.0]],PRIMEM["Greenwich",0,ANGLEUNIT["degree",0.0174532925199433]],ID["EPSG",4326]],CONVERSION["Popular Visualisation Pseudo-Mercator",METHOD["Popular Visualisation Pseudo Mercator",ID["EPSG",1024]],PARAMETER["Latitude of natural origin",0,ANGLEUNIT["degree",0.0174532925199433],ID["EPSG",8801]],PARAMETER["Longitude of natural origin",0,ANGLEUNIT["degree",0.0174532925199433],ID["EPSG",8802]],PARAMETER["False easting",0,LENGTHUNIT["metre",1],ID["EPSG",8806]],PARAMETER["False northing",0,LENGTHUNIT["metre",1],ID["EPSG",8807]]],CS[Cartesian,2],AXIS["easting (X)",east,ORDER[1],LENGTHUNIT["metre",1]],AXIS["northing (Y)",north,ORDER[2],LENGTHUNIT["metre",1]],USAGE[SCOPE["Web mapping and visualisation."],AREA["World between 85.06°S and 85.06°N."],BBOX[-85.06,-180,85.06,180]],ID["EPSG",3857]]</dd><dt><span>crs_wkt :</span></dt><dd>PROJCRS["WGS 84 / Pseudo-Mercator",BASEGEOGCRS["WGS 84",ENSEMBLE["World Geodetic System 1984 ensemble",MEMBER["World Geodetic System 1984 (Transit)"],MEMBER["World Geodetic System 1984 (G730)"],MEMBER["World Geodetic System 1984 (G873)"],MEMBER["World Geodetic System 1984 (G1150)"],MEMBER["World Geodetic System 1984 (G1674)"],MEMBER["World Geodetic System 1984 (G1762)"],MEMBER["World Geodetic System 1984 (G2139)"],MEMBER["World Geodetic System 1984 (G2296)"],ELLIPSOID["WGS 84",6378137,298.257223563,LENGTHUNIT["metre",1]],ENSEMBLEACCURACY[2.0]],PRIMEM["Greenwich",0,ANGLEUNIT["degree",0.0174532925199433]],ID["EPSG",4326]],CONVERSION["Popular Visualisation Pseudo-Mercator",METHOD["Popular Visualisation Pseudo Mercator",ID["EPSG",1024]],PARAMETER["Latitude of natural origin",0,ANGLEUNIT["degree",0.0174532925199433],ID["EPSG",8801]],PARAMETER["Longitude of natural origin",0,ANGLEUNIT["degree",0.0174532925199433],ID["EPSG",8802]],PARAMETER["False easting",0,LENGTHUNIT["metre",1],ID["EPSG",8806]],PARAMETER["False northing",0,LENGTHUNIT["metre",1],ID["EPSG",8807]]],CS[Cartesian,2],AXIS["easting (X)",east,ORDER[1],LENGTHUNIT["metre",1]],AXIS["northing (Y)",north,ORDER[2],LENGTHUNIT["metre",1]],USAGE[SCOPE["Web mapping and visualisation."],AREA["World between 85.06°S and 85.06°N."],BBOX[-85.06,-180,85.06,180]],ID["EPSG",3857]]</dd><dt><span>GeoTransform :</span></dt><dd>-174400 320 0 6862400 0 -320</dd></dl></div><div class="xr-var-data"><pre>array(3857, dtype=int32)</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">datetime64[ns]</div><div class="xr-var-preview xr-preview">2023-01-09T11:23:39 ... 2023-02-...</div><input id="attrs-e95feb6c-47af-4bf5-9cfe-ff9df3320aee" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-e95feb6c-47af-4bf5-9cfe-ff9df3320aee" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-d6831872-54eb-4e8d-a172-21e99ba94eaf" class="xr-var-data-in" type="checkbox"><label for="data-d6831872-54eb-4e8d-a172-21e99ba94eaf" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['2023-01-09T11:23:39.000000000', '2023-01-11T11:14:31.000000000',
       '2023-01-19T11:23:09.000000000', '2023-01-21T11:13:51.000000000',
       '2023-01-24T11:23:41.000000000', '2023-01-31T11:13:11.000000000',
       '2023-02-08T11:21:29.000000000', '2023-02-13T11:21:51.000000000',
       '2023-02-15T11:10:49.000000000', '2023-02-20T11:11:01.000000000'],
      dtype='datetime64[ns]')</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-0e57d21f-e7ba-4e09-b27a-79a01adb0bcc" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-0e57d21f-e7ba-4e09-b27a-79a01adb0bcc" class="xr-section-summary">Data variables: <span>(6)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>cloud</span></div><div class="xr-var-dims">(time, y, x)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">dask.array&lt;chunksize=(1, 574, 573), meta=np.ndarray&gt;</div><input id="attrs-ea68dac9-2f4e-490b-bda9-96aeba08a268" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-ea68dac9-2f4e-490b-bda9-96aeba08a268" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-e3eb5777-524b-470f-8f29-3ee128294aee" class="xr-var-data-in" type="checkbox"><label for="data-e3eb5777-524b-470f-8f29-3ee128294aee" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td><table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th></th>
<th data-quarto-table-cell-role="th">Array</th>
<th data-quarto-table-cell-role="th">Chunk</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Bytes</td>
<td>12.55 MiB</td>
<td>1.25 MiB</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Shape</td>
<td>(10, 574, 573)</td>
<td>(1, 574, 573)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Dask graph</td>
<td colspan="2">10 chunks in 3 graph layers</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Data type</td>
<td colspan="2">float32 numpy.ndarray</td>
</tr>
</tbody>
</table></td>
<td><svg width="196" height="186" style="stroke:rgb(0,0,0);stroke-width:1">
<!-- Horizontal lines --> <line x1="10" y1="0" x2="26" y2="16" style="stroke-width:2"></line> <line x1="10" y1="120" x2="26" y2="136" style="stroke-width:2"></line> <!-- Vertical lines --> <line x1="10" y1="0" x2="10" y2="120" style="stroke-width:2"></line> <line x1="11" y1="1" x2="11" y2="121"></line> <line x1="13" y1="3" x2="13" y2="123"></line> <line x1="14" y1="4" x2="14" y2="124"></line> <line x1="16" y1="6" x2="16" y2="126"></line> <line x1="18" y1="8" x2="18" y2="128"></line> <line x1="19" y1="9" x2="19" y2="129"></line> <line x1="21" y1="11" x2="21" y2="131"></line> <line x1="23" y1="13" x2="23" y2="133"></line> <line x1="24" y1="14" x2="24" y2="134"></line> <line x1="26" y1="16" x2="26" y2="136" style="stroke-width:2"></line> <!-- Colored Rectangle --> <polygon points="10.0,0.0 26.62607637203506,16.62607637203506 26.62607637203506,136.62607637203507 10.0,120.0" style="fill:#ECB172A0;stroke-width:0"></polygon> <!-- Horizontal lines --> <line x1="10" y1="0" x2="129" y2="0" style="stroke-width:2"></line> <line x1="11" y1="1" x2="131" y2="1"></line> <line x1="13" y1="3" x2="133" y2="3"></line> <line x1="14" y1="4" x2="134" y2="4"></line> <line x1="16" y1="6" x2="136" y2="6"></line> <line x1="18" y1="8" x2="138" y2="8"></line> <line x1="19" y1="9" x2="139" y2="9"></line> <line x1="21" y1="11" x2="141" y2="11"></line> <line x1="23" y1="13" x2="143" y2="13"></line> <line x1="24" y1="14" x2="144" y2="14"></line> <line x1="26" y1="16" x2="146" y2="16" style="stroke-width:2"></line> <!-- Vertical lines --> <line x1="10" y1="0" x2="26" y2="16" style="stroke-width:2"></line> <line x1="129" y1="0" x2="146" y2="16" style="stroke-width:2"></line> <!-- Colored Rectangle --> <polygon points="10.0,0.0 129.7909407665505,0.0 146.41701713858558,16.62607637203506 26.62607637203506,16.62607637203506" style="fill:#ECB172A0;stroke-width:0"></polygon> <!-- Horizontal lines --> <line x1="26" y1="16" x2="146" y2="16" style="stroke-width:2"></line> <line x1="26" y1="136" x2="146" y2="136" style="stroke-width:2"></line> <!-- Vertical lines --> <line x1="26" y1="16" x2="26" y2="136" style="stroke-width:2"></line> <line x1="146" y1="16" x2="146" y2="136" style="stroke-width:2"></line> <!-- Colored Rectangle --> <polygon points="26.62607637203506,16.62607637203506 146.41701713858558,16.62607637203506 146.41701713858558,136.62607637203507 26.62607637203506,136.62607637203507" style="fill:#ECB172A0;stroke-width:0"></polygon> <!-- Text --> <text x="86.521547" y="156.626076" font-size="1.0rem" font-weight="100" text-anchor="middle">573</text> <text x="166.417017" y="76.626076" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,166.417017,76.626076)">574</text> <text x="8.313038" y="148.313038" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,8.313038,148.313038)">10</text>
</svg></td>
</tr>
</tbody>
</table>
</div></li><li class="xr-var-item"><div class="xr-var-name"><span>thumbnail</span></div><div class="xr-var-dims">(time, y, x)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">dask.array&lt;chunksize=(1, 574, 573), meta=np.ndarray&gt;</div><input id="attrs-58c58ae1-01d8-4ca4-a11c-ad80d639391c" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-58c58ae1-01d8-4ca4-a11c-ad80d639391c" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-97b0a50f-654e-430d-b4b6-a200a80d681a" class="xr-var-data-in" type="checkbox"><label for="data-97b0a50f-654e-430d-b4b6-a200a80d681a" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td><table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th></th>
<th data-quarto-table-cell-role="th">Array</th>
<th data-quarto-table-cell-role="th">Chunk</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Bytes</td>
<td>12.55 MiB</td>
<td>1.25 MiB</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Shape</td>
<td>(10, 574, 573)</td>
<td>(1, 574, 573)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Dask graph</td>
<td colspan="2">10 chunks in 3 graph layers</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Data type</td>
<td colspan="2">float32 numpy.ndarray</td>
</tr>
</tbody>
</table></td>
<td><svg width="196" height="186" style="stroke:rgb(0,0,0);stroke-width:1">
<!-- Horizontal lines --> <line x1="10" y1="0" x2="26" y2="16" style="stroke-width:2"></line> <line x1="10" y1="120" x2="26" y2="136" style="stroke-width:2"></line> <!-- Vertical lines --> <line x1="10" y1="0" x2="10" y2="120" style="stroke-width:2"></line> <line x1="11" y1="1" x2="11" y2="121"></line> <line x1="13" y1="3" x2="13" y2="123"></line> <line x1="14" y1="4" x2="14" y2="124"></line> <line x1="16" y1="6" x2="16" y2="126"></line> <line x1="18" y1="8" x2="18" y2="128"></line> <line x1="19" y1="9" x2="19" y2="129"></line> <line x1="21" y1="11" x2="21" y2="131"></line> <line x1="23" y1="13" x2="23" y2="133"></line> <line x1="24" y1="14" x2="24" y2="134"></line> <line x1="26" y1="16" x2="26" y2="136" style="stroke-width:2"></line> <!-- Colored Rectangle --> <polygon points="10.0,0.0 26.62607637203506,16.62607637203506 26.62607637203506,136.62607637203507 10.0,120.0" style="fill:#ECB172A0;stroke-width:0"></polygon> <!-- Horizontal lines --> <line x1="10" y1="0" x2="129" y2="0" style="stroke-width:2"></line> <line x1="11" y1="1" x2="131" y2="1"></line> <line x1="13" y1="3" x2="133" y2="3"></line> <line x1="14" y1="4" x2="134" y2="4"></line> <line x1="16" y1="6" x2="136" y2="6"></line> <line x1="18" y1="8" x2="138" y2="8"></line> <line x1="19" y1="9" x2="139" y2="9"></line> <line x1="21" y1="11" x2="141" y2="11"></line> <line x1="23" y1="13" x2="143" y2="13"></line> <line x1="24" y1="14" x2="144" y2="14"></line> <line x1="26" y1="16" x2="146" y2="16" style="stroke-width:2"></line> <!-- Vertical lines --> <line x1="10" y1="0" x2="26" y2="16" style="stroke-width:2"></line> <line x1="129" y1="0" x2="146" y2="16" style="stroke-width:2"></line> <!-- Colored Rectangle --> <polygon points="10.0,0.0 129.7909407665505,0.0 146.41701713858558,16.62607637203506 26.62607637203506,16.62607637203506" style="fill:#ECB172A0;stroke-width:0"></polygon> <!-- Horizontal lines --> <line x1="26" y1="16" x2="146" y2="16" style="stroke-width:2"></line> <line x1="26" y1="136" x2="146" y2="136" style="stroke-width:2"></line> <!-- Vertical lines --> <line x1="26" y1="16" x2="26" y2="136" style="stroke-width:2"></line> <line x1="146" y1="16" x2="146" y2="136" style="stroke-width:2"></line> <!-- Colored Rectangle --> <polygon points="26.62607637203506,16.62607637203506 146.41701713858558,16.62607637203506 146.41701713858558,136.62607637203507 26.62607637203506,136.62607637203507" style="fill:#ECB172A0;stroke-width:0"></polygon> <!-- Text --> <text x="86.521547" y="156.626076" font-size="1.0rem" font-weight="100" text-anchor="middle">573</text> <text x="166.417017" y="76.626076" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,166.417017,76.626076)">574</text> <text x="8.313038" y="148.313038" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,8.313038,148.313038)">10</text>
</svg></td>
</tr>
</tbody>
</table>
</div></li><li class="xr-var-item"><div class="xr-var-name"><span>topographic_shadow</span></div><div class="xr-var-dims">(time, y, x)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">dask.array&lt;chunksize=(1, 574, 573), meta=np.ndarray&gt;</div><input id="attrs-6b95bbce-3860-4da9-a343-567739c79dc0" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-6b95bbce-3860-4da9-a343-567739c79dc0" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-388453dc-e07d-4c8a-8edf-45e7ecf1cf5c" class="xr-var-data-in" type="checkbox"><label for="data-388453dc-e07d-4c8a-8edf-45e7ecf1cf5c" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td><table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th></th>
<th data-quarto-table-cell-role="th">Array</th>
<th data-quarto-table-cell-role="th">Chunk</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Bytes</td>
<td>12.55 MiB</td>
<td>1.25 MiB</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Shape</td>
<td>(10, 574, 573)</td>
<td>(1, 574, 573)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Dask graph</td>
<td colspan="2">10 chunks in 3 graph layers</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Data type</td>
<td colspan="2">float32 numpy.ndarray</td>
</tr>
</tbody>
</table></td>
<td><svg width="196" height="186" style="stroke:rgb(0,0,0);stroke-width:1">
<!-- Horizontal lines --> <line x1="10" y1="0" x2="26" y2="16" style="stroke-width:2"></line> <line x1="10" y1="120" x2="26" y2="136" style="stroke-width:2"></line> <!-- Vertical lines --> <line x1="10" y1="0" x2="10" y2="120" style="stroke-width:2"></line> <line x1="11" y1="1" x2="11" y2="121"></line> <line x1="13" y1="3" x2="13" y2="123"></line> <line x1="14" y1="4" x2="14" y2="124"></line> <line x1="16" y1="6" x2="16" y2="126"></line> <line x1="18" y1="8" x2="18" y2="128"></line> <line x1="19" y1="9" x2="19" y2="129"></line> <line x1="21" y1="11" x2="21" y2="131"></line> <line x1="23" y1="13" x2="23" y2="133"></line> <line x1="24" y1="14" x2="24" y2="134"></line> <line x1="26" y1="16" x2="26" y2="136" style="stroke-width:2"></line> <!-- Colored Rectangle --> <polygon points="10.0,0.0 26.62607637203506,16.62607637203506 26.62607637203506,136.62607637203507 10.0,120.0" style="fill:#ECB172A0;stroke-width:0"></polygon> <!-- Horizontal lines --> <line x1="10" y1="0" x2="129" y2="0" style="stroke-width:2"></line> <line x1="11" y1="1" x2="131" y2="1"></line> <line x1="13" y1="3" x2="133" y2="3"></line> <line x1="14" y1="4" x2="134" y2="4"></line> <line x1="16" y1="6" x2="136" y2="6"></line> <line x1="18" y1="8" x2="138" y2="8"></line> <line x1="19" y1="9" x2="139" y2="9"></line> <line x1="21" y1="11" x2="141" y2="11"></line> <line x1="23" y1="13" x2="143" y2="13"></line> <line x1="24" y1="14" x2="144" y2="14"></line> <line x1="26" y1="16" x2="146" y2="16" style="stroke-width:2"></line> <!-- Vertical lines --> <line x1="10" y1="0" x2="26" y2="16" style="stroke-width:2"></line> <line x1="129" y1="0" x2="146" y2="16" style="stroke-width:2"></line> <!-- Colored Rectangle --> <polygon points="10.0,0.0 129.7909407665505,0.0 146.41701713858558,16.62607637203506 26.62607637203506,16.62607637203506" style="fill:#ECB172A0;stroke-width:0"></polygon> <!-- Horizontal lines --> <line x1="26" y1="16" x2="146" y2="16" style="stroke-width:2"></line> <line x1="26" y1="136" x2="146" y2="136" style="stroke-width:2"></line> <!-- Vertical lines --> <line x1="26" y1="16" x2="26" y2="136" style="stroke-width:2"></line> <line x1="146" y1="16" x2="146" y2="136" style="stroke-width:2"></line> <!-- Colored Rectangle --> <polygon points="26.62607637203506,16.62607637203506 146.41701713858558,16.62607637203506 146.41701713858558,136.62607637203507 26.62607637203506,136.62607637203507" style="fill:#ECB172A0;stroke-width:0"></polygon> <!-- Text --> <text x="86.521547" y="156.626076" font-size="1.0rem" font-weight="100" text-anchor="middle">573</text> <text x="166.417017" y="76.626076" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,166.417017,76.626076)">574</text> <text x="8.313038" y="148.313038" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,8.313038,148.313038)">10</text>
</svg></td>
</tr>
</tbody>
</table>
</div></li><li class="xr-var-item"><div class="xr-var-name"><span>cog</span></div><div class="xr-var-dims">(time, y, x)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">dask.array&lt;chunksize=(1, 574, 573), meta=np.ndarray&gt;</div><input id="attrs-2bfe5958-b7eb-41f9-8eb4-0151fdc01a9c" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-2bfe5958-b7eb-41f9-8eb4-0151fdc01a9c" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-1337c40f-377f-40b7-b827-b0138ef8100f" class="xr-var-data-in" type="checkbox"><label for="data-1337c40f-377f-40b7-b827-b0138ef8100f" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td><table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th></th>
<th data-quarto-table-cell-role="th">Array</th>
<th data-quarto-table-cell-role="th">Chunk</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Bytes</td>
<td>12.55 MiB</td>
<td>1.25 MiB</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Shape</td>
<td>(10, 574, 573)</td>
<td>(1, 574, 573)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Dask graph</td>
<td colspan="2">10 chunks in 3 graph layers</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Data type</td>
<td colspan="2">float32 numpy.ndarray</td>
</tr>
</tbody>
</table></td>
<td><svg width="196" height="186" style="stroke:rgb(0,0,0);stroke-width:1">
<!-- Horizontal lines --> <line x1="10" y1="0" x2="26" y2="16" style="stroke-width:2"></line> <line x1="10" y1="120" x2="26" y2="136" style="stroke-width:2"></line> <!-- Vertical lines --> <line x1="10" y1="0" x2="10" y2="120" style="stroke-width:2"></line> <line x1="11" y1="1" x2="11" y2="121"></line> <line x1="13" y1="3" x2="13" y2="123"></line> <line x1="14" y1="4" x2="14" y2="124"></line> <line x1="16" y1="6" x2="16" y2="126"></line> <line x1="18" y1="8" x2="18" y2="128"></line> <line x1="19" y1="9" x2="19" y2="129"></line> <line x1="21" y1="11" x2="21" y2="131"></line> <line x1="23" y1="13" x2="23" y2="133"></line> <line x1="24" y1="14" x2="24" y2="134"></line> <line x1="26" y1="16" x2="26" y2="136" style="stroke-width:2"></line> <!-- Colored Rectangle --> <polygon points="10.0,0.0 26.62607637203506,16.62607637203506 26.62607637203506,136.62607637203507 10.0,120.0" style="fill:#ECB172A0;stroke-width:0"></polygon> <!-- Horizontal lines --> <line x1="10" y1="0" x2="129" y2="0" style="stroke-width:2"></line> <line x1="11" y1="1" x2="131" y2="1"></line> <line x1="13" y1="3" x2="133" y2="3"></line> <line x1="14" y1="4" x2="134" y2="4"></line> <line x1="16" y1="6" x2="136" y2="6"></line> <line x1="18" y1="8" x2="138" y2="8"></line> <line x1="19" y1="9" x2="139" y2="9"></line> <line x1="21" y1="11" x2="141" y2="11"></line> <line x1="23" y1="13" x2="143" y2="13"></line> <line x1="24" y1="14" x2="144" y2="14"></line> <line x1="26" y1="16" x2="146" y2="16" style="stroke-width:2"></line> <!-- Vertical lines --> <line x1="10" y1="0" x2="26" y2="16" style="stroke-width:2"></line> <line x1="129" y1="0" x2="146" y2="16" style="stroke-width:2"></line> <!-- Colored Rectangle --> <polygon points="10.0,0.0 129.7909407665505,0.0 146.41701713858558,16.62607637203506 26.62607637203506,16.62607637203506" style="fill:#ECB172A0;stroke-width:0"></polygon> <!-- Horizontal lines --> <line x1="26" y1="16" x2="146" y2="16" style="stroke-width:2"></line> <line x1="26" y1="136" x2="146" y2="136" style="stroke-width:2"></line> <!-- Vertical lines --> <line x1="26" y1="16" x2="26" y2="136" style="stroke-width:2"></line> <line x1="146" y1="16" x2="146" y2="136" style="stroke-width:2"></line> <!-- Colored Rectangle --> <polygon points="26.62607637203506,16.62607637203506 146.41701713858558,16.62607637203506 146.41701713858558,136.62607637203507 26.62607637203506,136.62607637203507" style="fill:#ECB172A0;stroke-width:0"></polygon> <!-- Text --> <text x="86.521547" y="156.626076" font-size="1.0rem" font-weight="100" text-anchor="middle">573</text> <text x="166.417017" y="76.626076" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,166.417017,76.626076)">574</text> <text x="8.313038" y="148.313038" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,8.313038,148.313038)">10</text>
</svg></td>
</tr>
</tbody>
</table>
</div></li><li class="xr-var-item"><div class="xr-var-name"><span>valid_pixels</span></div><div class="xr-var-dims">(time, y, x)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">dask.array&lt;chunksize=(1, 574, 573), meta=np.ndarray&gt;</div><input id="attrs-0bd86d05-cedb-45ea-a2c9-636429588576" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-0bd86d05-cedb-45ea-a2c9-636429588576" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-d46d5d46-ce23-4f39-bae9-b26b7721b156" class="xr-var-data-in" type="checkbox"><label for="data-d46d5d46-ce23-4f39-bae9-b26b7721b156" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td><table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th></th>
<th data-quarto-table-cell-role="th">Array</th>
<th data-quarto-table-cell-role="th">Chunk</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Bytes</td>
<td>12.55 MiB</td>
<td>1.25 MiB</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Shape</td>
<td>(10, 574, 573)</td>
<td>(1, 574, 573)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Dask graph</td>
<td colspan="2">10 chunks in 3 graph layers</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Data type</td>
<td colspan="2">float32 numpy.ndarray</td>
</tr>
</tbody>
</table></td>
<td><svg width="196" height="186" style="stroke:rgb(0,0,0);stroke-width:1">
<!-- Horizontal lines --> <line x1="10" y1="0" x2="26" y2="16" style="stroke-width:2"></line> <line x1="10" y1="120" x2="26" y2="136" style="stroke-width:2"></line> <!-- Vertical lines --> <line x1="10" y1="0" x2="10" y2="120" style="stroke-width:2"></line> <line x1="11" y1="1" x2="11" y2="121"></line> <line x1="13" y1="3" x2="13" y2="123"></line> <line x1="14" y1="4" x2="14" y2="124"></line> <line x1="16" y1="6" x2="16" y2="126"></line> <line x1="18" y1="8" x2="18" y2="128"></line> <line x1="19" y1="9" x2="19" y2="129"></line> <line x1="21" y1="11" x2="21" y2="131"></line> <line x1="23" y1="13" x2="23" y2="133"></line> <line x1="24" y1="14" x2="24" y2="134"></line> <line x1="26" y1="16" x2="26" y2="136" style="stroke-width:2"></line> <!-- Colored Rectangle --> <polygon points="10.0,0.0 26.62607637203506,16.62607637203506 26.62607637203506,136.62607637203507 10.0,120.0" style="fill:#ECB172A0;stroke-width:0"></polygon> <!-- Horizontal lines --> <line x1="10" y1="0" x2="129" y2="0" style="stroke-width:2"></line> <line x1="11" y1="1" x2="131" y2="1"></line> <line x1="13" y1="3" x2="133" y2="3"></line> <line x1="14" y1="4" x2="134" y2="4"></line> <line x1="16" y1="6" x2="136" y2="6"></line> <line x1="18" y1="8" x2="138" y2="8"></line> <line x1="19" y1="9" x2="139" y2="9"></line> <line x1="21" y1="11" x2="141" y2="11"></line> <line x1="23" y1="13" x2="143" y2="13"></line> <line x1="24" y1="14" x2="144" y2="14"></line> <line x1="26" y1="16" x2="146" y2="16" style="stroke-width:2"></line> <!-- Vertical lines --> <line x1="10" y1="0" x2="26" y2="16" style="stroke-width:2"></line> <line x1="129" y1="0" x2="146" y2="16" style="stroke-width:2"></line> <!-- Colored Rectangle --> <polygon points="10.0,0.0 129.7909407665505,0.0 146.41701713858558,16.62607637203506 26.62607637203506,16.62607637203506" style="fill:#ECB172A0;stroke-width:0"></polygon> <!-- Horizontal lines --> <line x1="26" y1="16" x2="146" y2="16" style="stroke-width:2"></line> <line x1="26" y1="136" x2="146" y2="136" style="stroke-width:2"></line> <!-- Vertical lines --> <line x1="26" y1="16" x2="26" y2="136" style="stroke-width:2"></line> <line x1="146" y1="16" x2="146" y2="136" style="stroke-width:2"></line> <!-- Colored Rectangle --> <polygon points="26.62607637203506,16.62607637203506 146.41701713858558,16.62607637203506 146.41701713858558,136.62607637203507 26.62607637203506,136.62607637203507" style="fill:#ECB172A0;stroke-width:0"></polygon> <!-- Text --> <text x="86.521547" y="156.626076" font-size="1.0rem" font-weight="100" text-anchor="middle">573</text> <text x="166.417017" y="76.626076" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,166.417017,76.626076)">574</text> <text x="8.313038" y="148.313038" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,8.313038,148.313038)">10</text>
</svg></td>
</tr>
</tbody>
</table>
</div></li><li class="xr-var-item"><div class="xr-var-name"><span>saturated_pixels</span></div><div class="xr-var-dims">(time, y, x)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">dask.array&lt;chunksize=(1, 574, 573), meta=np.ndarray&gt;</div><input id="attrs-b41eff87-d1f3-4f39-96e8-ba188e6d1b8d" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-b41eff87-d1f3-4f39-96e8-ba188e6d1b8d" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-e0b05aab-11cb-4b9c-ad44-2f1d540f347f" class="xr-var-data-in" type="checkbox"><label for="data-e0b05aab-11cb-4b9c-ad44-2f1d540f347f" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td><table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th></th>
<th data-quarto-table-cell-role="th">Array</th>
<th data-quarto-table-cell-role="th">Chunk</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Bytes</td>
<td>12.55 MiB</td>
<td>1.25 MiB</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Shape</td>
<td>(10, 574, 573)</td>
<td>(1, 574, 573)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Dask graph</td>
<td colspan="2">10 chunks in 3 graph layers</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Data type</td>
<td colspan="2">float32 numpy.ndarray</td>
</tr>
</tbody>
</table></td>
<td><svg width="196" height="186" style="stroke:rgb(0,0,0);stroke-width:1">
<!-- Horizontal lines --> <line x1="10" y1="0" x2="26" y2="16" style="stroke-width:2"></line> <line x1="10" y1="120" x2="26" y2="136" style="stroke-width:2"></line> <!-- Vertical lines --> <line x1="10" y1="0" x2="10" y2="120" style="stroke-width:2"></line> <line x1="11" y1="1" x2="11" y2="121"></line> <line x1="13" y1="3" x2="13" y2="123"></line> <line x1="14" y1="4" x2="14" y2="124"></line> <line x1="16" y1="6" x2="16" y2="126"></line> <line x1="18" y1="8" x2="18" y2="128"></line> <line x1="19" y1="9" x2="19" y2="129"></line> <line x1="21" y1="11" x2="21" y2="131"></line> <line x1="23" y1="13" x2="23" y2="133"></line> <line x1="24" y1="14" x2="24" y2="134"></line> <line x1="26" y1="16" x2="26" y2="136" style="stroke-width:2"></line> <!-- Colored Rectangle --> <polygon points="10.0,0.0 26.62607637203506,16.62607637203506 26.62607637203506,136.62607637203507 10.0,120.0" style="fill:#ECB172A0;stroke-width:0"></polygon> <!-- Horizontal lines --> <line x1="10" y1="0" x2="129" y2="0" style="stroke-width:2"></line> <line x1="11" y1="1" x2="131" y2="1"></line> <line x1="13" y1="3" x2="133" y2="3"></line> <line x1="14" y1="4" x2="134" y2="4"></line> <line x1="16" y1="6" x2="136" y2="6"></line> <line x1="18" y1="8" x2="138" y2="8"></line> <line x1="19" y1="9" x2="139" y2="9"></line> <line x1="21" y1="11" x2="141" y2="11"></line> <line x1="23" y1="13" x2="143" y2="13"></line> <line x1="24" y1="14" x2="144" y2="14"></line> <line x1="26" y1="16" x2="146" y2="16" style="stroke-width:2"></line> <!-- Vertical lines --> <line x1="10" y1="0" x2="26" y2="16" style="stroke-width:2"></line> <line x1="129" y1="0" x2="146" y2="16" style="stroke-width:2"></line> <!-- Colored Rectangle --> <polygon points="10.0,0.0 129.7909407665505,0.0 146.41701713858558,16.62607637203506 26.62607637203506,16.62607637203506" style="fill:#ECB172A0;stroke-width:0"></polygon> <!-- Horizontal lines --> <line x1="26" y1="16" x2="146" y2="16" style="stroke-width:2"></line> <line x1="26" y1="136" x2="146" y2="136" style="stroke-width:2"></line> <!-- Vertical lines --> <line x1="26" y1="16" x2="26" y2="136" style="stroke-width:2"></line> <line x1="146" y1="16" x2="146" y2="136" style="stroke-width:2"></line> <!-- Colored Rectangle --> <polygon points="26.62607637203506,16.62607637203506 146.41701713858558,16.62607637203506 146.41701713858558,136.62607637203507 26.62607637203506,136.62607637203507" style="fill:#ECB172A0;stroke-width:0"></polygon> <!-- Text --> <text x="86.521547" y="156.626076" font-size="1.0rem" font-weight="100" text-anchor="middle">573</text> <text x="166.417017" y="76.626076" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,166.417017,76.626076)">574</text> <text x="8.313038" y="148.313038" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,8.313038,148.313038)">10</text>
</svg></td>
</tr>
</tbody>
</table>
</div></li></ul></div></li><li class="xr-section-item"><input id="section-27dc6260-439a-4505-bc09-1b84f2671006" class="xr-section-summary-in" type="checkbox"><label for="section-27dc6260-439a-4505-bc09-1b84f2671006" class="xr-section-summary">Indexes: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>y</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-38c6f1de-0a47-4fc2-87df-c1beda7fa3be" class="xr-index-data-in" type="checkbox"><label for="index-38c6f1de-0a47-4fc2-87df-c1beda7fa3be" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([6862240.0, 6861920.0, 6861600.0, 6861280.0, 6860960.0, 6860640.0,
       6860320.0, 6860000.0, 6859680.0, 6859360.0,
       ...
       6681760.0, 6681440.0, 6681120.0, 6680800.0, 6680480.0, 6680160.0,
       6679840.0, 6679520.0, 6679200.0, 6678880.0],
      dtype='float64', name='y', length=574))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>x</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-e1b1fbaf-567f-4b35-b853-3dc678bb7619" class="xr-index-data-in" type="checkbox"><label for="index-e1b1fbaf-567f-4b35-b853-3dc678bb7619" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([-174240.0, -173920.0, -173600.0, -173280.0, -172960.0, -172640.0,
       -172320.0, -172000.0, -171680.0, -171360.0,
       ...
          5920.0,    6240.0,    6560.0,    6880.0,    7200.0,    7520.0,
          7840.0,    8160.0,    8480.0,    8800.0],
      dtype='float64', name='x', length=573))</pre></div></li><li class="xr-var-item"><div class="xr-index-name"><div>time</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input id="index-9e155e5b-4125-47f4-a5ca-ac4733d20267" class="xr-index-data-in" type="checkbox"><label for="index-9e155e5b-4125-47f4-a5ca-ac4733d20267" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(DatetimeIndex(['2023-01-09 11:23:39', '2023-01-11 11:14:31',
               '2023-01-19 11:23:09', '2023-01-21 11:13:51',
               '2023-01-24 11:23:41', '2023-01-31 11:13:11',
               '2023-02-08 11:21:29', '2023-02-13 11:21:51',
               '2023-02-15 11:10:49', '2023-02-20 11:11:01'],
              dtype='datetime64[ns]', name='time', freq=None))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-a58424b0-f92e-4dd6-929a-c7fbe3358da4" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-a58424b0-f92e-4dd6-929a-c7fbe3358da4" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div>
</div>
</div>
<div id="bb663a98-2c2a-4480-b8bb-c180b786064a" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># DATA FOOTPRINT</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co">#xx.odc.geobox</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TEST</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>xx.data_vars[cog]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[46], line 5</span>
<span class="ansi-green-fg ansi-bold">      1</span> <span style="font-style:italic;color:rgb(95,135,135)"># DATA FOOTPRINT</span>
<span class="ansi-green-fg ansi-bold">      2</span> <span style="font-style:italic;color:rgb(95,135,135)">#xx.odc.geobox</span>
<span class="ansi-green-fg ansi-bold">      3</span> 
<span class="ansi-green-fg ansi-bold">      4</span> <span style="font-style:italic;color:rgb(95,135,135)"># TEST</span>
<span class="ansi-green-fg">----&gt; 5</span> xx<span style="color:rgb(98,98,98)">.</span>data_vars[<span class="ansi-yellow-bg">cog</span>]

<span class="ansi-red-fg">NameError</span>: name 'cog' is not defined</pre>
</div>
</div>
</div>
<div id="39c4270e-0d08-4ac5-9336-7ae4439e4fcb" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>time</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>xx <span class="op">=</span> xx.compute() <span class="co"># LOAD INTO LOCAL MEMORY</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/home/al/miniforge3/envs/odc/lib/python3.12/site-packages/rasterio/__init__.py:304: NotGeoreferencedWarning: Dataset has no geotransform, gcps, or rpcs. The identity matrix will be returned.
  dataset = DatasetReader(path, driver=driver, sharing=sharing, **kwargs)
2024-09-03 17:29:35,400 - distributed.worker - ERROR - Compute Failed
Key:       ('thumbnail-4cf0090f06da1a44bfc619df23a3de1a', 9, 0, 0)
State:     executing
Function:  _dask_loader_tyx
args:      ([[&lt;odc.loader._rio.RioReader object at 0x7a0209f5bd40&gt;]], Tiles: 1x1|574x573px =&gt; 574x573px, (0, 0), (), (), RasterLoadParams(dtype='float32', fill_value=None, src_nodata_fallback=None, src_nodata_override=None, use_overviews=True, resampling='nearest', fail_on_error=True, dims=()), &lt;odc.loader._rio.RioDriver object at 0x7a02102197c0&gt;, {'GDAL_DISABLE_READDIR_ON_OPEN': 'EMPTY_DIR', 'GDAL_HTTP_MAX_RETRY': '10', 'GDAL_HTTP_RETRY_DELAY': '0.5', '_aws': {'aws_unsigned': True}}, &lt;odc.loader._rio.RioReader.LoaderState object at 0x7a02186c3530&gt;, None)
kwargs:    {}
Exception: 'AssertionError()'
Traceback: '  File "/home/al/miniforge3/envs/odc/lib/python3.12/site-packages/odc/loader/_builder.py", line 434, in _dask_loader_tyx\n    _fill_nd_slice(\n  File "/home/al/miniforge3/envs/odc/lib/python3.12/site-packages/odc/loader/_builder.py", line 511, in _fill_nd_slice\n    yx_roi, pix = src.read(cfg, dst_gbox, dst=dst, selection=selection)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/al/miniforge3/envs/odc/lib/python3.12/site-packages/odc/loader/_rio.py", line 115, in read\n    return rio_read(self._src, cfg, dst_geobox, dst=dst, selection=selection)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/al/miniforge3/envs/odc/lib/python3.12/site-packages/odc/loader/_rio.py", line 512, in rio_read\n    _rio_read(src, cfg, dst_geobox, prep_dst(dst), selection=selection)\n  File "/home/al/miniforge3/envs/odc/lib/python3.12/site-packages/odc/loader/_rio.py", line 565, in _rio_read\n    rr = _reproject_info_from_rio(rdr, dst_geobox, ttol=ttol)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/al/miniforge3/envs/odc/lib/python3.12/site-packages/odc/loader/_rio.py", line 386, in _reproject_info_from_rio\n    return compute_reproject_roi(rio_geobox(rdr), dst_geobox, ttol=ttol)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/al/miniforge3/envs/odc/lib/python3.12/site-packages/odc/geo/overlap.py", line 489, in compute_reproject_roi\n    tr = native_pix_transform(src, dst)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/al/miniforge3/envs/odc/lib/python3.12/site-packages/odc/geo/overlap.py", line 337, in native_pix_transform\n    return GbxPointTransform(src, dst)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/al/miniforge3/envs/odc/lib/python3.12/site-packages/odc/geo/overlap.py", line 102, in __init__\n    assert src.crs is not None and dst.crs is not None\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n'
</code></pre>
</div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">AssertionError</span>                            Traceback (most recent call last)
File <span class="ansi-green-fg">&lt;timed exec&gt;:1</span>

File <span class="ansi-green-fg">~/miniforge3/envs/odc/lib/python3.12/site-packages/xarray/core/dataset.py:1038</span>, in <span class="ansi-cyan-fg">Dataset.compute</span><span class="ansi-blue-fg">(self, **kwargs)</span>
<span class="ansi-green-fg ansi-bold">   1014</span> <span style="font-style:italic;color:rgb(175,0,0)">"""Manually trigger loading and/or computation of this dataset's data</span>
<span class="ansi-green-fg ansi-bold">   1015</span> <span style="font-style:italic;color:rgb(175,0,0)">from disk or a remote source into memory and return a new dataset.</span>
<span class="ansi-green-fg ansi-bold">   1016</span> <span style="font-style:italic;color:rgb(175,0,0)">Unlike load, the original dataset is left unaltered.</span>
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-fg ansi-bold">   1035</span> <span style="font-style:italic;color:rgb(175,0,0)">dask.compute</span>
<span class="ansi-green-fg ansi-bold">   1036</span> <span style="font-style:italic;color:rgb(175,0,0)">"""</span>
<span class="ansi-green-fg ansi-bold">   1037</span> new <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>copy(deep<span style="color:rgb(98,98,98)">=</span><span style="font-weight:bold;color:rgb(0,135,0)">False</span>)
<span class="ansi-green-fg">-&gt; 1038</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span class="ansi-yellow-bg">new</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">load</span><span class="ansi-yellow-bg">(</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">*</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">kwargs</span><span class="ansi-yellow-bg">)</span>

File <span class="ansi-green-fg">~/miniforge3/envs/odc/lib/python3.12/site-packages/xarray/core/dataset.py:865</span>, in <span class="ansi-cyan-fg">Dataset.load</span><span class="ansi-blue-fg">(self, **kwargs)</span>
<span class="ansi-green-fg ansi-bold">    862</span> chunkmanager <span style="color:rgb(98,98,98)">=</span> get_chunked_array_type(<span style="color:rgb(98,98,98)">*</span>lazy_data<span style="color:rgb(98,98,98)">.</span>values())
<span class="ansi-green-fg ansi-bold">    864</span> <span style="font-style:italic;color:rgb(95,135,135)"># evaluate all the chunked arrays simultaneously</span>
<span class="ansi-green-fg">--&gt; 865</span> evaluated_data: <span style="color:rgb(0,135,0)">tuple</span>[np<span style="color:rgb(98,98,98)">.</span>ndarray[Any, Any], <span style="color:rgb(98,98,98)">.</span><span style="color:rgb(98,98,98)">.</span><span style="color:rgb(98,98,98)">.</span>] <span style="color:rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">chunkmanager</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">compute</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-fg ansi-bold">    866</span> <span class="ansi-yellow-bg">    </span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">lazy_data</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">values</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">*</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">kwargs</span>
<span class="ansi-green-fg ansi-bold">    867</span> <span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg ansi-bold">    869</span> <span style="font-weight:bold;color:rgb(0,135,0)">for</span> k, data <span style="font-weight:bold;color:rgb(175,0,255)">in</span> <span style="color:rgb(0,135,0)">zip</span>(lazy_data, evaluated_data):
<span class="ansi-green-fg ansi-bold">    870</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>variables[k]<span style="color:rgb(98,98,98)">.</span>data <span style="color:rgb(98,98,98)">=</span> data

File <span class="ansi-green-fg">~/miniforge3/envs/odc/lib/python3.12/site-packages/xarray/namedarray/daskmanager.py:86</span>, in <span class="ansi-cyan-fg">DaskManager.compute</span><span class="ansi-blue-fg">(self, *data, **kwargs)</span>
<span class="ansi-green-fg ansi-bold">     81</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">compute</span>(
<span class="ansi-green-fg ansi-bold">     82</span>     <span style="color:rgb(0,135,0)">self</span>, <span style="color:rgb(98,98,98)">*</span>data: Any, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>kwargs: Any
<span class="ansi-green-fg ansi-bold">     83</span> ) <span style="color:rgb(98,98,98)">-</span><span style="color:rgb(98,98,98)">&gt;</span> <span style="color:rgb(0,135,0)">tuple</span>[np<span style="color:rgb(98,98,98)">.</span>ndarray[Any, _DType_co], <span style="color:rgb(98,98,98)">.</span><span style="color:rgb(98,98,98)">.</span><span style="color:rgb(98,98,98)">.</span>]:
<span class="ansi-green-fg ansi-bold">     84</span>     <span style="font-weight:bold;color:rgb(0,135,0)">from</span> <span style="font-weight:bold;color:rgb(0,0,255)">dask</span><span style="font-weight:bold;color:rgb(0,0,255)">.</span><span style="font-weight:bold;color:rgb(0,0,255)">array</span> <span style="font-weight:bold;color:rgb(0,135,0)">import</span> compute
<span class="ansi-green-fg">---&gt; 86</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span class="ansi-yellow-bg">compute</span><span class="ansi-yellow-bg">(</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">data</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">*</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">kwargs</span><span class="ansi-yellow-bg">)</span>

File <span class="ansi-green-fg">~/miniforge3/envs/odc/lib/python3.12/site-packages/dask/base.py:662</span>, in <span class="ansi-cyan-fg">compute</span><span class="ansi-blue-fg">(traverse, optimize_graph, scheduler, get, *args, **kwargs)</span>
<span class="ansi-green-fg ansi-bold">    659</span>     postcomputes<span style="color:rgb(98,98,98)">.</span>append(x<span style="color:rgb(98,98,98)">.</span>__dask_postcompute__())
<span class="ansi-green-fg ansi-bold">    661</span> <span style="font-weight:bold;color:rgb(0,135,0)">with</span> shorten_traceback():
<span class="ansi-green-fg">--&gt; 662</span>     results <span style="color:rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">schedule</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">dsk</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">keys</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">*</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">kwargs</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg ansi-bold">    664</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> repack([f(r, <span style="color:rgb(98,98,98)">*</span>a) <span style="font-weight:bold;color:rgb(0,135,0)">for</span> r, (f, a) <span style="font-weight:bold;color:rgb(175,0,255)">in</span> <span style="color:rgb(0,135,0)">zip</span>(results, postcomputes)])

File <span class="ansi-green-fg">~/miniforge3/envs/odc/lib/python3.12/site-packages/odc/loader/_builder.py:434</span>, in <span class="ansi-cyan-fg">_dask_loader_tyx</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg ansi-bold">    432</span> <span style="font-weight:bold;color:rgb(0,135,0)">with</span> rdr<span style="color:rgb(98,98,98)">.</span>restore_env(env, load_state):
<span class="ansi-green-fg ansi-bold">    433</span>     <span style="font-weight:bold;color:rgb(0,135,0)">for</span> ti, ti_srcs <span style="font-weight:bold;color:rgb(175,0,255)">in</span> <span style="color:rgb(0,135,0)">enumerate</span>(srcs):
<span class="ansi-green-fg">--&gt; 434</span>         _fill_nd_slice(
<span class="ansi-green-fg ansi-bold">    435</span>             ti_srcs, gbox, cfg, chunk[ti], ydim<span style="color:rgb(98,98,98)">=</span>ydim, selection<span style="color:rgb(98,98,98)">=</span>selection
<span class="ansi-green-fg ansi-bold">    436</span>         )
<span class="ansi-green-fg ansi-bold">    437</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> chunk

File <span class="ansi-green-fg">~/miniforge3/envs/odc/lib/python3.12/site-packages/odc/loader/_builder.py:511</span>, in <span class="ansi-cyan-fg">_fill_nd_slice</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg ansi-bold">    508</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> dst
<span class="ansi-green-fg ansi-bold">    510</span> src, <span style="color:rgb(98,98,98)">*</span>rest <span style="color:rgb(98,98,98)">=</span> srcs
<span class="ansi-green-fg">--&gt; 511</span> yx_roi, pix <span style="color:rgb(98,98,98)">=</span> src<span style="color:rgb(98,98,98)">.</span>read(cfg, dst_gbox, dst<span style="color:rgb(98,98,98)">=</span>dst, selection<span style="color:rgb(98,98,98)">=</span>selection)
<span class="ansi-green-fg ansi-bold">    512</span> <span style="font-weight:bold;color:rgb(0,135,0)">assert</span> <span style="color:rgb(0,135,0)">len</span>(yx_roi) <span style="color:rgb(98,98,98)">==</span> <span style="color:rgb(98,98,98)">2</span>
<span class="ansi-green-fg ansi-bold">    513</span> <span style="font-weight:bold;color:rgb(0,135,0)">assert</span> pix<span style="color:rgb(98,98,98)">.</span>ndim <span style="color:rgb(98,98,98)">==</span> dst<span style="color:rgb(98,98,98)">.</span>ndim

File <span class="ansi-green-fg">~/miniforge3/envs/odc/lib/python3.12/site-packages/odc/loader/_rio.py:115</span>, in <span class="ansi-cyan-fg">read</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg ansi-bold">    107</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">read</span>(
<span class="ansi-green-fg ansi-bold">    108</span>     <span style="color:rgb(0,135,0)">self</span>,
<span class="ansi-green-fg ansi-bold">    109</span>     cfg: RasterLoadParams,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-fg ansi-bold">    113</span>     selection: Optional[ReaderSubsetSelection] <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>,
<span class="ansi-green-fg ansi-bold">    114</span> ) <span style="color:rgb(98,98,98)">-</span><span style="color:rgb(98,98,98)">&gt;</span> <span style="color:rgb(0,135,0)">tuple</span>[<span style="color:rgb(0,135,0)">tuple</span>[<span style="color:rgb(0,135,0)">slice</span>, <span style="color:rgb(0,135,0)">slice</span>], np<span style="color:rgb(98,98,98)">.</span>ndarray]:
<span class="ansi-green-fg">--&gt; 115</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> rio_read(<span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_src, cfg, dst_geobox, dst<span style="color:rgb(98,98,98)">=</span>dst, selection<span style="color:rgb(98,98,98)">=</span>selection)

File <span class="ansi-green-fg">~/miniforge3/envs/odc/lib/python3.12/site-packages/odc/loader/_rio.py:512</span>, in <span class="ansi-cyan-fg">rio_read</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg ansi-bold">    508</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> roi, out<span style="color:rgb(98,98,98)">.</span>transpose([<span style="color:rgb(98,98,98)">1</span>, <span style="color:rgb(98,98,98)">2</span>, <span style="color:rgb(98,98,98)">0</span>])
<span class="ansi-green-fg ansi-bold">    510</span> <span style="font-weight:bold;color:rgb(0,135,0)">try</span>:
<span class="ansi-green-fg ansi-bold">    511</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> fixup_out(
<span class="ansi-green-fg">--&gt; 512</span>         _rio_read(src, cfg, dst_geobox, prep_dst(dst), selection<span style="color:rgb(98,98,98)">=</span>selection)
<span class="ansi-green-fg ansi-bold">    513</span>     )
<span class="ansi-green-fg ansi-bold">    514</span> <span style="font-weight:bold;color:rgb(0,135,0)">except</span> (
<span class="ansi-green-fg ansi-bold">    515</span>     rasterio<span style="color:rgb(98,98,98)">.</span>errors<span style="color:rgb(98,98,98)">.</span>RasterioIOError,
<span class="ansi-green-fg ansi-bold">    516</span>     rasterio<span style="color:rgb(98,98,98)">.</span>errors<span style="color:rgb(98,98,98)">.</span>RasterBlockError,
<span class="ansi-green-fg ansi-bold">    517</span>     rasterio<span style="color:rgb(98,98,98)">.</span>errors<span style="color:rgb(98,98,98)">.</span>WarpOperationError,
<span class="ansi-green-fg ansi-bold">    518</span>     rasterio<span style="color:rgb(98,98,98)">.</span>errors<span style="color:rgb(98,98,98)">.</span>WindowEvaluationError,
<span class="ansi-green-fg ansi-bold">    519</span> ) <span style="font-weight:bold;color:rgb(0,135,0)">as</span> e:
<span class="ansi-green-fg ansi-bold">    520</span>     <span style="font-weight:bold;color:rgb(0,135,0)">if</span> cfg<span style="color:rgb(98,98,98)">.</span>fail_on_error:

File <span class="ansi-green-fg">~/miniforge3/envs/odc/lib/python3.12/site-packages/odc/loader/_rio.py:565</span>, in <span class="ansi-cyan-fg">_rio_read</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg ansi-bold">    562</span> ovr_idx: Optional[<span style="color:rgb(0,135,0)">int</span>] <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>
<span class="ansi-green-fg ansi-bold">    564</span> bidx <span style="color:rgb(98,98,98)">=</span> resolve_band_query(src, rdr<span style="color:rgb(98,98,98)">.</span>count, selection<span style="color:rgb(98,98,98)">=</span>selection)
<span class="ansi-green-fg">--&gt; 565</span> rr <span style="color:rgb(98,98,98)">=</span> _reproject_info_from_rio(rdr, dst_geobox, ttol<span style="color:rgb(98,98,98)">=</span>ttol)
<span class="ansi-green-fg ansi-bold">    567</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> cfg<span style="color:rgb(98,98,98)">.</span>use_overviews <span style="font-weight:bold;color:rgb(175,0,255)">and</span> rr<span style="color:rgb(98,98,98)">.</span>read_shrink <span style="color:rgb(98,98,98)">&gt;</span> <span style="color:rgb(98,98,98)">1</span>:
<span class="ansi-green-fg ansi-bold">    568</span>     first_band <span style="color:rgb(98,98,98)">=</span> bidx <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,135,0)">isinstance</span>(bidx, <span style="color:rgb(0,135,0)">int</span>) <span style="font-weight:bold;color:rgb(0,135,0)">else</span> bidx[<span style="color:rgb(98,98,98)">0</span>]

File <span class="ansi-green-fg">~/miniforge3/envs/odc/lib/python3.12/site-packages/odc/loader/_rio.py:386</span>, in <span class="ansi-cyan-fg">_reproject_info_from_rio</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg ansi-bold">    383</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">_reproject_info_from_rio</span>(
<span class="ansi-green-fg ansi-bold">    384</span>     rdr: rasterio<span style="color:rgb(98,98,98)">.</span>DatasetReader, dst_geobox: GeoBox, ttol: <span style="color:rgb(0,135,0)">float</span>
<span class="ansi-green-fg ansi-bold">    385</span> ) <span style="color:rgb(98,98,98)">-</span><span style="color:rgb(98,98,98)">&gt;</span> ReprojectInfo:
<span class="ansi-green-fg">--&gt; 386</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> compute_reproject_roi(rio_geobox(rdr), dst_geobox, ttol<span style="color:rgb(98,98,98)">=</span>ttol)

File <span class="ansi-green-fg">~/miniforge3/envs/odc/lib/python3.12/site-packages/odc/geo/overlap.py:489</span>, in <span class="ansi-cyan-fg">compute_reproject_roi</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg ansi-bold">    485</span> <span style="font-style:italic;color:rgb(95,135,135)"># pylint: disable=too-many-locals</span>
<span class="ansi-green-fg ansi-bold">    487</span> pts_per_side <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(98,98,98)">5</span>
<span class="ansi-green-fg">--&gt; 489</span> tr <span style="color:rgb(98,98,98)">=</span> native_pix_transform(src, dst)
<span class="ansi-green-fg ansi-bold">    491</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> tr<span style="color:rgb(98,98,98)">.</span>linear <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>:
<span class="ansi-green-fg ansi-bold">    492</span>     padding <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(98,98,98)">1</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> padding <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span> padding

File <span class="ansi-green-fg">~/miniforge3/envs/odc/lib/python3.12/site-packages/odc/geo/overlap.py:337</span>, in <span class="ansi-cyan-fg">native_pix_transform</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg ansi-bold">    334</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,135,0)">isinstance</span>(src, GeoBox) <span style="font-weight:bold;color:rgb(175,0,255)">and</span> <span style="color:rgb(0,135,0)">isinstance</span>(dst, GeoBox) <span style="font-weight:bold;color:rgb(175,0,255)">and</span> src<span style="color:rgb(98,98,98)">.</span>crs <span style="color:rgb(98,98,98)">==</span> dst<span style="color:rgb(98,98,98)">.</span>crs:
<span class="ansi-green-fg ansi-bold">    335</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> _same_crs_pix_transform(src, dst)
<span class="ansi-green-fg">--&gt; 337</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> GbxPointTransform(src, dst)

File <span class="ansi-green-fg">~/miniforge3/envs/odc/lib/python3.12/site-packages/odc/geo/overlap.py:102</span>, in <span class="ansi-cyan-fg">__init__</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg ansi-bold">     96</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">__init__</span>(
<span class="ansi-green-fg ansi-bold">     97</span>     <span style="color:rgb(0,135,0)">self</span>,
<span class="ansi-green-fg ansi-bold">     98</span>     src: GeoBoxBase,
<span class="ansi-green-fg ansi-bold">     99</span>     dst: GeoBoxBase,
<span class="ansi-green-fg ansi-bold">    100</span>     back: Optional[<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">GbxPointTransform</span><span style="color:rgb(175,0,0)">"</span>] <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>,
<span class="ansi-green-fg ansi-bold">    101</span> ):
<span class="ansi-green-fg">--&gt; 102</span>     <span style="font-weight:bold;color:rgb(0,135,0)">assert</span> src<span style="color:rgb(98,98,98)">.</span>crs <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span> <span style="font-weight:bold;color:rgb(175,0,255)">and</span> dst<span style="color:rgb(98,98,98)">.</span>crs <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>
<span class="ansi-green-fg ansi-bold">    103</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_src <span style="color:rgb(98,98,98)">=</span> src
<span class="ansi-green-fg ansi-bold">    104</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_dst <span style="color:rgb(98,98,98)">=</span> dst

<span class="ansi-red-fg">AssertionError</span>: </pre>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/home/al/miniforge3/envs/odc/lib/python3.12/site-packages/rasterio/__init__.py:304: NotGeoreferencedWarning: Dataset has no geotransform, gcps, or rpcs. The identity matrix will be returned.
  dataset = DatasetReader(path, driver=driver, sharing=sharing, **kwargs)
/home/al/miniforge3/envs/odc/lib/python3.12/site-packages/rasterio/__init__.py:304: NotGeoreferencedWarning: Dataset has no geotransform, gcps, or rpcs. The identity matrix will be returned.
  dataset = DatasetReader(path, driver=driver, sharing=sharing, **kwargs)</code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/EO-DataHub\.github\.io\/eodh-training\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>