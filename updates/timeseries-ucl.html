<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>London Timeseries – EODH Training Materials</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-b758ccaa5987ceb1b75504551e579abf.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-0c6282e9eda64d97ea9e5255f7a37655.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-d6f41e6f289ddcd3353223713284dc1e.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../site_libs/bootstrap/bootstrap-0c6282e9eda64d97ea9e5255f7a37655.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-sidebar docked nav-fixed quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">EODH Training Materials</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/orgs/EO-DataHub/repositories">
            Source Code
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/EO-DataHub/eodh-training/discussions">
            Community discussion
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">London Timeseries</li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../website/about.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Hub Platform</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../platform/1_Intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">EODH Platform Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../platform/2_Components.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">EODH Platform Components</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Simplifying access - pyeodh</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../api-client/1_ClientIntro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">What is pyeodh?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../api-client/2_ResourceCatalog.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using the Resource Catalogue</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../api-client/3_WorkflowRunner.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Running Workflows</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../api-client/4_Services.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using Mapping Services</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">Creating Workflows - eoap-gen</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../workflows/1_Workflows.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Workflow Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../workflows/2_EOAP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">EO App Packages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../workflows/3_eoapgen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using eoap-gen</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../workflows/4_UserExample1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">User Example: coherence</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../workflows/5_UserExample2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">User Example: temporal mosaics</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">GIS interface - QGIS plugin</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../plugin/1_introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">QGIS Plugin Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../plugin/2_Runningworkflows.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Running A Workflow</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../plugin/3_OtherTools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Other Tools</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false">
 <span class="menu-text">Science &amp; code examples</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../science/1_Snippets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Code Snippets</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../science/2_Examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Climate Models</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false">
 <span class="menu-text">Presentations</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/DEFRA/1_202409_Defra_DataDiscovery.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">DEFRA Data Discovery</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/DEFRA/2_202409_Defra_DataProcessing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">DEFRA Data Processing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/DEFRA/3_202409_Defra_DataAnalysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">DEFRA Data Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/DEFRA2/1_202412_Defra_Technology.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Space Horizon Scanning Network</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/videos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Recorded presentations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/Workshop/0_202502_workshop_SetUp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tester Workshop: Setup</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/Workshop/1_202502_workshop_DataDiscovery.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tester Workshop: Data Discovery</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/Workshop/2_202502_workshop_DataProcessing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tester Workshop: Data Processing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/Workshop/3_202502_workshop_DataVis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tester Workshop: Data Vis</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#exploring-the-resource-catalogue" id="toc-exploring-the-resource-catalogue" class="nav-link active" data-scroll-target="#exploring-the-resource-catalogue">Exploring the Resource Catalogue</a></li>
  <li><a href="#timeseries" id="toc-timeseries" class="nav-link" data-scroll-target="#timeseries">Timeseries</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">London Timeseries</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><strong>Description &amp; purpose</strong>: This Notebook is designed to demonstrate how to plot a timeseries using data held on the Earth Observation Data Hub. This notebook plots data for a point in Greater London.</p>
<p><strong>Author(s)</strong>: Alastair Graham, Dusan Figala</p>
<p><strong>Date created</strong>: 2025-12-09</p>
<p><strong>Date last modified</strong>: 2025-12-10</p>
<p><strong>Licence</strong>: This notebook is licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International</a>. The code is released using the <a href="https://www.tldrlegal.com/license/bsd-2-clause-license-freebsd">BSD-2-Clause</a> license.</p>
<p><span style="font-size:0.75em;"> Copyright (c) , All rights reserved.</span></p>
<p><span style="font-size:0.75em;"> Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span></p>
<p><span style="font-size:0.75em;"> Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution. THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS “AS IS” AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></p>
<p>The first thing to do is ensure that the most recent version of <code>pyeodh</code> is installed on your system. It is good practice to run the following cell if you have not installed <code>pyeodh</code> or have not used it in a while. The cell will also install the plotting and spatial libraries required.</p>
<div id="cell-4" class="cell" data-scrolled="true" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run this cell if pyeodh is not installed, or needs updating</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install <span class="op">--</span>upgrade pyeodh</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install hvplot shapely ipywidgets rasterio pyproj</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Requirement already satisfied: pyeodh in /opt/conda/lib/python3.12/site-packages (0.1.7)
Requirement already satisfied: ceda-datapoint&lt;0.5.0,&gt;=0.4.12 in /opt/conda/lib/python3.12/site-packages (from pyeodh) (0.4.12)
Requirement already satisfied: lxml==5.3.0 in /opt/conda/lib/python3.12/site-packages (from pyeodh) (5.3.0)
Requirement already satisfied: owslib&lt;0.32.0,&gt;=0.31.0 in /opt/conda/lib/python3.12/site-packages (from pyeodh) (0.31.0)
Requirement already satisfied: poetry&lt;2.0.0,&gt;=1.8.5 in /opt/conda/lib/python3.12/site-packages (from pyeodh) (1.8.5)
Requirement already satisfied: pystac&lt;2.0.0,&gt;=1.10.0 in /opt/conda/lib/python3.12/site-packages (from pyeodh) (1.13.0)
Requirement already satisfied: requests-oauthlib&lt;3.0.0,&gt;=2.0.0 in /opt/conda/lib/python3.12/site-packages (from pyeodh) (2.0.0)
Requirement already satisfied: zarr&lt;3,&gt;=2 in /opt/conda/lib/python3.12/site-packages (from pyeodh) (2.18.7)
Requirement already satisfied: aiohttp&lt;4.0.0,&gt;=3.11.7 in /opt/conda/lib/python3.12/site-packages (from ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (3.12.4)
Requirement already satisfied: cfapyx&lt;2026.0.0,&gt;=2025.2.27 in /opt/conda/lib/python3.12/site-packages (from ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (2025.3.18)
Requirement already satisfied: fsspec&lt;2025.0.0,&gt;=2024.9.0 in /opt/conda/lib/python3.12/site-packages (from ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (2024.12.0)
Requirement already satisfied: kerchunk&lt;0.3.0,&gt;=0.2.6 in /opt/conda/lib/python3.12/site-packages (from ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (0.2.7)
Requirement already satisfied: matplotlib&lt;4.0.0,&gt;=3.9.2 in /opt/conda/lib/python3.12/site-packages (from ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (3.10.3)
Requirement already satisfied: pystac-client&lt;0.8,&gt;=0.7 in /opt/conda/lib/python3.12/site-packages (from ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (0.7.7)
Requirement already satisfied: requests&lt;3.0.0,&gt;=2.32.3 in /opt/conda/lib/python3.12/site-packages (from ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (2.32.3)
Requirement already satisfied: rioxarray&lt;0.16.0,&gt;=0.15.0 in /opt/conda/lib/python3.12/site-packages (from ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (0.15.7)
Requirement already satisfied: xarray&lt;2025.0.0,&gt;=2024.6.0 in /opt/conda/lib/python3.12/site-packages (from ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (2024.11.0)
Requirement already satisfied: xdoctest&lt;2.0.0,&gt;=1.2.0 in /opt/conda/lib/python3.12/site-packages (from ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (1.2.0)
Requirement already satisfied: python-dateutil&gt;=1.5 in /opt/conda/lib/python3.12/site-packages (from owslib&lt;0.32.0,&gt;=0.31.0-&gt;pyeodh) (2.9.0.post0)
Requirement already satisfied: pytz in /opt/conda/lib/python3.12/site-packages (from owslib&lt;0.32.0,&gt;=0.31.0-&gt;pyeodh) (2025.1)
Requirement already satisfied: pyyaml in /opt/conda/lib/python3.12/site-packages (from owslib&lt;0.32.0,&gt;=0.31.0-&gt;pyeodh) (6.0.2)
Requirement already satisfied: build&lt;2.0.0,&gt;=1.0.3 in /opt/conda/lib/python3.12/site-packages (from poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (1.2.2.post1)
Requirement already satisfied: cachecontrol&lt;0.15.0,&gt;=0.14.0 in /opt/conda/lib/python3.12/site-packages (from cachecontrol[filecache]&lt;0.15.0,&gt;=0.14.0-&gt;poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (0.14.3)
Requirement already satisfied: cleo&lt;3.0.0,&gt;=2.1.0 in /opt/conda/lib/python3.12/site-packages (from poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (2.1.0)
Requirement already satisfied: crashtest&lt;0.5.0,&gt;=0.4.1 in /opt/conda/lib/python3.12/site-packages (from poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (0.4.1)
Requirement already satisfied: dulwich&lt;0.22.0,&gt;=0.21.2 in /opt/conda/lib/python3.12/site-packages (from poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (0.21.7)
Requirement already satisfied: fastjsonschema&lt;3.0.0,&gt;=2.18.0 in /opt/conda/lib/python3.12/site-packages (from poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (2.21.1)
Requirement already satisfied: installer&lt;0.8.0,&gt;=0.7.0 in /opt/conda/lib/python3.12/site-packages (from poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (0.7.0)
Requirement already satisfied: keyring&lt;25.0.0,&gt;=24.0.0 in /opt/conda/lib/python3.12/site-packages (from poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (24.3.1)
Requirement already satisfied: packaging&gt;=23.1 in /opt/conda/lib/python3.12/site-packages (from poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (24.2)
Requirement already satisfied: pexpect&lt;5.0.0,&gt;=4.7.0 in /opt/conda/lib/python3.12/site-packages (from poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (4.9.0)
Requirement already satisfied: pkginfo&lt;2.0,&gt;=1.12 in /opt/conda/lib/python3.12/site-packages (from poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (1.12.1.2)
Requirement already satisfied: platformdirs&lt;5,&gt;=3.0.0 in /opt/conda/lib/python3.12/site-packages (from poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (4.3.6)
Requirement already satisfied: poetry-core==1.9.1 in /opt/conda/lib/python3.12/site-packages (from poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (1.9.1)
Requirement already satisfied: poetry-plugin-export&lt;2.0.0,&gt;=1.6.0 in /opt/conda/lib/python3.12/site-packages (from poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (1.8.0)
Requirement already satisfied: pyproject-hooks&lt;2.0.0,&gt;=1.0.0 in /opt/conda/lib/python3.12/site-packages (from poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (1.2.0)
Requirement already satisfied: requests-toolbelt&lt;2.0.0,&gt;=1.0.0 in /opt/conda/lib/python3.12/site-packages (from poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (1.0.0)
Requirement already satisfied: shellingham&lt;2.0,&gt;=1.5 in /opt/conda/lib/python3.12/site-packages (from poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (1.5.4)
Requirement already satisfied: tomlkit&lt;1.0.0,&gt;=0.11.4 in /opt/conda/lib/python3.12/site-packages (from poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (0.13.2)
Requirement already satisfied: trove-classifiers&gt;=2022.5.19 in /opt/conda/lib/python3.12/site-packages (from poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (2025.5.9.12)
Requirement already satisfied: virtualenv&lt;21.0.0,&gt;=20.26.6 in /opt/conda/lib/python3.12/site-packages (from poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (20.31.2)
Requirement already satisfied: oauthlib&gt;=3.0.0 in /opt/conda/lib/python3.12/site-packages (from requests-oauthlib&lt;3.0.0,&gt;=2.0.0-&gt;pyeodh) (3.2.2)
Requirement already satisfied: asciitree in /opt/conda/lib/python3.12/site-packages (from zarr&lt;3,&gt;=2-&gt;pyeodh) (0.3.3)
Requirement already satisfied: numpy&gt;=1.24 in /opt/conda/lib/python3.12/site-packages (from zarr&lt;3,&gt;=2-&gt;pyeodh) (1.26.4)
Requirement already satisfied: fasteners in /opt/conda/lib/python3.12/site-packages (from zarr&lt;3,&gt;=2-&gt;pyeodh) (0.19)
Requirement already satisfied: numcodecs!=0.14.0,!=0.14.1,&lt;0.16,&gt;=0.10.0 in /opt/conda/lib/python3.12/site-packages (from zarr&lt;3,&gt;=2-&gt;pyeodh) (0.15.1)
Requirement already satisfied: aiohappyeyeballs&gt;=2.5.0 in /opt/conda/lib/python3.12/site-packages (from aiohttp&lt;4.0.0,&gt;=3.11.7-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (2.6.1)
Requirement already satisfied: aiosignal&gt;=1.1.2 in /opt/conda/lib/python3.12/site-packages (from aiohttp&lt;4.0.0,&gt;=3.11.7-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (1.3.2)
Requirement already satisfied: attrs&gt;=17.3.0 in /opt/conda/lib/python3.12/site-packages (from aiohttp&lt;4.0.0,&gt;=3.11.7-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (25.1.0)
Requirement already satisfied: frozenlist&gt;=1.1.1 in /opt/conda/lib/python3.12/site-packages (from aiohttp&lt;4.0.0,&gt;=3.11.7-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (1.6.0)
Requirement already satisfied: multidict&lt;7.0,&gt;=4.5 in /opt/conda/lib/python3.12/site-packages (from aiohttp&lt;4.0.0,&gt;=3.11.7-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (6.4.4)
Requirement already satisfied: propcache&gt;=0.2.0 in /opt/conda/lib/python3.12/site-packages (from aiohttp&lt;4.0.0,&gt;=3.11.7-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (0.3.1)
Requirement already satisfied: yarl&lt;2.0,&gt;=1.17.0 in /opt/conda/lib/python3.12/site-packages (from aiohttp&lt;4.0.0,&gt;=3.11.7-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (1.20.0)
Requirement already satisfied: msgpack&lt;2.0.0,&gt;=0.5.2 in /opt/conda/lib/python3.12/site-packages (from cachecontrol&lt;0.15.0,&gt;=0.14.0-&gt;cachecontrol[filecache]&lt;0.15.0,&gt;=0.14.0-&gt;poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (1.1.0)
Requirement already satisfied: filelock&gt;=3.8.0 in /opt/conda/lib/python3.12/site-packages (from cachecontrol[filecache]&lt;0.15.0,&gt;=0.14.0-&gt;poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (3.18.0)
Requirement already satisfied: arraypartition&lt;2.0.0,&gt;=1.1.2 in /opt/conda/lib/python3.12/site-packages (from cfapyx&lt;2026.0.0,&gt;=2025.2.27-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (1.1.2)
Requirement already satisfied: dask&lt;2025,&gt;=2024 in /opt/conda/lib/python3.12/site-packages (from cfapyx&lt;2026.0.0,&gt;=2025.2.27-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (2024.12.1)
Requirement already satisfied: netCDF4&lt;=1.6.5 in /opt/conda/lib/python3.12/site-packages (from cfapyx&lt;2026.0.0,&gt;=2025.2.27-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (1.6.5)
Requirement already satisfied: rapidfuzz&lt;4.0.0,&gt;=3.0.0 in /opt/conda/lib/python3.12/site-packages (from cleo&lt;3.0.0,&gt;=2.1.0-&gt;poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (3.13.0)
Requirement already satisfied: urllib3&gt;=1.25 in /opt/conda/lib/python3.12/site-packages (from dulwich&lt;0.22.0,&gt;=0.21.2-&gt;poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (2.3.0)
Requirement already satisfied: ujson in /opt/conda/lib/python3.12/site-packages (from kerchunk&lt;0.3.0,&gt;=0.2.6-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (5.10.0)
Requirement already satisfied: jaraco.classes in /opt/conda/lib/python3.12/site-packages (from keyring&lt;25.0.0,&gt;=24.0.0-&gt;poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (3.4.0)
Requirement already satisfied: SecretStorage&gt;=3.2 in /opt/conda/lib/python3.12/site-packages (from keyring&lt;25.0.0,&gt;=24.0.0-&gt;poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (3.3.3)
Requirement already satisfied: jeepney&gt;=0.4.2 in /opt/conda/lib/python3.12/site-packages (from keyring&lt;25.0.0,&gt;=24.0.0-&gt;poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (0.9.0)
Requirement already satisfied: contourpy&gt;=1.0.1 in /opt/conda/lib/python3.12/site-packages (from matplotlib&lt;4.0.0,&gt;=3.9.2-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (1.3.2)
Requirement already satisfied: cycler&gt;=0.10 in /opt/conda/lib/python3.12/site-packages (from matplotlib&lt;4.0.0,&gt;=3.9.2-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (0.12.1)
Requirement already satisfied: fonttools&gt;=4.22.0 in /opt/conda/lib/python3.12/site-packages (from matplotlib&lt;4.0.0,&gt;=3.9.2-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (4.58.1)
Requirement already satisfied: kiwisolver&gt;=1.3.1 in /opt/conda/lib/python3.12/site-packages (from matplotlib&lt;4.0.0,&gt;=3.9.2-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (1.4.8)
Requirement already satisfied: pillow&gt;=8 in /opt/conda/lib/python3.12/site-packages (from matplotlib&lt;4.0.0,&gt;=3.9.2-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (11.2.1)
Requirement already satisfied: pyparsing&gt;=2.3.1 in /opt/conda/lib/python3.12/site-packages (from matplotlib&lt;4.0.0,&gt;=3.9.2-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (3.2.3)
Requirement already satisfied: deprecated in /opt/conda/lib/python3.12/site-packages (from numcodecs!=0.14.0,!=0.14.1,&lt;0.16,&gt;=0.10.0-&gt;zarr&lt;3,&gt;=2-&gt;pyeodh) (1.2.18)
Requirement already satisfied: ptyprocess&gt;=0.5 in /opt/conda/lib/python3.12/site-packages (from pexpect&lt;5.0.0,&gt;=4.7.0-&gt;poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (0.7.0)
Requirement already satisfied: six&gt;=1.5 in /opt/conda/lib/python3.12/site-packages (from python-dateutil&gt;=1.5-&gt;owslib&lt;0.32.0,&gt;=0.31.0-&gt;pyeodh) (1.17.0)
Requirement already satisfied: charset_normalizer&lt;4,&gt;=2 in /opt/conda/lib/python3.12/site-packages (from requests&lt;3.0.0,&gt;=2.32.3-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (3.4.1)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /opt/conda/lib/python3.12/site-packages (from requests&lt;3.0.0,&gt;=2.32.3-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (3.10)
Requirement already satisfied: certifi&gt;=2017.4.17 in /opt/conda/lib/python3.12/site-packages (from requests&lt;3.0.0,&gt;=2.32.3-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (2024.12.14)
Requirement already satisfied: rasterio&gt;=1.3 in /opt/conda/lib/python3.12/site-packages (from rioxarray&lt;0.16.0,&gt;=0.15.0-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (1.4.3)
Requirement already satisfied: pyproj&gt;=3.3 in /opt/conda/lib/python3.12/site-packages (from rioxarray&lt;0.16.0,&gt;=0.15.0-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (3.7.1)
Requirement already satisfied: distlib&lt;1,&gt;=0.3.7 in /opt/conda/lib/python3.12/site-packages (from virtualenv&lt;21.0.0,&gt;=20.26.6-&gt;poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (0.3.9)
Requirement already satisfied: pandas&gt;=2.1 in /opt/conda/lib/python3.12/site-packages (from xarray&lt;2025.0.0,&gt;=2024.6.0-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (2.2.3)
Requirement already satisfied: click&gt;=8.1 in /opt/conda/lib/python3.12/site-packages (from dask&lt;2025,&gt;=2024-&gt;cfapyx&lt;2026.0.0,&gt;=2025.2.27-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (8.2.1)
Requirement already satisfied: cloudpickle&gt;=3.0.0 in /opt/conda/lib/python3.12/site-packages (from dask&lt;2025,&gt;=2024-&gt;cfapyx&lt;2026.0.0,&gt;=2025.2.27-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (3.1.1)
Requirement already satisfied: partd&gt;=1.4.0 in /opt/conda/lib/python3.12/site-packages (from dask&lt;2025,&gt;=2024-&gt;cfapyx&lt;2026.0.0,&gt;=2025.2.27-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (1.4.2)
Requirement already satisfied: toolz&gt;=0.10.0 in /opt/conda/lib/python3.12/site-packages (from dask&lt;2025,&gt;=2024-&gt;cfapyx&lt;2026.0.0,&gt;=2025.2.27-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (1.0.0)
Requirement already satisfied: cftime in /opt/conda/lib/python3.12/site-packages (from netCDF4&lt;=1.6.5-&gt;cfapyx&lt;2026.0.0,&gt;=2025.2.27-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (1.6.4.post1)
Requirement already satisfied: tzdata&gt;=2022.7 in /opt/conda/lib/python3.12/site-packages (from pandas&gt;=2.1-&gt;xarray&lt;2025.0.0,&gt;=2024.6.0-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (2025.2)
Requirement already satisfied: jsonschema~=4.18 in /opt/conda/lib/python3.12/site-packages (from pystac[validation]&gt;=1.10.0-&gt;pystac-client&lt;0.8,&gt;=0.7-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (4.23.0)
Requirement already satisfied: affine in /opt/conda/lib/python3.12/site-packages (from rasterio&gt;=1.3-&gt;rioxarray&lt;0.16.0,&gt;=0.15.0-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (2.4.0)
Requirement already satisfied: cligj&gt;=0.5 in /opt/conda/lib/python3.12/site-packages (from rasterio&gt;=1.3-&gt;rioxarray&lt;0.16.0,&gt;=0.15.0-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (0.7.2)
Requirement already satisfied: click-plugins in /opt/conda/lib/python3.12/site-packages (from rasterio&gt;=1.3-&gt;rioxarray&lt;0.16.0,&gt;=0.15.0-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (1.1.1)
Requirement already satisfied: cryptography&gt;=2.0 in /opt/conda/lib/python3.12/site-packages (from SecretStorage&gt;=3.2-&gt;keyring&lt;25.0.0,&gt;=24.0.0-&gt;poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (44.0.0)
Requirement already satisfied: wrapt&lt;2,&gt;=1.10 in /opt/conda/lib/python3.12/site-packages (from deprecated-&gt;numcodecs!=0.14.0,!=0.14.1,&lt;0.16,&gt;=0.10.0-&gt;zarr&lt;3,&gt;=2-&gt;pyeodh) (1.17.2)
Requirement already satisfied: more-itertools in /opt/conda/lib/python3.12/site-packages (from jaraco.classes-&gt;keyring&lt;25.0.0,&gt;=24.0.0-&gt;poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (10.7.0)
Requirement already satisfied: cffi&gt;=1.12 in /opt/conda/lib/python3.12/site-packages (from cryptography&gt;=2.0-&gt;SecretStorage&gt;=3.2-&gt;keyring&lt;25.0.0,&gt;=24.0.0-&gt;poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (1.17.1)
Requirement already satisfied: jsonschema-specifications&gt;=2023.03.6 in /opt/conda/lib/python3.12/site-packages (from jsonschema~=4.18-&gt;pystac[validation]&gt;=1.10.0-&gt;pystac-client&lt;0.8,&gt;=0.7-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (2023.7.1)
Requirement already satisfied: referencing&gt;=0.28.4 in /opt/conda/lib/python3.12/site-packages (from jsonschema~=4.18-&gt;pystac[validation]&gt;=1.10.0-&gt;pystac-client&lt;0.8,&gt;=0.7-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (0.30.2)
Requirement already satisfied: rpds-py&gt;=0.7.1 in /opt/conda/lib/python3.12/site-packages (from jsonschema~=4.18-&gt;pystac[validation]&gt;=1.10.0-&gt;pystac-client&lt;0.8,&gt;=0.7-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (0.22.3)
Requirement already satisfied: locket in /opt/conda/lib/python3.12/site-packages (from partd&gt;=1.4.0-&gt;dask&lt;2025,&gt;=2024-&gt;cfapyx&lt;2026.0.0,&gt;=2025.2.27-&gt;ceda-datapoint&lt;0.5.0,&gt;=0.4.12-&gt;pyeodh) (1.0.0)
Requirement already satisfied: pycparser in /opt/conda/lib/python3.12/site-packages (from cffi&gt;=1.12-&gt;cryptography&gt;=2.0-&gt;SecretStorage&gt;=3.2-&gt;keyring&lt;25.0.0,&gt;=24.0.0-&gt;poetry&lt;2.0.0,&gt;=1.8.5-&gt;pyeodh) (2.22)
Requirement already satisfied: hvplot in /opt/conda/lib/python3.12/site-packages (0.12.1)
Requirement already satisfied: shapely in /opt/conda/lib/python3.12/site-packages (2.0.7)
Requirement already satisfied: ipywidgets in /opt/conda/lib/python3.12/site-packages (8.1.8)
Requirement already satisfied: rasterio in /opt/conda/lib/python3.12/site-packages (1.4.3)
Requirement already satisfied: pyproj in /opt/conda/lib/python3.12/site-packages (3.7.1)
Requirement already satisfied: bokeh&gt;=3.1 in /opt/conda/lib/python3.12/site-packages (from hvplot) (3.8.1)
Requirement already satisfied: colorcet&gt;=2 in /opt/conda/lib/python3.12/site-packages (from hvplot) (3.1.0)
Requirement already satisfied: holoviews&gt;=1.19.0 in /opt/conda/lib/python3.12/site-packages (from hvplot) (1.22.1)
Requirement already satisfied: numpy&gt;=1.21 in /opt/conda/lib/python3.12/site-packages (from hvplot) (1.26.4)
Requirement already satisfied: packaging in /opt/conda/lib/python3.12/site-packages (from hvplot) (24.2)
Requirement already satisfied: pandas&gt;=1.3 in /opt/conda/lib/python3.12/site-packages (from hvplot) (2.2.3)
Requirement already satisfied: panel&gt;=1.0 in /opt/conda/lib/python3.12/site-packages (from hvplot) (1.8.4)
Requirement already satisfied: param&lt;3.0,&gt;=1.12.0 in /opt/conda/lib/python3.12/site-packages (from hvplot) (2.3.1)
Requirement already satisfied: comm&gt;=0.1.3 in /opt/conda/lib/python3.12/site-packages (from ipywidgets) (0.2.2)
Requirement already satisfied: ipython&gt;=6.1.0 in /opt/conda/lib/python3.12/site-packages (from ipywidgets) (8.32.0)
Requirement already satisfied: traitlets&gt;=4.3.1 in /opt/conda/lib/python3.12/site-packages (from ipywidgets) (5.14.3)
Requirement already satisfied: widgetsnbextension~=4.0.14 in /opt/conda/lib/python3.12/site-packages (from ipywidgets) (4.0.15)
Requirement already satisfied: jupyterlab_widgets~=3.0.15 in /opt/conda/lib/python3.12/site-packages (from ipywidgets) (3.0.16)
Requirement already satisfied: affine in /opt/conda/lib/python3.12/site-packages (from rasterio) (2.4.0)
Requirement already satisfied: attrs in /opt/conda/lib/python3.12/site-packages (from rasterio) (25.1.0)
Requirement already satisfied: certifi in /opt/conda/lib/python3.12/site-packages (from rasterio) (2024.12.14)
Requirement already satisfied: click&gt;=4.0 in /opt/conda/lib/python3.12/site-packages (from rasterio) (8.2.1)
Requirement already satisfied: cligj&gt;=0.5 in /opt/conda/lib/python3.12/site-packages (from rasterio) (0.7.2)
Requirement already satisfied: click-plugins in /opt/conda/lib/python3.12/site-packages (from rasterio) (1.1.1)
Requirement already satisfied: pyparsing in /opt/conda/lib/python3.12/site-packages (from rasterio) (3.2.3)
Requirement already satisfied: Jinja2&gt;=2.9 in /opt/conda/lib/python3.12/site-packages (from bokeh&gt;=3.1-&gt;hvplot) (3.1.5)
Requirement already satisfied: contourpy&gt;=1.2 in /opt/conda/lib/python3.12/site-packages (from bokeh&gt;=3.1-&gt;hvplot) (1.3.2)
Requirement already satisfied: narwhals&gt;=1.13 in /opt/conda/lib/python3.12/site-packages (from bokeh&gt;=3.1-&gt;hvplot) (2.13.0)
Requirement already satisfied: pillow&gt;=7.1.0 in /opt/conda/lib/python3.12/site-packages (from bokeh&gt;=3.1-&gt;hvplot) (11.2.1)
Requirement already satisfied: PyYAML&gt;=3.10 in /opt/conda/lib/python3.12/site-packages (from bokeh&gt;=3.1-&gt;hvplot) (6.0.2)
Requirement already satisfied: tornado&gt;=6.2 in /opt/conda/lib/python3.12/site-packages (from bokeh&gt;=3.1-&gt;hvplot) (6.4.2)
Requirement already satisfied: xyzservices&gt;=2021.09.1 in /opt/conda/lib/python3.12/site-packages (from bokeh&gt;=3.1-&gt;hvplot) (2025.11.0)
Requirement already satisfied: python-dateutil&gt;=2.8.2 in /opt/conda/lib/python3.12/site-packages (from holoviews&gt;=1.19.0-&gt;hvplot) (2.9.0.post0)
Requirement already satisfied: pyviz-comms&gt;=2.1 in /opt/conda/lib/python3.12/site-packages (from holoviews&gt;=1.19.0-&gt;hvplot) (3.0.6)
Requirement already satisfied: decorator in /opt/conda/lib/python3.12/site-packages (from ipython&gt;=6.1.0-&gt;ipywidgets) (5.1.1)
Requirement already satisfied: jedi&gt;=0.16 in /opt/conda/lib/python3.12/site-packages (from ipython&gt;=6.1.0-&gt;ipywidgets) (0.19.2)
Requirement already satisfied: matplotlib-inline in /opt/conda/lib/python3.12/site-packages (from ipython&gt;=6.1.0-&gt;ipywidgets) (0.1.7)
Requirement already satisfied: pexpect&gt;4.3 in /opt/conda/lib/python3.12/site-packages (from ipython&gt;=6.1.0-&gt;ipywidgets) (4.9.0)
Requirement already satisfied: prompt_toolkit&lt;3.1.0,&gt;=3.0.41 in /opt/conda/lib/python3.12/site-packages (from ipython&gt;=6.1.0-&gt;ipywidgets) (3.0.50)
Requirement already satisfied: pygments&gt;=2.4.0 in /opt/conda/lib/python3.12/site-packages (from ipython&gt;=6.1.0-&gt;ipywidgets) (2.19.1)
Requirement already satisfied: stack_data in /opt/conda/lib/python3.12/site-packages (from ipython&gt;=6.1.0-&gt;ipywidgets) (0.6.3)
Requirement already satisfied: pytz&gt;=2020.1 in /opt/conda/lib/python3.12/site-packages (from pandas&gt;=1.3-&gt;hvplot) (2025.1)
Requirement already satisfied: tzdata&gt;=2022.7 in /opt/conda/lib/python3.12/site-packages (from pandas&gt;=1.3-&gt;hvplot) (2025.2)
Requirement already satisfied: bleach in /opt/conda/lib/python3.12/site-packages (from panel&gt;=1.0-&gt;hvplot) (6.2.0)
Requirement already satisfied: linkify-it-py in /opt/conda/lib/python3.12/site-packages (from panel&gt;=1.0-&gt;hvplot) (2.0.3)
Requirement already satisfied: markdown in /opt/conda/lib/python3.12/site-packages (from panel&gt;=1.0-&gt;hvplot) (3.10)
Requirement already satisfied: markdown-it-py in /opt/conda/lib/python3.12/site-packages (from panel&gt;=1.0-&gt;hvplot) (3.0.0)
Requirement already satisfied: mdit-py-plugins in /opt/conda/lib/python3.12/site-packages (from panel&gt;=1.0-&gt;hvplot) (0.5.0)
Requirement already satisfied: requests in /opt/conda/lib/python3.12/site-packages (from panel&gt;=1.0-&gt;hvplot) (2.32.3)
Requirement already satisfied: tqdm in /opt/conda/lib/python3.12/site-packages (from panel&gt;=1.0-&gt;hvplot) (4.67.1)
Requirement already satisfied: typing-extensions in /opt/conda/lib/python3.12/site-packages (from panel&gt;=1.0-&gt;hvplot) (4.12.2)
Requirement already satisfied: parso&lt;0.9.0,&gt;=0.8.4 in /opt/conda/lib/python3.12/site-packages (from jedi&gt;=0.16-&gt;ipython&gt;=6.1.0-&gt;ipywidgets) (0.8.4)
Requirement already satisfied: MarkupSafe&gt;=2.0 in /opt/conda/lib/python3.12/site-packages (from Jinja2&gt;=2.9-&gt;bokeh&gt;=3.1-&gt;hvplot) (3.0.2)
Requirement already satisfied: ptyprocess&gt;=0.5 in /opt/conda/lib/python3.12/site-packages (from pexpect&gt;4.3-&gt;ipython&gt;=6.1.0-&gt;ipywidgets) (0.7.0)
Requirement already satisfied: wcwidth in /opt/conda/lib/python3.12/site-packages (from prompt_toolkit&lt;3.1.0,&gt;=3.0.41-&gt;ipython&gt;=6.1.0-&gt;ipywidgets) (0.2.13)
Requirement already satisfied: six&gt;=1.5 in /opt/conda/lib/python3.12/site-packages (from python-dateutil&gt;=2.8.2-&gt;holoviews&gt;=1.19.0-&gt;hvplot) (1.17.0)
Requirement already satisfied: webencodings in /opt/conda/lib/python3.12/site-packages (from bleach-&gt;panel&gt;=1.0-&gt;hvplot) (0.5.1)
Requirement already satisfied: uc-micro-py in /opt/conda/lib/python3.12/site-packages (from linkify-it-py-&gt;panel&gt;=1.0-&gt;hvplot) (1.0.3)
Requirement already satisfied: mdurl~=0.1 in /opt/conda/lib/python3.12/site-packages (from markdown-it-py-&gt;panel&gt;=1.0-&gt;hvplot) (0.1.2)
Requirement already satisfied: charset_normalizer&lt;4,&gt;=2 in /opt/conda/lib/python3.12/site-packages (from requests-&gt;panel&gt;=1.0-&gt;hvplot) (3.4.1)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /opt/conda/lib/python3.12/site-packages (from requests-&gt;panel&gt;=1.0-&gt;hvplot) (3.10)
Requirement already satisfied: urllib3&lt;3,&gt;=1.21.1 in /opt/conda/lib/python3.12/site-packages (from requests-&gt;panel&gt;=1.0-&gt;hvplot) (2.3.0)
Requirement already satisfied: executing&gt;=1.2.0 in /opt/conda/lib/python3.12/site-packages (from stack_data-&gt;ipython&gt;=6.1.0-&gt;ipywidgets) (2.1.0)
Requirement already satisfied: asttokens&gt;=2.1.0 in /opt/conda/lib/python3.12/site-packages (from stack_data-&gt;ipython&gt;=6.1.0-&gt;ipywidgets) (3.0.0)
Requirement already satisfied: pure_eval in /opt/conda/lib/python3.12/site-packages (from stack_data-&gt;ipython&gt;=6.1.0-&gt;ipywidgets) (0.2.3)</code></pre>
</div>
</div>
<section id="exploring-the-resource-catalogue" class="level1">
<h1>Exploring the Resource Catalogue</h1>
<p>Now we are ready to investigate the Resource Catalogue. First off, we need to import the packages we’ll use.</p>
<div id="cell-6" class="cell" data-execution_count="2">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import the Python API Client</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pyeodh</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Import all other packages</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shapely </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> rasterio</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> hvplot.pandas</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pyproj <span class="im">import</span> Transformer</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> urllib.request</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> PIL <span class="im">import</span> Image</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> io <span class="im">import</span> BytesIO</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> IPython.display <span class="im">import</span> display</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> ipywidgets <span class="im">import</span> interact</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<script type="esms-options">{"shimMode": true}</script><style>*[data-root-id],
*[data-root-id] > * {
  box-sizing: border-box;
  font-family: var(--jp-ui-font-family);
  font-size: var(--jp-ui-font-size1);
  color: var(--vscode-editor-foreground, var(--jp-ui-font-color1));
}

/* Override VSCode background color */
.cell-output-ipywidget-background:has(
  > .cell-output-ipywidget-background > .lm-Widget > *[data-root-id]
),
.cell-output-ipywidget-background:has(> .lm-Widget > *[data-root-id]) {
  background-color: transparent !important;
}
</style>
</div>
<div class="cell-output cell-output-display">
<script type="application/javascript">
(function(root) {
  function now() {
    return new Date();
  }

  const force = true;
  const version = '3.8.1'.replace('rc', '-rc.').replace('.dev', '-dev.');
  const reloading = false;
  const Bokeh = root.Bokeh;
  const BK_RE = /^https:\/\/cdn\.bokeh\.org\/bokeh\/(release|dev)\/bokeh-/;
  const PN_RE = /^https:\/\/cdn\.holoviz\.org\/panel\/[^/]+\/dist\/panel/i;

  // Set a timeout for this load but only if we are not already initializing
  if (typeof (root._bokeh_timeout) === "undefined" || (force || !root._bokeh_is_initializing)) {
    root._bokeh_timeout = Date.now() + 5000;
    root._bokeh_failed_load = false;
  }

  function run_callbacks() {
    try {
      root._bokeh_onload_callbacks.forEach(function(callback) {
        if (callback != null)
          callback();
      });
    } finally {
      delete root._bokeh_onload_callbacks;
    }
    console.debug("Bokeh: all callbacks have finished");
  }

  function load_libs(css_urls, js_urls, js_modules, js_exports, Bokeh, callback) {
    if (css_urls == null) css_urls = [];
    if (js_urls == null) js_urls = [];
    if (js_modules == null) js_modules = [];
    if (js_exports == null) js_exports = {};

    root._bokeh_onload_callbacks.push(callback);

    if (root._bokeh_is_loading > 0) {
      // Don't load bokeh if it is still initializing
      console.debug("Bokeh: BokehJS is being loaded, scheduling callback at", now());
      return null;
    } else if (js_urls.length === 0 && js_modules.length === 0 && Object.keys(js_exports).length === 0) {
      // There is nothing to load
      run_callbacks();
      return null;
    }

    function on_load() {
      root._bokeh_is_loading--;
      if (root._bokeh_is_loading === 0) {
        console.debug("Bokeh: all BokehJS libraries/stylesheets loaded");
        run_callbacks()
      }
    }
    window._bokeh_on_load = on_load

    function on_error(e) {
      const src_el = e.srcElement
      console.error("failed to load " + (src_el.href || src_el.src));
    }

    const skip = [];
    if (window.requirejs) {
      window.requirejs.config({'packages': {}, 'paths': {}, 'shim': {}});
      root._bokeh_is_loading = css_urls.length + 0;
    } else {
      root._bokeh_is_loading = css_urls.length + js_urls.length + js_modules.length + Object.keys(js_exports).length;
    }

    const existing_stylesheets = []
    const links = document.getElementsByTagName('link')
    for (let i = 0; i < links.length; i++) {
      const link = links[i]
      if (link.href != null) {
        existing_stylesheets.push(link.href)
      }
    }
    for (let i = 0; i < css_urls.length; i++) {
      const url = css_urls[i];
      const escaped = encodeURI(url)
      if (existing_stylesheets.indexOf(escaped) !== -1) {
        on_load()
        continue;
      }
      const element = document.createElement("link");
      element.onload = on_load;
      element.onerror = on_error;
      element.rel = "stylesheet";
      element.type = "text/css";
      element.href = url;
      console.debug("Bokeh: injecting link tag for BokehJS stylesheet: ", url);
      document.body.appendChild(element);
    }    var existing_scripts = []
    const scripts = document.getElementsByTagName('script')
    for (let i = 0; i < scripts.length; i++) {
      var script = scripts[i]
      if (script.src != null) {
        existing_scripts.push(script.src)
      }
    }
    for (let i = 0; i < js_urls.length; i++) {
      const url = js_urls[i];
      const escaped = encodeURI(url)
      const shouldSkip = skip.includes(escaped) || existing_scripts.includes(escaped)
      const isBokehOrPanel = BK_RE.test(escaped) || PN_RE.test(escaped)
      const missingOrBroken = Bokeh == null || Bokeh.Panel == null || (Bokeh.version != version && !Bokeh.versions?.has(version)) || Bokeh.versions?.get(version).Panel == null;
      if (shouldSkip && !(isBokehOrPanel && missingOrBroken)) {
        if (!window.requirejs) {
          on_load();
        }
        continue;
      }
      const element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error;
      element.async = false;
      element.src = url;
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
    for (let i = 0; i < js_modules.length; i++) {
      const url = js_modules[i];
      const escaped = encodeURI(url)
      if (skip.indexOf(escaped) !== -1 || existing_scripts.indexOf(escaped) !== -1) {
        if (!window.requirejs) {
          on_load();
        }
        continue;
      }
      var element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error;
      element.async = false;
      element.src = url;
      element.type = "module";
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
    for (const name in js_exports) {
      const url = js_exports[name];
      const escaped = encodeURI(url)
      if (skip.indexOf(escaped) >= 0 || root[name] != null) {
        if (!window.requirejs) {
          on_load();
        }
        continue;
      }
      var element = document.createElement('script');
      element.onerror = on_error;
      element.async = false;
      element.type = "module";
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      element.textContent = `
      import ${name} from "${url}"
      window.${name} = ${name}
      window._bokeh_on_load()
      `
      document.head.appendChild(element);
    }
    if (!js_urls.length && !js_modules.length) {
      on_load()
    }
  };

  function inject_raw_css(css) {
    const element = document.createElement("style");
    element.appendChild(document.createTextNode(css));
    document.body.appendChild(element);
  }

  const js_urls = ["https://cdn.holoviz.org/panel/1.8.4/dist/bundled/reactiveesm/es-module-shims@^1.10.0/dist/es-module-shims.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-3.8.1.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-gl-3.8.1.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.8.1.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.8.1.min.js", "https://cdn.holoviz.org/panel/1.8.4/dist/panel.min.js"];
  const js_modules = [];
  const js_exports = {};
  const css_urls = [];
  const inline_js = [    function(Bokeh) {
      Bokeh.set_log_level("info");
    },
function(Bokeh) {} // ensure no trailing comma for IE
  ];

  function run_inline_js() {
    if ((root.Bokeh !== undefined) || (force === true)) {
      for (let i = 0; i < inline_js.length; i++) {
        try {
          inline_js[i].call(root, root.Bokeh);
        } catch(e) {
          if (!reloading) {
            throw e;
          }
        }
      }
    } else if (Date.now() < root._bokeh_timeout) {
      setTimeout(run_inline_js, 100);
    } else if (!root._bokeh_failed_load) {
      console.log("Bokeh: BokehJS failed to load within specified timeout.");
      root._bokeh_failed_load = true;
    }
    root._bokeh_is_initializing = false;
  }

  function load_or_wait() {
    // Implement a backoff loop that tries to ensure we do not load multiple
    // versions of Bokeh and its dependencies at the same time.
    // In recent versions we use the root._bokeh_is_initializing flag
    // to determine whether there is an ongoing attempt to initialize
    // bokeh, however for backward compatibility we also try to ensure
    // that we do not start loading a newer (Panel>=1.0 and Bokeh>3) version
    // before older versions are fully initialized.
    if (root._bokeh_is_initializing && Date.now() > root._bokeh_timeout) {
      // If the timeout and bokeh was not successfully loaded we reset
      // everything and try loading again
      root._bokeh_timeout = Date.now() + 5000;
      root._bokeh_is_initializing = false;
      root._bokeh_onload_callbacks = undefined;
      root._bokeh_is_loading = 0;
      console.log("Bokeh: BokehJS was loaded multiple times but one version failed to initialize.");
      load_or_wait();
    } else if (root._bokeh_is_initializing || (typeof root._bokeh_is_initializing === "undefined" && root._bokeh_onload_callbacks !== undefined)) {
      setTimeout(load_or_wait, 100);
    } else {
      root._bokeh_is_initializing = true;
      root._bokeh_onload_callbacks = [];
      const bokeh_loaded = Bokeh != null && ((Bokeh.version === version && Bokeh.Panel) || (Bokeh.versions?.has(version) && Bokeh.versions.get(version).Panel));
      if (!reloading && !bokeh_loaded) {
        if (root.Bokeh) {
          root.Bokeh = undefined;
        }
        console.debug("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
      }
      load_libs(css_urls, js_urls, js_modules, js_exports, Bokeh, function() {
        console.debug("Bokeh: BokehJS plotting callback run at", now());
        run_inline_js();
        if (Bokeh != undefined && !reloading) {
          const NewBokeh = root.Bokeh;
          if (Bokeh.versions === undefined) {
            Bokeh.versions = new Map();
          }
          if (NewBokeh.version !== Bokeh.version) {
            Bokeh[NewBokeh.version] = NewBokeh;
            Bokeh.versions.set(NewBokeh.version, NewBokeh);
          }
          root.Bokeh = Bokeh;
        }
      });
    }
  }
  // Give older versions of the autoload script a head-start to ensure
  // they initialize before we start loading newer version.
  setTimeout(load_or_wait, 100)
}(window));
</script>
</div>
<div class="cell-output cell-output-display">
<script type="application/javascript">

if ((window.PyViz === undefined) || (window.PyViz instanceof HTMLElement)) {
  window.PyViz = {comms: {}, comm_status:{}, kernels:{}, receivers: {}, plot_index: []}
}


    function JupyterCommManager() {
    }

    JupyterCommManager.prototype.register_target = function(plot_id, comm_id, msg_handler) {
      if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
        var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
        comm_manager.register_target(comm_id, function(comm) {
          comm.on_msg(msg_handler);
        });
      } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
        window.PyViz.kernels[plot_id].registerCommTarget(comm_id, function(comm) {
          comm.onMsg = msg_handler;
        });
      } else if (typeof google != 'undefined' && google.colab.kernel != null) {
        google.colab.kernel.comms.registerTarget(comm_id, (comm) => {
          var messages = comm.messages[Symbol.asyncIterator]();
          function processIteratorResult(result) {
            var message = result.value;
            var content = {data: message.data, comm_id};
            var buffers = []
            for (var buffer of message.buffers || []) {
              buffers.push(new DataView(buffer))
            }
            var metadata = message.metadata || {};
            var msg = {content, buffers, metadata}
            msg_handler(msg);
            return messages.next().then(processIteratorResult);
          }
          return messages.next().then(processIteratorResult);
        })
      }
    }

    JupyterCommManager.prototype.get_client_comm = function(plot_id, comm_id, msg_handler) {
      if (comm_id in window.PyViz.comms) {
        return window.PyViz.comms[comm_id];
      } else if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
        var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
        var comm = comm_manager.new_comm(comm_id, {}, {}, {}, comm_id);
        if (msg_handler) {
          comm.on_msg(msg_handler);
        }
      } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
        var comm = window.PyViz.kernels[plot_id].connectToComm(comm_id);
        let retries = 0;
        const open = () => {
          if (comm.active) {
            comm.open();
          } else if (retries > 3) {
            console.warn('Comm target never activated')
          } else {
            retries += 1
            setTimeout(open, 500)
          }
        }
        if (comm.active) {
          comm.open();
        } else {
          setTimeout(open, 500)
        }
        if (msg_handler) {
          comm.onMsg = msg_handler;
        }
      } else if (typeof google != 'undefined' && google.colab.kernel != null) {
        var comm_promise = google.colab.kernel.comms.open(comm_id)
        comm_promise.then((comm) => {
          window.PyViz.comms[comm_id] = comm;
          if (msg_handler) {
            var messages = comm.messages[Symbol.asyncIterator]();
            function processIteratorResult(result) {
              var message = result.value;
              var content = {data: message.data};
              var metadata = message.metadata || {comm_id};
              var msg = {content, metadata}
              msg_handler(msg);
              return messages.next().then(processIteratorResult);
            }
            return messages.next().then(processIteratorResult);
          }
        })
        var sendClosure = (data, metadata, buffers, disposeOnDone) => {
          return comm_promise.then((comm) => {
            comm.send(data, metadata, buffers, disposeOnDone);
          });
        };
        var comm = {
          send: sendClosure
        };
      }
      window.PyViz.comms[comm_id] = comm;
      return comm;
    }
    window.PyViz.comm_manager = new JupyterCommManager();
    


var JS_MIME_TYPE = 'application/javascript';
var HTML_MIME_TYPE = 'text/html';
var EXEC_MIME_TYPE = 'application/vnd.holoviews_exec.v0+json';
var CLASS_NAME = 'output';

/**
 * Render data to the DOM node
 */
function render(props, node) {
  var div = document.createElement("div");
  var script = document.createElement("script");
  node.appendChild(div);
  node.appendChild(script);
}

/**
 * Handle when a new output is added
 */
function handle_add_output(event, handle) {
  var output_area = handle.output_area;
  var output = handle.output;
  if ((output.data == undefined) || (!output.data.hasOwnProperty(EXEC_MIME_TYPE))) {
    return
  }
  var id = output.metadata[EXEC_MIME_TYPE]["id"];
  var toinsert = output_area.element.find("." + CLASS_NAME.split(' ')[0]);
  if (id !== undefined) {
    var nchildren = toinsert.length;
    var html_node = toinsert[nchildren-1].children[0];
    html_node.innerHTML = output.data[HTML_MIME_TYPE];
    var scripts = [];
    var nodelist = html_node.querySelectorAll("script");
    for (var i in nodelist) {
      if (nodelist.hasOwnProperty(i)) {
        scripts.push(nodelist[i])
      }
    }

    scripts.forEach( function (oldScript) {
      var newScript = document.createElement("script");
      var attrs = [];
      var nodemap = oldScript.attributes;
      for (var j in nodemap) {
        if (nodemap.hasOwnProperty(j)) {
          attrs.push(nodemap[j])
        }
      }
      attrs.forEach(function(attr) { newScript.setAttribute(attr.name, attr.value) });
      newScript.appendChild(document.createTextNode(oldScript.innerHTML));
      oldScript.parentNode.replaceChild(newScript, oldScript);
    });
    if (JS_MIME_TYPE in output.data) {
      toinsert[nchildren-1].children[1].textContent = output.data[JS_MIME_TYPE];
    }
    output_area._hv_plot_id = id;
    if ((window.Bokeh !== undefined) && (id in Bokeh.index)) {
      window.PyViz.plot_index[id] = Bokeh.index[id];
    } else {
      window.PyViz.plot_index[id] = null;
    }
  } else if (output.metadata[EXEC_MIME_TYPE]["server_id"] !== undefined) {
    var bk_div = document.createElement("div");
    bk_div.innerHTML = output.data[HTML_MIME_TYPE];
    var script_attrs = bk_div.children[0].attributes;
    for (var i = 0; i < script_attrs.length; i++) {
      toinsert[toinsert.length - 1].childNodes[1].setAttribute(script_attrs[i].name, script_attrs[i].value);
    }
    // store reference to server id on output_area
    output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE]["server_id"];
  }
}

/**
 * Handle when an output is cleared or removed
 */
function handle_clear_output(event, handle) {
  var id = handle.cell.output_area._hv_plot_id;
  var server_id = handle.cell.output_area._bokeh_server_id;
  if (((id === undefined) || !(id in PyViz.plot_index)) && (server_id !== undefined)) { return; }
  var comm = window.PyViz.comm_manager.get_client_comm("hv-extension-comm", "hv-extension-comm", function () {});
  if (server_id !== null) {
    comm.send({event_type: 'server_delete', 'id': server_id});
    return;
  } else if (comm !== null) {
    comm.send({event_type: 'delete', 'id': id});
  }
  delete PyViz.plot_index[id];
  if ((window.Bokeh !== undefined) & (id in window.Bokeh.index)) {
    var doc = window.Bokeh.index[id].model.document
    doc.clear();
    const i = window.Bokeh.documents.indexOf(doc);
    if (i > -1) {
      window.Bokeh.documents.splice(i, 1);
    }
  }
}

/**
 * Handle kernel restart event
 */
function handle_kernel_cleanup(event, handle) {
  delete PyViz.comms["hv-extension-comm"];
  window.PyViz.plot_index = {}
}

/**
 * Handle update_display_data messages
 */
function handle_update_output(event, handle) {
  handle_clear_output(event, {cell: {output_area: handle.output_area}})
  handle_add_output(event, handle)
}

function register_renderer(events, OutputArea) {
  function append_mime(data, metadata, element) {
    // create a DOM node to render to
    var toinsert = this.create_output_subarea(
    metadata,
    CLASS_NAME,
    EXEC_MIME_TYPE
    );
    this.keyboard_manager.register_events(toinsert);
    // Render to node
    var props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};
    render(props, toinsert[0]);
    element.append(toinsert);
    return toinsert
  }

  events.on('output_added.OutputArea', handle_add_output);
  events.on('output_updated.OutputArea', handle_update_output);
  events.on('clear_output.CodeCell', handle_clear_output);
  events.on('delete.Cell', handle_clear_output);
  events.on('kernel_ready.Kernel', handle_kernel_cleanup);

  OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {
    safe: true,
    index: 0
  });
}

if (window.Jupyter !== undefined) {
  try {
    var events = require('base/js/events');
    var OutputArea = require('notebook/js/outputarea').OutputArea;
    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {
      register_renderer(events, OutputArea);
    }
  } catch(err) {
  }
}

</script>
</div>
<div class="cell-output cell-output-display">
<div id="3eb9f8a8-ffab-4aff-ae23-35468b546190">
  <div id="c7d2d9b0-867b-4fae-a770-49651c63312d" data-root-id="3eb9f8a8-ffab-4aff-ae23-35468b546190" style="display: contents;"></div>
</div>
<script type="application/javascript">(function(root) {
  var docs_json = {"d9c47480-1987-44c7-9448-b3811489016c":{"version":"3.8.1","title":"Bokeh Application","config":{"type":"object","name":"DocumentConfig","id":"1304a0b8-128b-461a-ae30-46d17602158a","attributes":{"notifications":{"type":"object","name":"Notifications","id":"29b4a175-e12d-4718-9332-4cb23d9f7d2f"}}},"roots":[{"type":"object","name":"panel.models.browser.BrowserInfo","id":"3eb9f8a8-ffab-4aff-ae23-35468b546190"},{"type":"object","name":"panel.models.comm_manager.CommManager","id":"afae67b9-7423-48e4-b88d-61b53e418380","attributes":{"plot_id":"3eb9f8a8-ffab-4aff-ae23-35468b546190","comm_id":"4cbb4f50a05048c28946d863e40bee8a","client_comm_id":"ebcdc3d7919744699a0b8afe8ad64106"}}],"defs":[{"type":"model","name":"ReactiveHTML1"},{"type":"model","name":"FlexBox1","properties":[{"name":"align_content","kind":"Any","default":"flex-start"},{"name":"align_items","kind":"Any","default":"flex-start"},{"name":"flex_direction","kind":"Any","default":"row"},{"name":"flex_wrap","kind":"Any","default":"wrap"},{"name":"gap","kind":"Any","default":""},{"name":"justify_content","kind":"Any","default":"flex-start"}]},{"type":"model","name":"FloatPanel1","properties":[{"name":"config","kind":"Any","default":{"type":"map"}},{"name":"contained","kind":"Any","default":true},{"name":"position","kind":"Any","default":"right-top"},{"name":"offsetx","kind":"Any","default":null},{"name":"offsety","kind":"Any","default":null},{"name":"theme","kind":"Any","default":"primary"},{"name":"status","kind":"Any","default":"normalized"}]},{"type":"model","name":"GridStack1","properties":[{"name":"ncols","kind":"Any","default":null},{"name":"nrows","kind":"Any","default":null},{"name":"allow_resize","kind":"Any","default":true},{"name":"allow_drag","kind":"Any","default":true},{"name":"state","kind":"Any","default":[]}]},{"type":"model","name":"drag1","properties":[{"name":"slider_width","kind":"Any","default":5},{"name":"slider_color","kind":"Any","default":"black"},{"name":"start","kind":"Any","default":0},{"name":"end","kind":"Any","default":100},{"name":"value","kind":"Any","default":50}]},{"type":"model","name":"click1","properties":[{"name":"terminal_output","kind":"Any","default":""},{"name":"debug_name","kind":"Any","default":""},{"name":"clears","kind":"Any","default":0}]},{"type":"model","name":"ReactiveESM1","properties":[{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"JSComponent1","properties":[{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"ReactComponent1","properties":[{"name":"use_shadow_dom","kind":"Any","default":true},{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"AnyWidgetComponent1","properties":[{"name":"use_shadow_dom","kind":"Any","default":true},{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"FastWrapper1","properties":[{"name":"object","kind":"Any","default":null},{"name":"style","kind":"Any","default":null}]},{"type":"model","name":"NotificationArea1","properties":[{"name":"js_events","kind":"Any","default":{"type":"map"}},{"name":"max_notifications","kind":"Any","default":5},{"name":"notifications","kind":"Any","default":[]},{"name":"position","kind":"Any","default":"bottom-right"},{"name":"_clear","kind":"Any","default":0},{"name":"types","kind":"Any","default":[{"type":"map","entries":[["type","warning"],["background","#ffc107"],["icon",{"type":"map","entries":[["className","fas fa-exclamation-triangle"],["tagName","i"],["color","white"]]}]]},{"type":"map","entries":[["type","info"],["background","#007bff"],["icon",{"type":"map","entries":[["className","fas fa-info-circle"],["tagName","i"],["color","white"]]}]]}]}]},{"type":"model","name":"Notification","properties":[{"name":"background","kind":"Any","default":null},{"name":"duration","kind":"Any","default":3000},{"name":"icon","kind":"Any","default":null},{"name":"message","kind":"Any","default":""},{"name":"notification_type","kind":"Any","default":null},{"name":"_rendered","kind":"Any","default":false},{"name":"_destroyed","kind":"Any","default":false}]},{"type":"model","name":"TemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"BootstrapTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"TemplateEditor1","properties":[{"name":"layout","kind":"Any","default":[]}]},{"type":"model","name":"MaterialTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"request_value1","properties":[{"name":"fill","kind":"Any","default":"none"},{"name":"_synced","kind":"Any","default":null},{"name":"_request_sync","kind":"Any","default":0}]},{"type":"model","name":"holoviews.plotting.bokeh.raster.HoverModel","properties":[{"name":"xy","kind":"Any","default":null},{"name":"data","kind":"Any","default":null}]}]}};
  var render_items = [{"docid":"d9c47480-1987-44c7-9448-b3811489016c","roots":{"3eb9f8a8-ffab-4aff-ae23-35468b546190":"c7d2d9b0-867b-4fae-a770-49651c63312d"},"root_ids":["3eb9f8a8-ffab-4aff-ae23-35468b546190"]}];
  var docs = Object.values(docs_json)
  if (!docs) {
    return
  }
  const version = docs[0].version.replace('rc', '-rc.').replace('.dev', '-dev.')
  async function embed_document(root) {
    var Bokeh = get_bokeh(root)
    await Bokeh.embed.embed_items_notebook(docs_json, render_items);
    for (const render_item of render_items) {
      for (const root_id of render_item.root_ids) {
    const id_el = document.getElementById(root_id)
    if (id_el.children.length && id_el.children[0].hasAttribute('data-root-id')) {
      const root_el = id_el.children[0]
      root_el.id = root_el.id + '-rendered'
      for (const child of root_el.children) {
            // Ensure JupyterLab does not capture keyboard shortcuts
            // see: https://jupyterlab.readthedocs.io/en/4.1.x/extension/notebook.html#keyboard-interaction-model
        child.setAttribute('data-lm-suppress-shortcuts', 'true')
      }
    }
      }
    }
  }
  function get_bokeh(root) {
    if (root.Bokeh === undefined) {
      return null
    } else if (root.Bokeh.version !== version) {
      if (root.Bokeh.versions === undefined || !root.Bokeh.versions.has(version)) {
    return null
      }
      return root.Bokeh.versions.get(version);
    } else if (root.Bokeh.version === version) {
      return root.Bokeh
    }
    return null
  }
  function is_loaded(root) {
    var Bokeh = get_bokeh(root)
    return (Bokeh != null && Bokeh.Panel !== undefined)
  }
  if (is_loaded(root)) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (is_loaded(root)) {
        clearInterval(timer);
        embed_document(root);
      } else if (document.readyState == "complete") {
        attempts++;
        if (attempts > 200) {
          clearInterval(timer);
      var Bokeh = get_bokeh(root)
      if (Bokeh == null || Bokeh.Panel == null) {
            console.warn("Panel: ERROR: Unable to run Panel code because Bokeh or Panel library is missing");
      } else {
        console.warn("Panel: WARNING: Attempting to render but not all required libraries could be resolved.")
        embed_document(root)
      }
        }
      }
    }, 25, root)
  }
})(window);</script>
</div>
</div>
<p>Next we need to create an instance of the <code>Client</code>, which is our entrypoint to EODH APIs. From there we can start to search the collections held within the platform.</p>
<div id="cell-8" class="cell" data-execution_count="3">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Connect to the Hub</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># base_url can be changed to optionally specify a different server, but the default is the production server</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>client <span class="op">=</span> pyeodh.Client(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    base_url<span class="op">=</span><span class="st">"https://eodatahub.org.uk"</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>).get_catalog_service()</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Print a list of the collections held in the Resource Catalogue (their id and description).</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># As the Resource Catalogue fills and development continues, the number of collections and the richness of their descriptions will increase</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> index, collect <span class="kw">in</span> <span class="bu">enumerate</span>(client.get_collections(), start<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>index<span class="sc">}</span><span class="ss"> -- </span><span class="sc">{</span>collect<span class="sc">.</span><span class="bu">id</span><span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>collect<span class="sc">.</span>description<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>1 -- ukcp
Regional climate model projections produced as part of the UK Climate Projection 2018 (UKCP18) project. The data produced by the Met Office Hadley Centre provides information on changes in climate for the UK until 2080, downscaled to a high resolution (12km), helping to inform adaptation to a changing climate. The projections cover Europe and a 100 year period, 1981-2080, for a high emissions scenario, RCP8.5. Each projection provides an example of climate variability in a changing climate, which is consistent across climate variables at different times and spatial locations. This dataset contains 12km data for the United Kingdom, the Isle of Man and the Channel Islands provided on the Ordnance Survey's British National Grid.
2 -- sentinel2_ard
These data have been created by the Department for Environment, Food and Rural Affairs (Defra) and Joint Nature Conservation Committee (JNCC) in order to cost-effectively provide high quality, Analysis Ready Data (ARD) for a wide range of applications. The dataset contains modified Copernicus Sentinel-2 (Level 1C data processed into a surface reflectance product using ARCSI software (Level 2)).
3 -- sentinel1_ard
These data have been created by the Department for Environment, Food and Rural Affairs (Defra) and Joint Nature Conservation Committee (JNCC) in order to cost-effectively provide high quality, Analysis Ready Data (ARD) for a wide range of applications. The dataset contains modified Copernicus Sentinel-1 IW GRDH products processed using the ESA SNAP toolbox.
4 -- sentinel1
This dataset contains level 1 Interferometric Wide swath (IW) Single Look Complex (SLC) C-band Synthetic Aperture Radar (SAR) data from the European Space Agency (ESA) Sentinel 1 series satellites. Sentinel 1 satellites provide continuous all-weather, day and night imaging radar data. The IW mode is the main operational mode. The IW mode supports single (HH or VV) and dual (HH+HV or VV+VH) polarisation.
5 -- qa_radiometric
Collection for radiometric QA checks
6 -- qa_radiometric
Collection for radiometric QA checks
7 -- qa_radiometric
Collection for radiometric QA checks
8 -- qa_documentation
Collection for radiometric QA checks
9 -- qa_documentation
Collection for radiometric QA checks
10 -- qa_documentation
Collection for radiometric QA checks
11 -- land_cover
As part of the ESA Land Cover Climate Change Initiative (CCI) project a new set of Global Land Cover Maps have been produced. These maps are available at 300m spatial resolution for each year between 1992 and 2015. Each pixel value corresponds to the classification of a land cover class defined based on the UN Land Cover Classification System (LCCS). The reliability of the classifications made are documented by the four quality flags (decribed further in the Product User Guide) that accompany these maps. Data are provided in both NetCDF and GeoTiff format.
12 -- eocis-sst-cdrv3
This dataset provides daily-mean sea surface temperatures (SST), presented on global 0.05° latitude-longitude grid, spanning 1980 to present. This is a Level 4 product, with gaps between available daily observations filled by statistical means.  The SST CCI Analysis product contains estimates of daily mean SST and sea ice concentration. Each SST value has an associated uncertainty estimate. The dataset has been produced as part of the version 3 Climate Data Record (CDR) produced by the European Space Agency (ESA) Climate Change Initiative Sea Surface Temperature project (ESA SST_cci). The CDR accurately maps the surface temperature of the global oceans over the period 1980 to 2021 using observations from many satellites, with a high degree of independence from in situ measurements. The data provide independently quantified SSTs to a quality suitable for climate research.  Data from 2022 onwards are provided as an Interim Climate Data Record (ICDR) and will be updated daily at one month behind present. The Copernicus Climate Change Service (C3S) funded the development of the ICDR extension and production of the ICDR during 2022. From 2023 onwards the production of the ICDR is funded by the UK Earth Observation Climate Information Service (EOCIS) and Marine and Climate Advisory Service (MCAS).
13 -- eocis-soil-moisture-africa
This dataset contains Africa-wide soil moisture and related water balance variables produced within the Earth Observation Climate Information Service (EOCIS) project.

The product is derived using the JULES land surface model, forced with TAMSAT satellite rainfall estimates and other meteorological variables from the NCEP reanalysis, and tuned to NASA SMAP satellite soil moisture observations. Data are provided at the daily scale, from 1983-01-01 to present (latency around 7 days) at 0.25 degrees by 0.25 degrees spatial resolution.
14 -- eocis-lst-s3b-night
This collection contains datasets of level L3C global land surface temperature from the SLSTR sensor on board Sentinel 3B observed daily during nighttime.   The collection is available from 2018-11-17.
15 -- eocis-lst-s3b-day
This collection contains datasets of level L3C global land surface temperature from the SLSTR sensor on board Sentinel 3B observed daily during daytime.   The collection is available from 2018-11-17.
16 -- eocis-lst-s3a-night
This collection contains datasets of level L3C global land surface temperature from the SLSTR sensor on board Sentinel 3A observed daily during nighttime.   The collection is available from 2016-05-01.
17 -- eocis-lst-s3a-day
This collection contains datasets of level L3C global land surface temperature from the SLSTR sensor on board Sentinel 3A observed daily during daytime.   The collection is available from 2016-05-01.
18 -- eocis-chuk-land-vegetation-lai
Leaf area index (LAI) are produced from April 2018 to December 2024. These data were produced by the LEAF toolbox (see documentation) from data acquired from the Multispectral Imager (MSI) on Sentinel-2. Gap-filled data are available for 100m spatial resolution at a 15-day temporal resolution.  The data must be divided by a scaling factor of 20.
19 -- eocis-chuk-land-vegetation-fapar
The fraction of absorbed photosynthetically active radiation (fAPAR) are produced from April 2018 to December 2024. These data were produced by the LEAF toolbox (see documentation) from data acquired from the Multispectral Imager (MSI) on Sentinel-2. Gap-filled data are available for 100m spatial resolution at a 15-day temporal resolution. The data must be divided by a scaling factor of 200.
20 -- eocis-chuk-geospatial-landcover
Land cover data on the CHUK grid derived from the UKCEH 25m land cover data
21 -- eocis-chuk-geospatial-elevation
Elevation data on the CHUK grid derived from the Copernicus Global 30m DEM data
22 -- eocis-chuk-geospatial-builtarea
Urban and suburban area fractions, derived from the UKCEH 10m land cover data
23 -- eocis-chuk-geospatial
EOCIS Geospatial Information
24 -- eocis-arctic-sea-ice-thickness-monthly
The sea ice products provide a 5x5 km grid of Arctic sea ice thickness (for the whole Arctic region and of 17 sub-regions), delivered as NetCDF files.  EOCIS sea ice thickness NetCDF products are generated monthly by the Centre for Polar Observation and Modelling (CPOM) from radar altimetry measurements taken from the ESA CryoSAT-2 satellite during the winter months (Oct-Apr). Sea ice thickness is only reliably measured from satellite radar altimetry during the winter months. During summer, melt ponds can form on the sea ice floes making it difficult for the satellite to differentiate between floes and leads, and hence calculate sea ice freeboard (and subsequently thickness). Measurement during summer months using radar altimetry is an area of active research (Landy et al, 2022) but is not yet operationally processed.
25 -- cordex
The vision of the CORDEX  program is to enhance and coordinate the science and application of regional climate downscaling through global partnerships. The program is sponsored by the World Climate Research Program (WCRP) to organise an internationally coordinated framework to produce improved regional climate change projections for all land regions world-wide. The CORDEX-results will serve as input for climate change impact and adaptation studies. The CORDEX regional downscaling domains include: South America, North America, Africa, Europe, East Asia, Central Asia, West Asia, Australasia, Antarctica, Arctic. CORDEX data are also available from the Earth System Grid Federation (ESGF).
26 -- col_d9a70328-35a4-11f0-987a-56fda0cd4f2f
description
27 -- col_b450a80a-361b-11f0-b489-56fda0cd4f2f
description
28 -- col_b2f5128e-3585-11f0-9dd8-56fda0cd4f2f
description
29 -- col_b24c51c0-35ae-11f0-9d79-56fda0cd4f2f
description
30 -- col_a57fd9e4-3617-11f0-b5ae-56fda0cd4f2f
description
31 -- col_9e19775a-35ae-11f0-afca-56fda0cd4f2f
description
32 -- col_98c2dbc0-35ae-11f0-8b31-56fda0cd4f2f
description
33 -- col_94cebf98-35ae-11f0-804c-56fda0cd4f2f
description
34 -- col_8dc36848-35ae-11f0-83cf-56fda0cd4f2f
description
35 -- col_89a7ee64-35ae-11f0-95e4-56fda0cd4f2f
description
36 -- col_7d6a51aa-35ae-11f0-b19f-56fda0cd4f2f
description
37 -- col_7515fa40-35ae-11f0-bfbc-56fda0cd4f2f
description
38 -- col_6f001b68-35ae-11f0-9b1b-56fda0cd4f2f
description
39 -- col_63f132f2-35ae-11f0-a3ab-56fda0cd4f2f
description
40 -- col_5d9e0ca4-35ae-11f0-939e-56fda0cd4f2f
description
41 -- col_5d702cbe-3624-11f0-8158-56fda0cd4f2f
description
42 -- col_5c8c1646-3615-11f0-88b3-56fda0cd4f2f
description
43 -- col_2d9f3edc-35a5-11f0-b30b-56fda0cd4f2f
description
44 -- col_286e4d36-35a5-11f0-bbdd-56fda0cd4f2f
description
45 -- cmip6
The WCRP Coupled Model Intercomparison Project, Phase 6 (CMIP6), is a global climate model intercomparison project, coordinated by PCMDI (Program For Climate Model Diagnosis and Intercomparison) on behalf of the World Climate Research Program (WCRP) providing input for the Intergovernmental Panel on Climate Change (IPCC) 6th Assessment Report (AR6).

The CMIP6 archive is managed via the Earth System Grid Federation, a globally distributed archive, with various portals delivering advanced faceted search capabilities provided from a number of participating organisations. Full details are available from the CMIP6 pages (see linked documentation on this record).

CEDA provides access to key CMIP6 simulations including those generated by the UK CMIP6 collaboration between the Met Office and NERC. Replicas of international data sets are provided to aid local access and use.
46 -- airbus_spot_data
SPOT is designed to efficiently cover huge areas in record time, making it a perfect choice for cartography and monitoring applications. The SPOT satellites build upon a legacy of data that began 30 years ago with the launch of the original SPOT 1 satellite in 1986. This legacy means that today, users have access to a vast archive of high-resolution imagery collected over the past decade, spanning billions of km² and offering unique historical insights. Every day SPOT acquires 3 million km² of imagery with 1.5 m panchromatic and 6 m multispectral bands.
47 -- airbus_sar_data
The TerraSAR-X and TanDEM-X satellites carry high frequency X-band Synthetic Aperture Radar (SAR) sensors in order to acquire datasets ranging from very high-resolution imagery to wide area coverage. Using spaceborne SAR we can provide accurate measurements, unmatched geometric accuracy and provide highly precise information of any point on Earth. Our imagery ranges from very high resolution to wide-area coverage. The satellites' proven data quality and resolution of up to 25 cm continues to be among the very best in the spaceborne commercial radar market. The constellation's capacity empowers both data-hungry services and time-critical missions, enabling a broad array of applications, including maritime monitoring, change detection, and interferometry.
48 -- airbus_pneo_data
Pléiades Neo is Airbus' industry-leading very high-resolution optical constellation of two identical satellites phased at 180° from each other. The constellation provides continuity for the Pléiades mission, with enhanced performance in terms of accuracy, reactivity and frequency. Pléiades Neo provides users with 30 cm native resolution panchromatic imagery, and six 1.2 m multispectral bands, offering the best of very high-resolution optical imagery for an unprecedented level of geospatial services.
49 -- airbus_phr_data
The Pléiades constellation is Airbus' main very high resolution programme, expanding and consolidating on the SPOT legacy with the identical Pléiades 1A and Pléiades 1B launched in 2011 and 2012. These satellites operate as a true constellation, combining a twice-daily revisit capability with an ingenious range of resolutions. Pléiades collects imagery with a 50 cm panchromatic and four 2 m multispectral bands across a 20 km swath, making them an ideal source of data for a wide range of environmental, civil, and military needs.
50 -- SkySatCollect
SkySat, operated by Planet, is a high resolution constellation of 15 satellites, able to image revisit any location on Earth up to 10x daily (a daily collection capacity of 4,000 km2/day). SkySat produces 4-band (blue, green, red, NIR) and panchromatic imagery and is sampled at 50 centimeters per pixel when orthorectified. Skysat Collect provides coregistered, stacked, mosaiced scenes.
51 -- PSScene
PlanetScope, operated by Planet, is a constellation of approximately 130 satellites, able to image the entire land surface of the Earth every day (a daily collection capacity of 200 million km²/day). PlanetScope images are approximately 3 meters per pixel resolution. The PlanetScope satellite constellation consists of multiple launches ("flocks") of Dove satellites. PlanetScope Scenes are either Four band (RGBNIR), or Eight band (RGBNIR, red edge, green I, yellow and coastal blue), depending on which generation of satellite the product was acquired by. On-orbit capacity is constantly improving in capability and quantity, with technology improvements deployed at a rapid pace.</code></pre>
</div>
</div>
<p>The attributes of a catalogue are mapped to a series of properties. For instance, in the following cell we print the <code>id</code>, <code>title</code> and <code>description</code>.</p>
<div id="cell-10" class="cell" data-execution_count="4">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The next thing to do is find some open data</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's use the CEDA Sentinel 2 ARD</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>s2ard_cat <span class="op">=</span> client.get_catalog(<span class="st">"public/catalogs/ceda-stac-catalogue"</span>).get_collection(<span class="st">'sentinel2_ard'</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"id: "</span>, s2ard_cat.<span class="bu">id</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"title: "</span>, s2ard_cat.title)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"description: "</span>, s2ard_cat.description)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>id:  sentinel2_ard
title:  Sentinel 2 ARD
description:  These data have been created by the Department for Environment, Food and Rural Affairs (Defra) and Joint Nature Conservation Committee (JNCC) in order to cost-effectively provide high quality, Analysis Ready Data (ARD) for a wide range of applications. The dataset contains modified Copernicus Sentinel-2 (Level 1C data processed into a surface reflectance product using ARCSI software (Level 2)).</code></pre>
</div>
</div>
<p>The Hub API endpoints are wrapped in methods inside <code>pyeodh</code> and are structured into classes, following the same logic as the underlying APIs. This means that, for example, to fetch a collection item we first need to get the collection from the resource catalogue. The following cell provedes a code example to do this.</p>
<div id="cell-12" class="cell" data-execution_count="5">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>s2ard <span class="op">=</span> client.get_catalog(<span class="st">"public/catalogs/ceda-stac-catalogue"</span>).get_collection(<span class="st">'sentinel2_ard'</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>s2ard</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>&lt;pyeodh.resource_catalog.Collection at 0x7f72a64f3830&gt;</code></pre>
</div>
</div>
<p>Some API responses are paginated (e.g.&nbsp;collection items), and you can simply iterate over them.</p>
<div id="cell-14" class="cell" data-scrolled="true" data-execution_count="6">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>items <span class="op">=</span> s2ard.get_items()</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Warning: without the limit to 10 items this will take a long time for large catalogues such as s2ard</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> item <span class="kw">in</span> items[:<span class="dv">10</span>]:</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(item.<span class="bu">id</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>neodc.sentinel_ard.data.sentinel_2.2025.11.30.S2A_20251130_latn590lonw0063_T29VPF_ORB023_20251130142106_utm29n_osgb
neodc.sentinel_ard.data.sentinel_2.2025.11.30.S2A_20251130_latn590lonw0055_T30VUL_ORB023_20251130142106_utm30n_osgb
neodc.sentinel_ard.data.sentinel_2.2025.11.30.S2A_20251130_latn590lonw0038_T30VVL_ORB023_20251130142106_utm30n_osgb
neodc.sentinel_ard.data.sentinel_2.2025.11.30.S2A_20251130_latn581lonw0064_T29VPE_ORB023_20251130142106_utm29n_osgb
neodc.sentinel_ard.data.sentinel_2.2025.11.30.S2A_20251130_latn581lonw0055_T30VUK_ORB023_20251130142106_utm30n_osgb
neodc.sentinel_ard.data.sentinel_2.2025.11.30.S2A_20251130_latn581lonw0038_T30VVK_ORB023_20251130142106_utm30n_osgb
neodc.sentinel_ard.data.sentinel_2.2025.11.30.S2A_20251130_latn572lonw0064_T29VPD_ORB023_20251130142106_utm29n_osgb
neodc.sentinel_ard.data.sentinel_2.2025.11.30.S2A_20251130_latn572lonw0054_T30VUJ_ORB023_20251130142106_utm30n_osgb
neodc.sentinel_ard.data.sentinel_2.2025.11.30.S2A_20251130_latn563lonw0065_T29VPC_ORB023_20251130142106_utm29n_osgb
neodc.sentinel_ard.data.sentinel_2.2025.11.30.S2A_20251130_latn563lonw0053_T30VUH_ORB023_20251130142106_utm30n_osgb</code></pre>
</div>
</div>
<p>Now we want to access the first few items and see what they are called and how much cloud there is.</p>
<div id="cell-16" class="cell" data-execution_count="7">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, item <span class="kw">in</span> <span class="bu">enumerate</span>(items[:<span class="dv">10</span>]):</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(i, <span class="st">" "</span>, item.<span class="bu">id</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Cloud cover: "</span>, item.properties[<span class="st">'eo:cloud_cover'</span>]) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>0   neodc.sentinel_ard.data.sentinel_2.2025.11.30.S2A_20251130_latn590lonw0063_T29VPF_ORB023_20251130142106_utm29n_osgb
Cloud cover:  42.67
1   neodc.sentinel_ard.data.sentinel_2.2025.11.30.S2A_20251130_latn590lonw0055_T30VUL_ORB023_20251130142106_utm30n_osgb
Cloud cover:  55.48
2   neodc.sentinel_ard.data.sentinel_2.2025.11.30.S2A_20251130_latn590lonw0038_T30VVL_ORB023_20251130142106_utm30n_osgb
Cloud cover:  31.54
3   neodc.sentinel_ard.data.sentinel_2.2025.11.30.S2A_20251130_latn581lonw0064_T29VPE_ORB023_20251130142106_utm29n_osgb
Cloud cover:  26.12
4   neodc.sentinel_ard.data.sentinel_2.2025.11.30.S2A_20251130_latn581lonw0055_T30VUK_ORB023_20251130142106_utm30n_osgb
Cloud cover:  16.69
5   neodc.sentinel_ard.data.sentinel_2.2025.11.30.S2A_20251130_latn581lonw0038_T30VVK_ORB023_20251130142106_utm30n_osgb
Cloud cover:  13.24
6   neodc.sentinel_ard.data.sentinel_2.2025.11.30.S2A_20251130_latn572lonw0064_T29VPD_ORB023_20251130142106_utm29n_osgb
Cloud cover:  50.0
7   neodc.sentinel_ard.data.sentinel_2.2025.11.30.S2A_20251130_latn572lonw0054_T30VUJ_ORB023_20251130142106_utm30n_osgb
Cloud cover:  15.11
8   neodc.sentinel_ard.data.sentinel_2.2025.11.30.S2A_20251130_latn563lonw0065_T29VPC_ORB023_20251130142106_utm29n_osgb
Cloud cover:  78.08
9   neodc.sentinel_ard.data.sentinel_2.2025.11.30.S2A_20251130_latn563lonw0053_T30VUH_ORB023_20251130142106_utm30n_osgb
Cloud cover:  24.78</code></pre>
</div>
</div>
<p>To find specific imagery for a given date range we can set up a search with a query. That query needs to have a start and end date.</p>
<p>If we wanted a specific location, we could add in an <code>intersects</code> parameter.</p>
<div id="cell-18" class="cell" data-execution_count="8">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>items <span class="op">=</span> client.search(</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    collections<span class="op">=</span>[<span class="st">'sentinel2_ard'</span>],</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    catalog_paths<span class="op">=</span>[<span class="st">"public/catalogs/ceda-stac-catalogue"</span>],</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    query<span class="op">=</span>[</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'start_datetime&gt;=2024-04-01'</span>,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">'end_datetime&lt;=2024-09-30'</span>, </span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co"># We can then count the number of items returned by the search </span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>total_items <span class="op">=</span> <span class="bu">sum</span>(<span class="dv">1</span> <span class="cf">for</span> _ <span class="kw">in</span> items)</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Total items: </span><span class="sc">{</span>total_items<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Total items: 3412</code></pre>
</div>
</div>
<p>For this example we will use a location that relates to the WWT London Wetlands Centre: https://www.wwt.org.uk/wetland-centres/london</p>
<div id="cell-20" class="cell" data-execution_count="9">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the WWT site</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>lon, lat <span class="op">=</span> (<span class="op">-</span><span class="fl">0.2346089199955088</span>, <span class="fl">51.478446832015834</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>wwt_pnt <span class="op">=</span> shapely.Point(lon, lat) </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>items <span class="op">=</span> client.search(</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    collections<span class="op">=</span>[<span class="st">'sentinel2_ard'</span>],</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    catalog_paths<span class="op">=</span>[<span class="st">"public/catalogs/ceda-stac-catalogue"</span>],</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    intersects <span class="op">=</span> wwt_pnt,</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    query<span class="op">=</span>[</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">'start_datetime&gt;=2024-04-01'</span>,</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">'end_datetime&lt;=2024-09-30'</span>,</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">'eo:cloud_cover&lt;=30'</span>,</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="co"># We can then count the number of items returned by the search </span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>total_items <span class="op">=</span> <span class="bu">sum</span>(<span class="dv">1</span> <span class="cf">for</span> _ <span class="kw">in</span> items)</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Total items: </span><span class="sc">{</span>total_items<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Total items: 13</code></pre>
</div>
</div>
<p>A useful thing to do now is find the asset information for one of those items. We shall use the first item in the list.</p>
<div id="cell-22" class="cell" data-execution_count="10">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> item <span class="kw">in</span> items[:<span class="dv">1</span>]:  <span class="co"># Process only the first item</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Item ID: </span><span class="sc">{</span>item<span class="sc">.</span><span class="bu">id</span><span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Assets:"</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> item.assets:</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"  No assets available."</span>)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> asset_key, asset <span class="kw">in</span> item.assets.items():</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f"  - </span><span class="sc">{</span>asset_key<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>asset<span class="sc">.</span>to_dict()<span class="sc">}</span><span class="ss">"</span>)  <span class="co"># Convert asset to dict for readable output</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"-"</span> <span class="op">*</span> <span class="dv">40</span>)  <span class="co"># Separator for better readability</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Item ID: neodc.sentinel_ard.data.sentinel_2.2024.09.19.S2A_20240919_latn518lonw0008_T30UXC_ORB094_20240919144023_utm30n_osgb
Assets:
  - cloud: {'href': 'https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2024/09/19/S2A_20240919_latn518lonw0008_T30UXC_ORB094_20240919144023_utm30n_osgb_clouds.tif', 'type': 'image/tiff; application=geotiff', 'size': 2116177, 'location': 'on_disk', 'roles': ['data']}
----------------------------------------
  - cloud_probability: {'href': 'https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2024/09/19/S2A_20240919_latn518lonw0008_T30UXC_ORB094_20240919144023_utm30n_osgb_clouds_prob.tif', 'type': 'image/tiff; application=geotiff', 'size': 31613463, 'location': 'on_disk', 'roles': ['data']}
----------------------------------------
  - cog: {'href': 'https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2024/09/19/S2A_20240919_latn518lonw0008_T30UXC_ORB094_20240919144023_utm30n_osgb_vmsk_sharp_rad_srefdem_stdsref.tif', 'type': 'image/tiff; application=geotiff', 'size': 571656423, 'location': 'on_disk', 'eo:bands': [{'eo:central_wavelength': 496.6, 'eo:common_name': 'blue', 'description': 'Blue', 'eo: full_width_half_max': 0.07, 'name': 'B02'}, {'eo:central_wavelength': 560, 'eo:common_name': 'green', 'description': 'Green', 'eo: full_width_half_max': 0.04, 'name': 'B03'}, {'eo:central_wavelength': 664.5, 'eo:common_name': 'red', 'description': 'Red', 'eo: full_width_half_max': 0.03, 'name': 'B04'}, {'eo:central_wavelength': 703.9, 'eo:common_name': 'rededge', 'description': 'Visible and Near Infrared', 'eo: full_width_half_max': 0.02, 'name': 'B05'}, {'eo:central_wavelength': 740.2, 'eo:common_name': 'rededge', 'description': 'Visible and Near Infrared', 'eo: full_width_half_max': 0.02, 'name': 'B06'}, {'eo:central_wavelength': 782.5, 'eo:common_name': 'rededge', 'description': 'Visible and Near Infrared', 'eo: full_width_half_max': 0.02, 'name': 'B07'}, {'eo:central_wavelength': 835.1, 'eo:common_name': 'nir', 'description': 'Visible and Near Infrared', 'eo: full_width_half_max': 0.11, 'name': 'B08'}, {'eo:central_wavelength': 864.8, 'eo:common_name': 'nir08', 'description': 'Visible and Near Infrared', 'eo: full_width_half_max': 0.02, 'name': 'B08a'}, {'eo:central_wavelength': 1613.7, 'eo:common_name': 'swir16', 'description': 'Short Wave Infrared', 'eo: full_width_half_max': 0.09, 'name': 'B11'}, {'eo:central_wavelength': 2202.4, 'eo:common_name': 'swir22', 'description': 'Short Wave Infrared', 'eo: full_width_half_max': 0.18, 'name': 'B12'}], 'roles': ['data']}
----------------------------------------
  - metadata: {'href': 'https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2024/09/19/S2A_20240919_latn518lonw0008_T30UXC_ORB094_20240919144023_utm30n_osgb_vmsk_sharp_rad_srefdem_stdsref_meta.xml', 'type': 'application/xml', 'size': 18453, 'location': 'on_disk', 'roles': ['metadata']}
----------------------------------------
  - saturated_pixels: {'href': 'https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2024/09/19/S2A_20240919_latn518lonw0008_T30UXC_ORB094_20240919144023_utm30n_osgb_sat.tif', 'type': 'image/tiff; application=geotiff', 'size': 1774631, 'location': 'on_disk', 'roles': ['data']}
----------------------------------------
  - thumbnail: {'href': 'https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2024/09/19/S2A_20240919_latn518lonw0008_T30UXC_ORB094_20240919144023_utm30n_osgb_vmsk_sharp_rad_srefdem_stdsref_thumbnail.jpg', 'type': 'image/jpeg', 'size': 40710, 'location': 'on_disk', 'roles': ['thumbnail']}
----------------------------------------
  - topographic_shadow: {'href': 'https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2024/09/19/S2A_20240919_latn518lonw0008_T30UXC_ORB094_20240919144023_utm30n_osgb_toposhad.tif', 'type': 'image/tiff; application=geotiff', 'size': 215956, 'location': 'on_disk', 'roles': ['data']}
----------------------------------------
  - valid_pixels: {'href': 'https://dap.ceda.ac.uk/neodc/sentinel_ard/data/sentinel_2/2024/09/19/S2A_20240919_latn518lonw0008_T30UXC_ORB094_20240919144023_utm30n_osgb_valid.tif', 'type': 'image/tiff; application=geotiff', 'size': 319023, 'location': 'on_disk', 'roles': ['data']}
----------------------------------------</code></pre>
</div>
</div>
<p>We can see that this returns a lot of information. We can extract the thumbnail URL and use that to plot the image overview.</p>
<div id="cell-24" class="cell" data-execution_count="11">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>tn_url <span class="op">=</span> <span class="va">None</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> item <span class="kw">in</span> items[:<span class="dv">2</span>]:  <span class="co"># Process only the second item</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> item.assets:</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"  No assets available."</span>)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> asset_key, asset <span class="kw">in</span> item.assets.items():</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> asset_key <span class="op">==</span> <span class="st">"thumbnail"</span>:</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>                tn_url <span class="op">=</span> asset.href  <span class="co"># Directly access the href attribute</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Here we open the remote URL, read the data and dislay the thumbnail </span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> urllib.request.urlopen(tn_url) <span class="im">as</span> url:</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>    img <span class="op">=</span> Image.<span class="bu">open</span>(BytesIO(url.read()))</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>display(img)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="timeseries-ucl_files/figure-html/cell-12-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-25" class="cell" data-execution_count="12">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># code to show all thumbnails</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>thumbnail_urls <span class="op">=</span> []</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> item <span class="kw">in</span> items:</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> item.assets:</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">"thumbnail"</span> <span class="kw">in</span> item.assets:</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>        thumbnail_urls.append(item.assets[<span class="st">"thumbnail"</span>].href) <span class="co"># collect link to thumbnails</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Number of assets with thumbnails: </span><span class="sc">{</span><span class="bu">len</span>(thumbnail_urls)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Ask for start and end thumbnails</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>start <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>(<span class="st">"Start image: "</span>))</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>end   <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>(<span class="st">"End image: "</span>))</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Clamp the range</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>start <span class="op">=</span> <span class="bu">max</span>(<span class="dv">0</span>, start)</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>end   <span class="op">=</span> <span class="bu">min</span>(<span class="bu">len</span>(thumbnail_urls), end)</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>selected_urls <span class="op">=</span> thumbnail_urls[start:end]</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Showing thumbnails </span><span class="sc">{</span>start<span class="sc">}</span><span class="ss"> to </span><span class="sc">{</span>end<span class="op">-</span><span class="dv">1</span><span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>images <span class="op">=</span> []</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> url <span class="kw">in</span> selected_urls:</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> urllib.request.urlopen(url) <span class="im">as</span> u:</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>        img <span class="op">=</span> Image.<span class="bu">open</span>(BytesIO(u.read())) <span class="co"># get the thumbnails</span></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>        images.append(img)</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Determine grid size (roughly square)</span></span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>cols <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>rows <span class="op">=</span> math.ceil(<span class="bu">len</span>(images) <span class="op">/</span> cols)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of assets with thumbnails: 13</code></pre>
</div>
<div class="cell-output cell-output-stdin">
<pre><code>Start image:  1
End image:  6</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Showing thumbnails 1 to 5</code></pre>
</div>
</div>
<div id="cell-26" class="cell" data-execution_count="13">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot thumbnail matrix</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">3</span> <span class="op">*</span> rows))</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, img <span class="kw">in</span> <span class="bu">enumerate</span>(images):</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    ax <span class="op">=</span> fig.add_subplot(rows, cols, i <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    ax.imshow(img)</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    ax.axis(<span class="st">"off"</span>)</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="timeseries-ucl_files/figure-html/cell-14-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="timeseries" class="level1">
<h1>Timeseries</h1>
<div id="cell-28" class="cell" data-execution_count="16">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># EPSG:4326 → EPSG:27700</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>transformer <span class="op">=</span> Transformer.from_crs(<span class="st">"EPSG:4326"</span>, <span class="st">"EPSG:27700"</span>, always_xy<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>xc, yc <span class="op">=</span> transformer.transform(lon, lat)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>dates, ndwi_vals <span class="op">=</span> [], []</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract NDWI for each scene </span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> item <span class="kw">in</span> items:</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    asset <span class="op">=</span> item.assets[<span class="st">"cog"</span>]</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    href <span class="op">=</span> asset.href</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract band ordering from eo:bands list</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>    bands <span class="op">=</span> asset.extra_fields[<span class="st">"eo:bands"</span>]</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>    band_index <span class="op">=</span> {b[<span class="st">"name"</span>]: i <span class="op">+</span> <span class="dv">1</span> <span class="cf">for</span> i, b <span class="kw">in</span> <span class="bu">enumerate</span>(bands)}</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Need B03 (green) and B08 (nir)</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>    g_idx <span class="op">=</span> band_index[<span class="st">"B03"</span>]</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>    n_idx <span class="op">=</span> band_index[<span class="st">"B08"</span>]</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sample the COG</span></span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">with</span> rasterio.<span class="bu">open</span>(href) <span class="im">as</span> src:</span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>            green <span class="op">=</span> <span class="bu">list</span>(src.sample([(xc, yc)], indexes<span class="op">=</span>g_idx))[<span class="dv">0</span>][<span class="dv">0</span>]</span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>            nir   <span class="op">=</span> <span class="bu">list</span>(src.sample([(xc, yc)], indexes<span class="op">=</span>n_idx))[<span class="dv">0</span>][<span class="dv">0</span>]</span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span>:</span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Skip invalid values</span></span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> green <span class="op">&lt;=</span> <span class="dv">0</span> <span class="kw">or</span> nir <span class="op">&lt;=</span> <span class="dv">0</span>:</span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true" tabindex="-1"></a>    ndwi <span class="op">=</span> (((green<span class="op">/</span><span class="dv">100</span>) <span class="op">-</span> (nir<span class="op">/</span><span class="dv">100</span>)) <span class="op">/</span> ((green<span class="op">/</span><span class="dv">100</span>) <span class="op">+</span> (nir<span class="op">/</span><span class="dv">100</span>))) <span class="co"># Working on the reasoning that the data needs rescaling by 100 </span></span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Store result</span></span>
<span id="cb26-37"><a href="#cb26-37" aria-hidden="true" tabindex="-1"></a>    dates.append(item.datetime)</span>
<span id="cb26-38"><a href="#cb26-38" aria-hidden="true" tabindex="-1"></a>    ndwi_vals.append(<span class="bu">float</span>(ndwi))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Finally we plot the data using <code>hvplot</code> which allows the user to interact with the chart.</p>
<div id="cell-30" class="cell" data-execution_count="17">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"date"</span>: dates,</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ndwi"</span>: ndwi_vals</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>df.hvplot.line(</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"date"</span>,</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">"ndwi"</span>,</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">"NDWI Timeseries at WWT London"</span>,</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    ylabel<span class="op">=</span><span class="st">"NDWI"</span>,</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>    xlabel<span class="op">=</span><span class="st">"Date"</span>,</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>    marker<span class="op">=</span><span class="st">"o"</span>,</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>    grid<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span><span class="dv">700</span>,</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>    height<span class="op">=</span><span class="dv">350</span>,</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>WARNING:param.main: marker option not found for line plot with bokeh; similar options include: []
WARNING:param.main:marker option not found for line plot with bokeh; similar options include: []</code></pre>
</div>
<div class="cell-output cell-output-display">

</div>
<div class="cell-output cell-output-display" data-execution_count="17">
<div id="926c1ae3-0d57-4869-833f-f8c1e05c2e03">
  <div id="c728ba2a-0199-401f-bf1c-acc90a66e75d" data-root-id="926c1ae3-0d57-4869-833f-f8c1e05c2e03" style="display: contents;"></div>
</div>
<script type="application/javascript">(function(root) {
  var docs_json = {"c41df43d-4442-4a5c-9feb-9551a4a17671":{"version":"3.8.1","title":"Bokeh Application","config":{"type":"object","name":"DocumentConfig","id":"a44d4eca-b963-4e6a-91b5-3c6da7b5cb15","attributes":{"notifications":{"type":"object","name":"Notifications","id":"e5cd3483-14b9-4c0b-b3f0-21473ddaa270"}}},"roots":[{"type":"object","name":"Row","id":"926c1ae3-0d57-4869-833f-f8c1e05c2e03","attributes":{"name":"Row00324","tags":["embedded"],"stylesheets":["\n:host(.pn-loading):before, .pn-loading:before {\n  background-color: #c3c3c3;\n  mask-size: auto calc(min(50%, 300px));\n  -webkit-mask-size: auto calc(min(50%, 300px));\n}",{"type":"object","name":"ImportedStyleSheet","id":"9f6f4748-6311-465e-8a02-50c0c8ab55e6","attributes":{"url":"https://cdn.holoviz.org/panel/1.8.4/dist/css/loading.css"}},{"type":"object","name":"ImportedStyleSheet","id":"f5384a98-865f-4459-a8c1-00389481d60a","attributes":{"url":"https://cdn.holoviz.org/panel/1.8.4/dist/css/listpanel.css"}},{"type":"object","name":"ImportedStyleSheet","id":"b2be2131-1b33-4f37-a319-1081532e379a","attributes":{"url":"https://cdn.holoviz.org/panel/1.8.4/dist/bundled/theme/default.css"}},{"type":"object","name":"ImportedStyleSheet","id":"d9d908ce-4a27-4d2d-9b5a-70c6a1526da4","attributes":{"url":"https://cdn.holoviz.org/panel/1.8.4/dist/bundled/theme/native.css"}}],"min_width":700,"margin":0,"sizing_mode":"stretch_width","align":"start","children":[{"type":"object","name":"Spacer","id":"5903e10a-f46d-4732-ba34-8d1feae8fde2","attributes":{"name":"HSpacer00328","stylesheets":["\n:host(.pn-loading):before, .pn-loading:before {\n  background-color: #c3c3c3;\n  mask-size: auto calc(min(50%, 300px));\n  -webkit-mask-size: auto calc(min(50%, 300px));\n}",{"id":"9f6f4748-6311-465e-8a02-50c0c8ab55e6"},{"id":"b2be2131-1b33-4f37-a319-1081532e379a"},{"id":"d9d908ce-4a27-4d2d-9b5a-70c6a1526da4"}],"min_width":0,"margin":0,"sizing_mode":"stretch_width","align":"start"}},{"type":"object","name":"Figure","id":"a96d60b5-5654-494d-85d8-79e8e793ebbe","attributes":{"width":700,"height":350,"margin":[5,10],"sizing_mode":"fixed","align":"start","x_range":{"type":"object","name":"Range1d","id":"fde2c7b5-2940-4973-b3c5-8ea56eabd4c2","attributes":{"name":"date","tags":[[["date",null]],[]],"start":1714475179000.0,"end":1726743451000.0,"reset_start":1714475179000.0,"reset_end":1726743451000.0}},"y_range":{"type":"object","name":"Range1d","id":"38705802-440a-4cb4-b6e8-f058ec37416f","attributes":{"name":"ndwi","tags":[[["ndwi",null]],{"type":"map","entries":[["invert_yaxis",false],["autorange",false]]}],"start":-0.8616059379217275,"end":-0.0607962213225372,"reset_start":-0.8616059379217275,"reset_end":-0.0607962213225372}},"x_scale":{"type":"object","name":"LinearScale","id":"b528ad1e-544a-4884-b9a0-6e27178457b1"},"y_scale":{"type":"object","name":"LinearScale","id":"adf7954a-89a7-41d4-b11d-589468915c40"},"title":{"type":"object","name":"Title","id":"016c61b3-d47c-4004-847e-2c1f29f7c182","attributes":{"text":"NDWI Timeseries at WWT London","text_color":"black","text_font_size":"12pt"}},"renderers":[{"type":"object","name":"GlyphRenderer","id":"2fb9c465-c954-477c-85d1-bfeb7336c274","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"ad1fb766-29d3-43f0-9b32-574a6d799b00","attributes":{"selected":{"type":"object","name":"Selection","id":"96e13e84-0ace-4992-ae01-70eba0bf03ee","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"dd7fa80d-31dd-4dd4-9e3d-a3e080f527b5"},"data":{"type":"map","entries":[["date",{"type":"ndarray","array":{"type":"bytes","data":"H4sIAAEAAAAC/2No2P/x1acKJ4aGZnXtryB6/5OonyCamd2ZtRLE37uKB0Tbb3/ED6IPfGgTAPNXBYmB6Jrl78RBNPODSRJg+jKTPFjftF9gOvzhPIVKJwDJo5BmaAAAAA=="},"shape":[13],"dtype":"float64","order":"little"}],["ndwi",{"type":"ndarray","array":{"type":"bytes","data":"H4sIAAEAAAAC/wFoAJf/hOWeRlju5b+JZJn0jEjmv8Hm9fuXCee/+pZv+ZZv6b/RuFvnFdDov2meUAsYk+i/q6qqqqqq5r+b70Sa70TKv5KRkZGRkeG/itFfmrGB5L8dfR5KlXzlvzIFHTzqUsC//Ia1b1j75r8zf4bUaAAAAA=="},"shape":[13],"dtype":"float64","order":"little"}]]}}},"view":{"type":"object","name":"CDSView","id":"ff7495f4-b122-44ff-ad34-4a97ee74fe9b","attributes":{"filter":{"type":"object","name":"AllIndices","id":"2dd9b488-48b0-44e4-9b22-3e42467fd3f1"}}},"glyph":{"type":"object","name":"Line","id":"11acac39-f0c3-487d-a417-635f12ca99df","attributes":{"tags":["apply_ranges"],"x":{"type":"field","field":"date"},"y":{"type":"field","field":"ndwi"},"line_color":"#30a2da","line_width":2}},"selection_glyph":{"type":"object","name":"Line","id":"ca2346a6-dffe-4264-92d9-23e77a3071ba","attributes":{"tags":["apply_ranges"],"x":{"type":"field","field":"date"},"y":{"type":"field","field":"ndwi"},"line_color":"#30a2da","line_width":2}},"nonselection_glyph":{"type":"object","name":"Line","id":"0f966cab-0504-4d11-8fdd-f05e9bd5e94c","attributes":{"tags":["apply_ranges"],"x":{"type":"field","field":"date"},"y":{"type":"field","field":"ndwi"},"line_color":"#30a2da","line_alpha":0.1,"line_width":2}},"muted_glyph":{"type":"object","name":"Line","id":"8c5cbeb7-5dac-4cc5-8f84-300140b29548","attributes":{"tags":["apply_ranges"],"x":{"type":"field","field":"date"},"y":{"type":"field","field":"ndwi"},"line_color":"#30a2da","line_alpha":0.2,"line_width":2}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"533510b8-ff7f-4503-8a77-9048e80233cc","attributes":{"tools":[{"type":"object","name":"WheelZoomTool","id":"73176a22-3f53-4b9d-bec3-a457d66f5420","attributes":{"tags":["hv_created"],"renderers":"auto","zoom_together":"none"}},{"type":"object","name":"HoverTool","id":"88f26c63-6daa-48c3-9d4f-ed4d95e78c78","attributes":{"tags":["hv_created"],"renderers":[{"id":"2fb9c465-c954-477c-85d1-bfeb7336c274"}],"tooltips":[["date","@{date}{%F %T}"],["ndwi","@{ndwi}"]],"formatters":{"type":"map","entries":[["@{date}","datetime"]]},"sort_by":null}},{"type":"object","name":"SaveTool","id":"1a917dd6-376b-4787-95e2-c68250bc425c"},{"type":"object","name":"PanTool","id":"5ce9e1f5-c3ae-4617-aef2-1010b20b2a0c"},{"type":"object","name":"BoxZoomTool","id":"1a98c396-e0b4-4902-9e9c-c26d44d3dc4d","attributes":{"overlay":{"type":"object","name":"BoxAnnotation","id":"16f22c85-e02c-453b-8854-2afcd112c527","attributes":{"syncable":false,"line_color":"black","line_alpha":1.0,"line_width":2,"line_dash":[4,4],"fill_color":"lightgrey","fill_alpha":0.5,"level":"overlay","visible":false,"left":{"type":"number","value":"nan"},"right":{"type":"number","value":"nan"},"top":{"type":"number","value":"nan"},"bottom":{"type":"number","value":"nan"},"left_units":"canvas","right_units":"canvas","top_units":"canvas","bottom_units":"canvas","handles":{"type":"object","name":"BoxInteractionHandles","id":"6032c612-7fea-4bfc-b261-1d2039a1b875","attributes":{"all":{"type":"object","name":"AreaVisuals","id":"57f851f4-d9ee-4d77-92fb-f9efb7fd11a1","attributes":{"fill_color":"white","hover_fill_color":"lightgray"}}}}}}}},{"type":"object","name":"ResetTool","id":"3b28e553-92f1-4025-9290-c93ff3a1000a"}],"active_drag":{"id":"5ce9e1f5-c3ae-4617-aef2-1010b20b2a0c"},"active_scroll":{"id":"73176a22-3f53-4b9d-bec3-a457d66f5420"}}},"left":[{"type":"object","name":"LinearAxis","id":"d6675a72-1c5f-4ffe-88a6-abb370ca984c","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"c78fbc28-dea5-4432-aa82-2af497d1a163","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"9591cf7b-537b-446d-856a-abb5c2e05b1a"},"axis_label":"NDWI","major_label_policy":{"type":"object","name":"AllLabels","id":"679c11c0-cf11-4a11-b223-21190ac40f5d"}}}],"below":[{"type":"object","name":"DatetimeAxis","id":"1ed922d6-7092-40f9-a0f7-8b972cd325bc","attributes":{"ticker":{"type":"object","name":"DatetimeTicker","id":"582ed859-3411-4bc9-b04c-5a078cd39077","attributes":{"num_minor_ticks":5,"tickers":[{"type":"object","name":"AdaptiveTicker","id":"7b12a124-79c7-4073-802b-3d9ea8aee6e1","attributes":{"num_minor_ticks":0,"mantissas":[1,2,5],"max_interval":500.0}},{"type":"object","name":"AdaptiveTicker","id":"e4f02c9e-d7a3-43df-a301-5fc95235baa1","attributes":{"num_minor_ticks":0,"base":60,"mantissas":[1,2,5,10,15,20,30],"min_interval":1000.0,"max_interval":1800000.0}},{"type":"object","name":"AdaptiveTicker","id":"6ea29876-cf41-4515-9b5d-882c17532037","attributes":{"num_minor_ticks":0,"base":24,"mantissas":[1,2,4,6,8,12],"min_interval":3600000.0,"max_interval":43200000.0}},{"type":"object","name":"DaysTicker","id":"132cb2a4-40dd-4cf9-a19a-00bdd386b029","attributes":{"days":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]}},{"type":"object","name":"DaysTicker","id":"cd9f49c6-188c-4cbe-8af1-fc5e3fc5e0a9","attributes":{"days":[1,4,7,10,13,16,19,22,25,28]}},{"type":"object","name":"DaysTicker","id":"44993008-9ea7-486e-bfb4-09061e2dc7c0","attributes":{"days":[1,8,15,22]}},{"type":"object","name":"DaysTicker","id":"20877716-8875-49f9-832c-372a28668ca7","attributes":{"days":[1,15]}},{"type":"object","name":"MonthsTicker","id":"4b4e8144-69fa-4dab-88c7-e559db0ae179","attributes":{"months":[0,1,2,3,4,5,6,7,8,9,10,11]}},{"type":"object","name":"MonthsTicker","id":"77965b21-19b0-4846-a8b4-d1419b94c537","attributes":{"months":[0,2,4,6,8,10]}},{"type":"object","name":"MonthsTicker","id":"266863e5-e647-4f04-b932-6118532eae6a","attributes":{"months":[0,4,8]}},{"type":"object","name":"MonthsTicker","id":"3493d55f-7a26-4899-a0c6-5c580536d99c","attributes":{"months":[0,6]}},{"type":"object","name":"YearsTicker","id":"4cf13673-df8e-4148-ba79-64d777551032"}]}},"formatter":{"type":"object","name":"DatetimeTickFormatter","id":"a303c937-2c55-433f-8a38-ddd619d76faf","attributes":{"seconds":"%T","minsec":"%T","minutes":"%H:%M","hours":"%H:%M","days":"%b %d","months":"%b %Y","strip_leading_zeros":["microseconds","milliseconds","seconds"],"boundary_scaling":false,"context":{"type":"object","name":"DatetimeTickFormatter","id":"f7e9c094-f66d-48bb-b3f2-ee6ce41b30c8","attributes":{"microseconds":"%T","milliseconds":"%T","seconds":"%b %d, %Y","minsec":"%b %d, %Y","minutes":"%b %d, %Y","hourmin":"%b %d, %Y","hours":"%b %d, %Y","days":"%Y","months":"","years":"","boundary_scaling":false,"hide_repeats":true,"context":{"type":"object","name":"DatetimeTickFormatter","id":"fa1ee6f8-dd35-4c0b-8545-485347c93bb7","attributes":{"microseconds":"%b %d, %Y","milliseconds":"%b %d, %Y","seconds":"","minsec":"","minutes":"","hourmin":"","hours":"","days":"","months":"","years":"","boundary_scaling":false,"hide_repeats":true}},"context_which":"all"}},"context_which":"all"}},"axis_label":"Date","major_label_policy":{"type":"object","name":"AllLabels","id":"5d97f92d-5bf0-44ab-ab77-95e210a83d83"}}}],"center":[{"type":"object","name":"Grid","id":"50253fee-a6f7-452f-946b-a2249c18bf56","attributes":{"axis":{"id":"1ed922d6-7092-40f9-a0f7-8b972cd325bc"},"ticker":{"id":"582ed859-3411-4bc9-b04c-5a078cd39077"}}},{"type":"object","name":"Grid","id":"df5c85e6-3730-46bc-a62c-6af31bf4d376","attributes":{"dimension":1,"axis":{"id":"d6675a72-1c5f-4ffe-88a6-abb370ca984c"},"ticker":{"id":"c78fbc28-dea5-4432-aa82-2af497d1a163"}}}],"min_border_top":10,"min_border_bottom":10,"min_border_left":10,"min_border_right":10,"output_backend":"webgl"}},{"type":"object","name":"Spacer","id":"67ffef63-35b1-46d2-9edf-cc0f2d000e77","attributes":{"name":"HSpacer00329","stylesheets":["\n:host(.pn-loading):before, .pn-loading:before {\n  background-color: #c3c3c3;\n  mask-size: auto calc(min(50%, 300px));\n  -webkit-mask-size: auto calc(min(50%, 300px));\n}",{"id":"9f6f4748-6311-465e-8a02-50c0c8ab55e6"},{"id":"b2be2131-1b33-4f37-a319-1081532e379a"},{"id":"d9d908ce-4a27-4d2d-9b5a-70c6a1526da4"}],"min_width":0,"margin":0,"sizing_mode":"stretch_width","align":"start"}}]}}],"defs":[{"type":"model","name":"ReactiveHTML1"},{"type":"model","name":"FlexBox1","properties":[{"name":"align_content","kind":"Any","default":"flex-start"},{"name":"align_items","kind":"Any","default":"flex-start"},{"name":"flex_direction","kind":"Any","default":"row"},{"name":"flex_wrap","kind":"Any","default":"wrap"},{"name":"gap","kind":"Any","default":""},{"name":"justify_content","kind":"Any","default":"flex-start"}]},{"type":"model","name":"FloatPanel1","properties":[{"name":"config","kind":"Any","default":{"type":"map"}},{"name":"contained","kind":"Any","default":true},{"name":"position","kind":"Any","default":"right-top"},{"name":"offsetx","kind":"Any","default":null},{"name":"offsety","kind":"Any","default":null},{"name":"theme","kind":"Any","default":"primary"},{"name":"status","kind":"Any","default":"normalized"}]},{"type":"model","name":"GridStack1","properties":[{"name":"ncols","kind":"Any","default":null},{"name":"nrows","kind":"Any","default":null},{"name":"allow_resize","kind":"Any","default":true},{"name":"allow_drag","kind":"Any","default":true},{"name":"state","kind":"Any","default":[]}]},{"type":"model","name":"drag1","properties":[{"name":"slider_width","kind":"Any","default":5},{"name":"slider_color","kind":"Any","default":"black"},{"name":"start","kind":"Any","default":0},{"name":"end","kind":"Any","default":100},{"name":"value","kind":"Any","default":50}]},{"type":"model","name":"click1","properties":[{"name":"terminal_output","kind":"Any","default":""},{"name":"debug_name","kind":"Any","default":""},{"name":"clears","kind":"Any","default":0}]},{"type":"model","name":"ReactiveESM1","properties":[{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"JSComponent1","properties":[{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"ReactComponent1","properties":[{"name":"use_shadow_dom","kind":"Any","default":true},{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"AnyWidgetComponent1","properties":[{"name":"use_shadow_dom","kind":"Any","default":true},{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"FastWrapper1","properties":[{"name":"object","kind":"Any","default":null},{"name":"style","kind":"Any","default":null}]},{"type":"model","name":"NotificationArea1","properties":[{"name":"js_events","kind":"Any","default":{"type":"map"}},{"name":"max_notifications","kind":"Any","default":5},{"name":"notifications","kind":"Any","default":[]},{"name":"position","kind":"Any","default":"bottom-right"},{"name":"_clear","kind":"Any","default":0},{"name":"types","kind":"Any","default":[{"type":"map","entries":[["type","warning"],["background","#ffc107"],["icon",{"type":"map","entries":[["className","fas fa-exclamation-triangle"],["tagName","i"],["color","white"]]}]]},{"type":"map","entries":[["type","info"],["background","#007bff"],["icon",{"type":"map","entries":[["className","fas fa-info-circle"],["tagName","i"],["color","white"]]}]]}]}]},{"type":"model","name":"Notification","properties":[{"name":"background","kind":"Any","default":null},{"name":"duration","kind":"Any","default":3000},{"name":"icon","kind":"Any","default":null},{"name":"message","kind":"Any","default":""},{"name":"notification_type","kind":"Any","default":null},{"name":"_rendered","kind":"Any","default":false},{"name":"_destroyed","kind":"Any","default":false}]},{"type":"model","name":"TemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"BootstrapTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"TemplateEditor1","properties":[{"name":"layout","kind":"Any","default":[]}]},{"type":"model","name":"MaterialTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"request_value1","properties":[{"name":"fill","kind":"Any","default":"none"},{"name":"_synced","kind":"Any","default":null},{"name":"_request_sync","kind":"Any","default":0}]},{"type":"model","name":"holoviews.plotting.bokeh.raster.HoverModel","properties":[{"name":"xy","kind":"Any","default":null},{"name":"data","kind":"Any","default":null}]}]}};
  var render_items = [{"docid":"c41df43d-4442-4a5c-9feb-9551a4a17671","roots":{"926c1ae3-0d57-4869-833f-f8c1e05c2e03":"c728ba2a-0199-401f-bf1c-acc90a66e75d"},"root_ids":["926c1ae3-0d57-4869-833f-f8c1e05c2e03"]}];
  var docs = Object.values(docs_json)
  if (!docs) {
    return
  }
  const version = docs[0].version.replace('rc', '-rc.').replace('.dev', '-dev.')
  async function embed_document(root) {
    var Bokeh = get_bokeh(root)
    await Bokeh.embed.embed_items_notebook(docs_json, render_items);
    for (const render_item of render_items) {
      for (const root_id of render_item.root_ids) {
    const id_el = document.getElementById(root_id)
    if (id_el.children.length && id_el.children[0].hasAttribute('data-root-id')) {
      const root_el = id_el.children[0]
      root_el.id = root_el.id + '-rendered'
      for (const child of root_el.children) {
            // Ensure JupyterLab does not capture keyboard shortcuts
            // see: https://jupyterlab.readthedocs.io/en/4.1.x/extension/notebook.html#keyboard-interaction-model
        child.setAttribute('data-lm-suppress-shortcuts', 'true')
      }
    }
      }
    }
  }
  function get_bokeh(root) {
    if (root.Bokeh === undefined) {
      return null
    } else if (root.Bokeh.version !== version) {
      if (root.Bokeh.versions === undefined || !root.Bokeh.versions.has(version)) {
    return null
      }
      return root.Bokeh.versions.get(version);
    } else if (root.Bokeh.version === version) {
      return root.Bokeh
    }
    return null
  }
  function is_loaded(root) {
    var Bokeh = get_bokeh(root)
    return (Bokeh != null && Bokeh.Panel !== undefined)
  }
  if (is_loaded(root)) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (is_loaded(root)) {
        clearInterval(timer);
        embed_document(root);
      } else if (document.readyState == "complete") {
        attempts++;
        if (attempts > 200) {
          clearInterval(timer);
      var Bokeh = get_bokeh(root)
      if (Bokeh == null || Bokeh.Panel == null) {
            console.warn("Panel: ERROR: Unable to run Panel code because Bokeh or Panel library is missing");
      } else {
        console.warn("Panel: WARNING: Attempting to render but not all required libraries could be resolved.")
        embed_document(root)
      }
        }
      }
    }, 25, root)
  }
})(window);</script>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/EO-DataHub\.github\.io\/eodh-training\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>